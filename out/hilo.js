(function(f){f.console=f.console||{log:function(){}};f=Array.prototype;var g=f.slice;f.indexOf=f.indexOf||function(e,d){d=d||0;var b=this.length,c;if(0==b||d>=b)return-1;0>d&&(d=b+d);for(c=d;c<b;c++)if(this[c]===e)return c;return-1};f=Function.prototype;f.bind=f.bind||function(e){function d(){var a=c.concat(g.call(arguments));return b.apply(this instanceof d?this:e,a)}var b=this,c=g.call(arguments,1),a=function(){};a.prototype=b.prototype;d.prototype=new a;return d}})(window);
(function(f){for(var g=0,e=["ms","moz","webkit","o"],d=0;d<e.length&&!f.requestAnimationFrame;++d)f.requestAnimationFrame=f[e[d]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[e[d]+"CancelAnimationFrame"]||f[e[d]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(b,c){var a=(new Date).getTime(),k=Math.max(0,16-(a-g)),h=f.setTimeout(function(){b(a+k)},k);g=a+k;return h});f.cancelAnimationFrame||(f.cancelAnimationFrame=function(b){clearTimeout(b)})})(window);
(function(f){var g=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.toColorRgb=function(){var e=this.toLowerCase();return e&&g.test(e)?4===e.length?{r:parseInt("0x"+e.charAt(1)+e.charAt(1)),g:parseInt("0x"+e.charAt(2)+e.charAt(2)),b:parseInt("0x"+e.charAt(3)+e.charAt(3))}:{r:parseInt("0x"+e.slice(1,3)),g:parseInt("0x"+e.slice(3,5)),b:parseInt("0x"+e.slice(5,7))}:{r:0,g:0,b:0}}})(window);(function(f){var g=function(){var e=document,d=e.documentElement,b=0;return{getUid:function(c){var a=++b;if(c){var k=c.charCodeAt(c.length-1);48<=k&&57>=k&&(c+="_");return c+a}return a},viewToString:function(b){for(var a;b;)a=a?b.id+"."+a:b.id,b=b.parent;return a},copy:function(b,a,k){for(var h in a)if(!k||b.hasOwnProperty(h)||void 0!==b[h])b[h]=a[h];return b},browser:function(){var b=navigator.userAgent,b={iphone:/iphone/i.test(b),ipad:/ipad/i.test(b),ipod:/ipod/i.test(b),ios:/iphone|ipad|ipod/i.test(b),
android:/android/i.test(b),webkit:/webkit/i.test(b),chrome:/chrome/i.test(b),safari:/safari/i.test(b),firefox:/firefox/i.test(b),ie:/msie/i.test(b),opera:/opera/i.test(b),supportTouch:"ontouchstart"in f,supportCanvas:null!=e.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in f,supportDeviceMotion:"ondevicemotion"in f};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),b.supportStorage=!0}catch(q){}var a=b.jsVendor=b.webkit?"webkit":b.firefox?
"Moz":b.opera?"O":b.ie?"ms":"",k=b.cssVendor="-"+a+"-",h=e.createElement("div"),r=h.style,v=void 0!=r[a+"Transform"];if(a=void 0!=r[a+"Perspective"])h.id="test3d",r=e.createElement("style"),r.textContent="@media ("+k+"transform-3d){#test3d{height:3px}}",e.head.appendChild(r),d.appendChild(h),a=3==h.offsetHeight,e.head.removeChild(r),d.removeChild(h);b.supportTransform=v;b.supportTransform3D=a;return b}(),event:function(){var b="ontouchstart"in f;return{POINTER_START:b?"touchstart":"mousedown",POINTER_MOVE:b?
"touchmove":"mousemove",POINTER_END:b?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(b){try{var a=b.getBoundingClientRect()}catch(e){a={top:b.offsetTop,left:b.offsetLeft,width:b.offsetWidth,height:b.offsetHeight}}var k=(f.pageXOffset||d.scrollLeft)-(d.clientLeft||0)||0,h=(f.pageYOffset||d.scrollTop)-(d.clientTop||0)||0,r=f.getComputedStyle?getComputedStyle(b):b.currentStyle,v=
parseInt;b=v(r.paddingLeft)+v(r.borderLeftWidth)||0;var q=v(r.paddingTop)+v(r.borderTopWidth)||0,t=v(r.paddingRight)+v(r.borderRightWidth)||0,r=v(r.paddingBottom)+v(r.borderBottomWidth)||0,v=a.top||0,g=a.left||0;return{left:g+k+b,top:v+h+q,width:a.right-t-g-b,height:a.bottom-r-v-q}},createElement:function(b,a){var k=e.createElement(b),h,r,d;for(h in a)if(r=a[h],"style"===h)for(d in r)k.style[d]=r[d];else k[h]=r;return k},getElement:function(b){return e.getElementById(b)}}}();g.undefined=void 0;f.Hilo=
g})(window);(function(f){f=f.Hilo;var g=function(){var e=function(a){var k={},b,e;for(b in a)e=a[b],d.hasOwnProperty(b)?d[b].call(this,e):k[b]=e;c(this.prototype,k)},d={Extends:function(a){var k=this.prototype,d=b(a.prototype);c(this,a);c(d,k);d.constructor=this;this.prototype=d;this.superclass=a.prototype},Mixes:function(a){a instanceof Array||(a=[a]);for(var k=this.prototype,b;b=a.shift();)c(k,b.prototype||b)},Statics:function(a){c(this,a)}},b=function(){if(Object.__proto__)return function(a){return{__proto__:a}};
var a=function(){};return function(k){a.prototype=k;return new a}}(),c=function(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b],e,g;for(g in d){var f=d[g];!f||"object"!==typeof f||void 0===f.value&&"function"!==typeof f.get&&"function"!==typeof f.set?a[g]=f:(e=e||{},e[g]=f)}e&&k(a,e)}return a};try{var a=Object.defineProperty,k=Object.defineProperties;a({},"$",{value:0})}catch(h){"__defineGetter__"in Object&&(a=function(a,k,b){"value"in b&&(a[k]=b.value);"get"in b&&a.__defineGetter__(k,
b.get);"set"in b&&a.__defineSetter__(k,b.set);return a},k=function(k,b){for(var h in b)b.hasOwnProperty(h)&&a(k,h,b[h]);return k})}return{create:function(a){a=a||{};var k=a.hasOwnProperty("constructor")?a.constructor:function(){};e.call(k,a);return k},mix:c}}();f.Class=g})(window);(function(f){var g=f.Hilo,e=g.Class.create({constructor:function(b,c,a){this.type=b;this.target=c;this.detail=a;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}});if(f=f.Event){f=f.prototype;var d=f.stopImmediatePropagation;f.stopImmediatePropagation=function(){d&&d.call(this);this._stopped=!0}}g.Event={_listeners:null,on:function(b,c,a){var k=this._listeners=this._listeners||{};b=k[b]=k[b]||[];for(var k=0,h=b.length;k<h;k++)if(b[k].listener===
c)return;b.push({listener:c,once:a});return this},off:function(b,c){if(0==arguments.length)return this._listeners=null,this;var a=this._listeners&&this._listeners[b];if(a){if(1==arguments.length)return delete this._listeners[b],this;for(var k=0,h=a.length;k<h;k++)if(a[k].listener===c){a.splice(k,1);0===a.length&&delete this._listeners[b];break}}return this},fire:function(b,c){var a,k;"string"===typeof b?k=b:(a=b,k=b.type);var h=this._listeners;if(!h)return!1;var d=h[k];if(d){d=d.slice(0);a=a||new e(k,
this,c);if(a._stopped)return!1;for(var v=0;v<d.length;v++){var q=d[v];q.listener.call(this,a);q.once&&d.splice(v--,1)}0==d.length&&delete h[k];return!0}return!1}}})(window);(function(f){f=f.Hilo;var g=f.Class.create({constructor:function(e,d,b,c,a,k){this.a=e;this.b=d;this.c=b;this.d=c;this.tx=a;this.ty=k},concat:function(e){var d=arguments,b=this.a,c=this.b,a=this.c,k=this.d,h=this.tx,r=this.ty;if(6<=d.length)var v=d[0],q=d[1],g=d[2],f=d[3],n=d[4],d=d[5];else v=e.a,q=e.b,g=e.c,f=e.d,n=e.tx,d=e.ty;this.a=b*v+c*g;this.b=b*q+c*f;this.c=a*v+k*g;this.d=a*q+k*f;this.tx=h*v+r*g+n;this.ty=h*q+r*f+d;return this},rotate:function(e){var d=Math.sin(e);e=Math.cos(e);var b=this.a,
c=this.b,a=this.c,k=this.d,h=this.tx,r=this.ty;this.a=b*e-c*d;this.b=b*d+c*e;this.c=a*e-k*d;this.d=a*d+k*e;this.tx=h*e-r*d;this.ty=h*d+r*e;return this},scale:function(e,d){this.a*=e;this.d*=d;this.c*=e;this.b*=d;this.tx*=e;this.ty*=d;return this},translate:function(e,d){this.tx+=e;this.ty+=d;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var e=this.a,d=this.b,b=this.c,c=this.d,a=this.tx,k=e*c-d*b;this.a=c/k;this.b=-d/k;this.c=-b/k;this.d=
e/k;this.tx=(b*this.ty-c*a)/k;this.ty=-(e*this.ty-d*a)/k;return this},transformPoint:function(e,d,b){var c=e.x*this.a+e.y*this.c+this.tx,a=e.x*this.b+e.y*this.d+this.ty;d&&(c=c+.5>>0,a=a+.5>>0);if(b)return{x:c,y:a};e.x=c;e.y=a;return e}});f.Matrix=g})(window);(function(f){var g=f.Hilo,e=g.Class.create({constructor:function(d){this._targetFPS=d||30;this._interval=1E3/this._targetFPS;this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(d){if(!this._intervalId){this._lastTime=+new Date;var b=this,c=this._interval,a=f.requestAnimationFrame||f[g.browser.jsVendor+"RequestAnimationFrame"];if(d&&a)var k=function(){b._tick()},h=function(){b._intervalId=setTimeout(h,
c);a(k)};else h=function(){b._intervalId=setTimeout(h,c);b._tick()};h()}},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var d=+new Date,b=d-this._lastTime,c=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1E3/(this._tickTime/this._tickCount)+.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=d-this._lastTime;this._lastTime=d;for(var d=
0,a=c.length;d<a;d++)c[d].tick(b)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(d){if(!d||"function"!=typeof d.tick)throw Error("Ticker: The tick object must implement the tick method.");this._tickers.push(d)},removeTick:function(d){var b=this._tickers;d=b.indexOf(d);0<=d&&b.splice(d,1)}});g.Ticker=e})(window);(function(f){var g=f.Hilo,e=g.Class.create({constructor:function(d){this.init(d)},image:null,rect:null,init:function(d){var b=this,c=b.image;e.isDrawable(d)?b.image=d:g.copy(b,d,!0);d=b.image;if("string"===typeof d)if(c&&d===c.getAttribute("src"))d=b.image=c;else{b.image=null;var a=new Image;a.onload=function(){a.onload=null;b.init(a)};a.src=d;return}d&&!b.rect&&(b.rect=[0,0,d.width,d.height])},Statics:{isDrawable:function(d){if(!d||!d.tagName)return!1;d=d.tagName.toLowerCase();return"img"===d||"canvas"===
d||"video"===d}}});g.Drawable=e})(window);(function(f){var g=f.Hilo,e=g.Class.create({load:function(d){var b=d.src,c="jsonp"==d.type;if(c){var a=d.callbackName||"callback",k=d.callback||"jsonp"+ ++e._count;f[k]||(f[k]=function(a){delete f[k]})}c&&(b+=(-1==b.indexOf("?")?"?":"&")+a+"="+k);d.noCache&&(b+=(-1==b.indexOf("?")?"?":"&")+"t="+ +new Date);c=document.createElement("script");c.type="text/javascript";c.async=!0;c.onload=this.onLoad.bind(this);c.onerror=this.onError.bind(this);c.src=b;d.id&&(c.id=d.id);document.getElementsByTagName("head")[0].appendChild(c)},
onLoad:function(d){d=d.target;d.onload=d.onerror=null;return d},onError:function(d){var b=d.target;b.onload=b.onerror=null;return d},Statics:{_count:0}});g.ScriptLoader=e})(window);(function(f){var g=f.Hilo,e=g.Class.create({load:function(d){var b=this,c=new Image;d.crossOrigin&&(c.crossOrigin=d.crossOrigin);c.onload=function(){b.onLoad(c)};c.onerror=c.onabort=b.onError.bind(c);c.src=d.src+(d.noCache?(-1==d.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(d){d=d||f.event;d.onload=d.onerror=d.onabort=null;return d},onError:function(d){var b=d.target;b.onload=b.onerror=b.onabort=null;return d}});g.ImageLoader=e})(window);(function(f){f=f.Hilo;var g=f.ImageLoader,e=f.ScriptLoader,d=f.Class.create({Mixes:f.Event,constructor:function(b){this._source=[];this.add(b)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(b){b&&(b=b instanceof Array?b:[b],this._source=this._source.concat(b));return this},get:function(b){if(b)for(var c=this._source,a=0;a<c.length;a++){var k=c[a];if(k.id===b||k.src===b)return k}return null},getContent:function(b){return(b=this.get(b))&&b.content},start:function(){this._loadNext();
return this},_loadNext:function(){var b=this,c=b._source,a=c.length;if(b._loaded>=a)b.fire("complete");else if(b._currentIndex<a-1&&b._connections<b.maxConnections){var k=++b._currentIndex,c=c[k],h=b._getLoader(c);if(h){var d=h.onLoad,e=h.onError;h.onLoad=function(a){h.onLoad=d;h.onError=e;a=d&&d.call(h,a)||a.target;b._onItemLoad(k,a)};h.onError=function(a){h.onLoad=d;(h.onError=e)&&e.call(h,a);b._onItemError(k,a)};b._connections++}b._loadNext();h&&h.load(c)}},_getLoader:function(b){var c=b.loader;
if(c)return c;var a;if(!(a=b.type)){var k;if(b=b.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i))k=b[1].toLowerCase();a=k||null}switch(a){case "png":case "jpg":case "jpeg":case "gif":c=new g;break;case "js":case "jsonp":c=new e}return c},_onItemLoad:function(b,c){var a=this._source[b];a.loaded=!0;a.content=c;this._connections--;this._loaded++;this.fire("load",a);this._loadNext()},_onItemError:function(b,c){var a=this._source[b];a.error=c;this._connections--;this._loaded++;this.fire("error",a);this._loadNext()},
getSize:function(b){for(var c=0,a=this._source,k=0;k<a.length;k++)var h=a[k],c=c+((b?h.loaded&&h.size:h.size)||0);return c},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});f.LoadQueue=d})(window);(function(f){var g=f.Hilo;f=g.Class.create({Mixes:g.Event,constructor:function(e){g.copy(this,e,!0);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element)try{var e=this._element=new Audio;e.addEventListener("canplaythrough",this._onAudioEvent,!1);e.addEventListener("ended",this._onAudioEvent,!1);e.addEventListener("error",this._onAudioEvent,!1);e.src=this.src;e.volume=this.volume;
e.load()}catch(d){e=this._element={},e.play=e.pause=function(){}}return this},_onAudioEvent:function(e){var d=e.type;switch(d){case "canplaythrough":e.target.removeEventListener(d,this._onAudioEvent);this.loaded=!0;this.duration=this._element.duration;this.fire("load");this.autoPlay&&this._doPlay();break;case "ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case "error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),
this.playing=!0)},play:function(){this.playing&&this.stop();this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._element.pause(),this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1);return this},setVolume:function(e){this.volume!=e&&(this.volume=e,this._element.volume=e);return this},setMute:function(e){this.muted!=
e&&(this.muted=e,this._element.volume=e?0:this.volume);return this},Statics:{isSupported:null!==f.Audio}});g.HTMLAudio=f})(window);(function(f){var g=f.Hilo,e=g.Class,d=g.Event,b=function(){var b=f.AudioContext||f.webkitAudioContext,a=b?new b:null;return e.create({Mixes:d,constructor:function(a){g.copy(this,a,!0);this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=a;this._gainNode=a.createGain?a.createGain():a.createGainNode();this._gainNode.connect(a.destination);this._onAudioEvent=
this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var a=new XMLHttpRequest;a.src=this.src;a.open("GET",this.src,!0);a.responseType="arraybuffer";a.onload=this._onAudioEvent;a.onprogress=this._onAudioEvent;a.onerror=this._onAudioEvent;a.send();this._buffer=!0}return this},_onAudioEvent:function(a){switch(a.type){case "load":a=a.target;a.onload=a.onprogress=a.onerror=null;this._context.decodeAudioData(a.response,
this._onDecodeComplete,this._onDecodeError);break;case "ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case "progress":this.fire(a);break;case "error":this.fire(a)}},_onDecodeComplete:function(a){this._buffer=a;this.loaded=!0;this.duration=a.duration;this.fire("load");this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var a=this._context.createBufferSource();a.start||(a.start=a.noteOn,a.stop=a.noteOff);a.buffer=
this._buffer;a.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;a.connect(this._gainNode);a.start(0,this._offset);this._audioNode=a;this._startTime=this._context.currentTime;this.playing=!0},_clearAudioNode:function(){var a=this._audioNode;a&&(a.onended=null,a.disconnect(0),this._audioNode=null)},play:function(){this.playing&&this.stop();this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._audioNode.stop(0),
this._offset+=this._context.currentTime-this._startTime,this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1);return this},setVolume:function(a){this.volume!=a&&(this.volume=a,this._gainNode.gain.value=a);return this},setMute:function(a){this.muted!=a&&(this.muted=a,this._gainNode.gain.value=a?0:this.volume);return this},Statics:{isSupported:null!=
b,enabled:!1,enable:function(){if(!this.enabled&&a){var b=a.createBufferSource();b.buffer=a.createBuffer(1,1,22050);b.connect(a.destination);b.start?b.start(0,0,0):b.noteOn(0,0,0);return this.enabled=!0}return this.enabled}}})}();g.WebAudio=b})(window);(function(f){var g=f.Hilo,e=g.HTMLAudio,d=g.WebAudio;g.WebSound={_audios:{},enableAudio:function(){d.isSupported&&d.enable()},getAudio:function(b){b=this._normalizeSource(b);var c=this._audios[b.src];c||(d.isSupported?c=new d(b):e.isSupported&&(c=new e(b)),this._audios[b.src]=c);return c},removeAudio:function(b){b="string"===typeof b?b:b.src;var d=this._audios[b];d&&(d.stop(),d.off(),this._audios[b]=null,delete this._audios[b])},_normalizeSource:function(b){var d={};"string"===typeof b?d={src:b}:
g.copy(d,b);return d}}})(window);(function(f){var g=f.Hilo;f=g.Class.create({constructor:function(e){e=e||{};g.copy(this,e,!0)},renderType:null,canvas:null,stage:null,startDraw:function(e){return!0},draw:function(e){},endDraw:function(e){},transform:function(){},clear:function(e,d,b,c){},resize:function(e,d){},setElementStyleByView:function(e){var d=g.browser.jsVendor,b=!1,c=e.parent,a=e.drawable,b=a.domElement,k=b.style,h=e._stateCache||(e._stateCache={});if(!e.width&&!e.height){var r=a.rect;r&&(r[2]||r[3])&&(e.width=r[2],e.height=
r[3])}c&&(r=c.drawable&&c.drawable.domElement)&&r!=b.parentNode&&r.appendChild(b);this.cacheStateIfChanged(e,["visible"],h)&&(k.display=e.visible?"":"none");this.cacheStateIfChanged(e,["alpha"],h)&&(k.opacity=e.alpha);if(e.visible&&!(0>=e.alpha)){this.cacheStateIfChanged(e,["width"],h)&&(k.width=e.width+"px");this.cacheStateIfChanged(e,["height"],h)&&(k.height=e.height+"px");this.cacheStateIfChanged(e,["depth"],h)&&(k.zIndex=e.depth+1);if(b=this.cacheStateIfChanged(e,["pivotX","pivotY"],h)){var c=
e.pivotX,v=e.pivotY;if(r=a.rect){var q=r[2],f=r[3],l=r[4],r=r[5];if(l||r)c-=l-.5*q,v-=r-.5*f}k[d+"TransformOrigin"]=c+"px "+v+"px"}if(this.cacheStateIfChanged(e,["x","y","rotation","scaleX","scaleY"],h)||b)k[d+"Transform"]=this.getTransformCSS(e);this.cacheStateIfChanged(e,["background"],h)&&(k.backgroundColor=e.background);k.pointerEvents||(k.pointerEvents="none");if(e=a.image)if(e=e.src,e!==h.image&&(h.image=e,k.backgroundImage="url("+e+")"),r=a.rect)a=r[0],e=r[1],a!==h.sx&&(h.sx=a,k.backgroundPositionX=
-a+"px"),e!==h.sy&&(h.sy=e,k.backgroundPositionY=-e+"px")}},cacheStateIfChanged:function(e,d,b){var c,a,k,h,r=!1;c=0;for(a=d.length;c<a;c++)k=d[c],h=e[k],h!=b[k]&&(b[k]=h,r=!0);return r},getTransformCSS:function(e){var d=g.browser.supportTransform3D,b=d?"3d":"";return"translate"+b+"("+(e.x-e.pivotX)+"px, "+(e.y-e.pivotY)+(d?"px, 0px)":"px)")+"rotate"+b+(d?"(0, 0, 1, ":"(")+e.rotation+"deg)scale"+b+"("+e.scaleX+", "+e.scaleY+(d?", 1)":")")}});g.Renderer=f})(window);(function(f){var g=f.Hilo,e=g.Class,d=g.Renderer,b=g.Drawable,c=function(){return e.create({Extends:d,constructor:function(a){c.superclass.constructor.call(this,a)},renderType:"dom",startDraw:function(a){var k=a.drawable=a.drawable||new b,h;if(!(h=k.domElement)){var d=a.tagName||"div";h=k.image;var c=a.width||h&&h.width,e=a.height||h&&h.height,f=g.createElement(d),l=f.style;a.id&&(f.id=a.id);l.position="absolute";l.left=(a.left||0)+"px";l.top=(a.top||0)+"px";l.width=c+"px";l.height=e+"px";"canvas"==
d?(f.width=c,f.height=e,h&&(d=f.getContext("2d"),c=k.rect||[0,0,c,e],d.drawImage(h,c[0],c[1],c[2],c[3],a.x||0,a.y||0,a.width||c[2],a.height||c[3]))):(l.opacity=void 0!=a.alpha?a.alpha:1,a.clipChildren&&(l.overflow="hidden"),h&&h.src&&(l.backgroundImage="url("+h.src+")",l.backgroundPosition=-(a.rectX||0)+"px "+-(a.rectY||0)+"px"));h=f}k.domElement=h;return a.visible},draw:function(a){this.setElementStyleByView(a)},resize:function(a,b){var h=this.canvas.style;h.width=a+"px";h.height=b+"px";"absolute"!=
h.position&&(h.position="relative")}})}();g.DOMRenderer=c})(window);(function(f){f=f.Hilo;var g=f.Matrix,e=Math.PI/180,d=f.Class.create({Extends:f.Renderer,Statics:{MAX_BATCH_NUM:2E3,ATTRIBUTE_NUM:5,isSupport:null},renderType:"webgl",gl:null,constructor:function(a){d.superclass.constructor.call(this,a);a=this.gl=this.canvas.getContext("webgl",{stencil:!0})||this.canvas.getContext("experimental-webgl",{stencil:!0});a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);a.enable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.STENCIL_TEST);this._initShaders();
this.vertex2=new Float32Array(8);this.indexs2=new Uint16Array([0,1,2,1,2,3]);this.notextureShader.active();a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indexs2,a.STATIC_DRAW);a.bufferData(a.ARRAY_BUFFER,this.vertex2,a.STREAM_DRAW);this.maxBatchNum=d.MAX_BATCH_NUM;this.positionStride=4*d.ATTRIBUTE_NUM;var b=6*this.maxBatchNum;this.vertex=new Float32Array(this.maxBatchNum*d.ATTRIBUTE_NUM*4);this.indexs=new Uint16Array(b);for(var h=0,c=0;h<b;h+=6,c+=4)this.indexs[h+0]=c+0,this.indexs[h+1]=c+1,this.indexs[h+
2]=c+2,this.indexs[h+3]=c+1,this.indexs[h+4]=c+2,this.indexs[h+5]=c+3;this.batchIndex=0;this.sprites=[];this.defaultShader.active();a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indexs,a.STATIC_DRAW);a.bufferData(a.ARRAY_BUFFER,this.vertex,a.STREAM_DRAW)},context:null,startDraw:function(a){return a.visible&&0<a.alpha?(a===this.stage&&this.clear(),a.__webglWorldMatrix=a.__webglWorldMatrix||new g(1,0,0,1,0,0),a.__webglRenderAlpha=a.__webglRenderAlpha||1,!0):!1},draw:function(a){var b=a.drawable,h=b&&b.image,
b=b&&b.rect,d=a.background,c=a.width,e=a.height;!b||c||e||(a.width=b[2],a.height=b[3]);(this.batchIndex>=this.maxBatchNum||d)&&this._renderBatches();a.clipChildren&&(this.stencilLevel=this.stencilLevel||0,c=this.gl,0===this.stencilLevel?(c.enable(c.STENCIL_TEST),c.clear(c.STENCIL_BUFFER_BIT),c.stencilFunc(c.ALWAYS,1,255),c.stencilOp(c.KEEP,c.REPLACE,c.REPLACE)):c.stencilOp(c.KEEP,c.INCR,c.INCR),c.colorMask(!1,!1,!1,!1),this.notextureShader.active(),this._renderBackground(a,{r:1,g:1,b:1}),this.stencilLevel+=
1,c.colorMask(!0,!0,!0,!0),c.stencilFunc(c.LEQUAL,this.stencilLevel,255),c.stencilOp(c.KEEP,c.KEEP,c.KEEP));d&&(this.notextureShader.active(),this._renderBackground(a,d.toColorRgb()));h&&(this.defaultShader.active(),this._renderImage(a,h,b))},endDraw:function(a){a===this.stage&&this._renderBatches();a.clipChildren&&(a=this.gl,--this.stencilLevel,a.stencilFunc(a.LEQUAL,this.stencilLevel,255),0==this.stencilLevel&&(this._renderBatches(),a.disable(this.gl.STENCIL_TEST)))},transform:function(a){this._setConcatenatedMatrix(a,
a.parent);0<a.alpha&&(a.__webglRenderAlpha=a.parent&&a.parent.__webglRenderAlpha?a.alpha*a.parent.__webglRenderAlpha:a.alpha)},clear:function(a,b,h,c){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(a,b){if(this.width!==a||this.height!==b)this.width=this.canvas.width=a,this.height=this.canvas.height=b,this.gl.viewport(0,0,a,b),this.activeShader.active(!0)},_renderBackground:function(a,b){var h=this.gl,c=a.__webglRenderAlpha;h.uniform4f(this.activeShader.u_color,b.r/255*c,b.g/255*c,b.b/255*
c,c);var d=a.width,e=a.height,c=-a.pivotX,f=a.pivotY-e,g=this.vertex2;g[0]=c;g[1]=f;g[2]=c+d;g[3]=f;g[4]=c;g[5]=f+e;g[6]=c+d;g[7]=f+e;d=a.__webglWorldMatrix;for(e=0;4>e;e++)c=g[2*e],f=g[2*e+1],g[2*e]=d.a*c+d.c*f+d.tx,g[2*e+1]=d.b*c+d.d*f+d.ty;h.bufferData(h.ARRAY_BUFFER,g,h.STREAM_DRAW);h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0)},_renderImage:function(a,b,h){b.texture||this.activeShader.uploadTexture(b);var c=h[2],d=h[3],e=h[4],g=h[5],f=a.width,n=a.height,m=-a.pivotX,p=-a.pivotY;if(e||g)m=m+
e-.5*c,p=p+g-.5*d;d=this._createVertexs(b,h[0],h[1],c,d,m,p,f,n);h=this.batchIndex*this.positionStride;c=this.vertex;e=a.__webglRenderAlpha;c[h+0]=d[0];c[h+1]=d[1];c[h+2]=d[2];c[h+3]=d[3];c[h+4]=e;c[h+5]=d[4];c[h+6]=d[5];c[h+7]=d[6];c[h+8]=d[7];c[h+9]=e;c[h+10]=d[8];c[h+11]=d[9];c[h+12]=d[10];c[h+13]=d[11];c[h+14]=e;c[h+15]=d[12];c[h+16]=d[13];c[h+17]=d[14];c[h+18]=d[15];c[h+19]=e;d=a.__webglWorldMatrix;for(e=0;4>e;e++)g=c[h+5*e],f=c[h+5*e+1],c[h+5*e]=d.a*g+d.c*f+d.tx,c[h+5*e+1]=d.b*g+d.d*f+d.ty;
a.texture=b.texture;this.sprites[this.batchIndex++]=a},_renderBatches:function(){var a=this.gl;a.bufferSubData(a.ARRAY_BUFFER,0,this.vertex.subarray(0,this.batchIndex*this.positionStride));for(var a=0,b=null,c=0;c<this.batchIndex;c++){var d=this.sprites[c];b&&b!==d.texture&&(this._renderBatch(a,c),a=c);b=d.texture}this._renderBatch(a,this.batchIndex);this.batchIndex=0},_renderBatch:function(a,b){var c=this.gl,d=b-a;0<d&&(c.bindTexture(c.TEXTURE_2D,this.sprites[a].texture),c.drawElements(c.TRIANGLES,
6*d,c.UNSIGNED_SHORT,12*a))},_initShaders:function(){this.defaultShader=new c(this,{v:"attribute vec2 a_position;\nattribute vec2 a_TexCoord;\nattribute float a_alpha;\nuniform mat3 u_projectionTransform;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n    v_TexCoord = a_TexCoord;\n    v_alpha = a_alpha;\n}\n",f:"\nprecision mediump float;\nuniform sampler2D u_Sampler;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_alpha;\n}\n"},
{attributes:[{name:"a_position",count:2,offset:0,stride:20},{name:"a_TexCoord",count:2,offset:8,stride:20},{name:"a_alpha",count:1,offset:16,stride:20}],uniforms:["u_projectionTransform","u_Sampler"]});this.notextureShader=new c(this,{v:"attribute vec2 a_position;\nuniform mat3 u_projectionTransform;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n}\n",f:"\nprecision mediump float;\nuniform vec4 u_color;\nvoid main(){\n    gl_FragColor = u_color;\n}\n"},
{attributes:[{name:"a_position",count:2,offset:0,stride:8}],uniforms:["u_projectionTransform","u_color"]})},_createVertexs:function(a,b,c,d,e,g,f,l,n){var m=this.__tempVertexs||[],p=a.width;a=a.height;d/=p;e/=a;b/=p;c/=a;1<d+b&&(d=1-b);1<e+c&&(e=1-c);c=1-c-e;f=-n-f;p=0;m[p++]=g;m[p++]=f;m[p++]=b;m[p++]=c;m[p++]=g+l;m[p++]=f;m[p++]=b+d;m[p++]=c;m[p++]=g;m[p++]=f+n;m[p++]=b;m[p++]=c+e;m[p++]=g+l;m[p++]=f+n;m[p++]=b+d;m[p++]=c+e;return m},_setConcatenatedMatrix:function(a,b){var c=a.__webglWorldMatrix,
d=1,g=0,f=360-a.rotation%360,t=a.scaleX,l=a.scaleY;f&&(g=f*e,d=Math.cos(g),g=Math.sin(g));c.a=d*t;c.b=g*t;c.c=-g*l;c.d=d*l;c.tx=a.x;c.ty=-a.y;d=b.__webglWorldMatrix;c.concat(d.a,d.b,d.c,d.d,d.tx,d.ty)}}),b={},c=function(a,b,c){this.renderer=a;this.gl=a.gl;this.program=this._createProgram(this.gl,b.v,b.f);c=c||{};this.attributes=c.attributes||[];this.uniforms=c.uniforms||[];this.vertexBuffer=this.gl.createBuffer();this.indexBuffer=this.gl.createBuffer()};c.prototype={active:function(a){var b=this,
c=b.renderer,d=c.activeShader;if(d!==b||a){var e=b.gl,g=b.program;g&&e&&(d&&d.attributes.forEach(function(a){e.disableVertexAttribArray(d[a.name])}),c.activeShader=b,e.useProgram(g),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,b.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,b.vertexBuffer),b.attributes.forEach(function(a){attribute=a.name;b[attribute]=b[attribute]||e.getAttribLocation(g,attribute);e.enableVertexAttribArray(b[attribute]);e.vertexAttribPointer(b[attribute],a.count,e.FLOAT,!1,a.stride,a.offset)}),
b.uniforms.forEach(function(a){b[a]=b[a]||e.getUniformLocation(g,a)}),b.width!==c.width||b.height!==c.height)&&(b.width=c.width,b.height=c.height,b.uploadProjectionTransform(!0))}},uploadTexture:function(a){var c=this.gl;if(b[a.src])a.texture=b[a.src];else{var d=c.createTexture();c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,d);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.uniform1i(this.u_Sampler,0);c.bindTexture(c.TEXTURE_2D,null);a.texture=d;b[a.src]=d}},uploadProjectionTransform:function(a){var b=this.gl;if(!this._projectionTransformElements||a)this._projectionTransformElements=new Float32Array([2/this.width,0,0,0,2/this.height,0,-1,1,1]);b.uniformMatrix3fv(this.u_projectionTransform,
!1,this._projectionTransformElements)},_createProgram:function(a,b,c){b=this._createShader(a,a.VERTEX_SHADER,b);var d=this._createShader(a,a.FRAGMENT_SHADER,c);if(!b||!d)return null;if(c=a.createProgram())if(a.attachShader(c,b),a.attachShader(c,d),a.linkProgram(c),a.deleteShader(d),a.deleteShader(b),!a.getProgramParameter(c,a.LINK_STATUS))return b=a.getProgramInfoLog(c),console.log("Failed to link program: "+b),a.deleteProgram(c),null;return c},_createShader:function(a,b,c){if(b=a.createShader(b))if(a.shaderSource(b,
c),a.compileShader(b),!a.getShaderParameter(b,a.COMPILE_STATUS))return c=a.getShaderInfoLog(b),console.log("Failed to compile shader: "+c),a.deleteShader(b),null;return b}};d.isSupport=function(){if(void 0===this._isSupport){var a=document.createElement("canvas");a.getContext&&(a.getContext("webgl")||a.getContext("experimental-webgl"))?this._isSupport=!0:this._isSupport=!1}return this._isSupport};f.WebGLRenderer=d})(window);(function(f){f=f.Hilo;var g=f.Class.create({Extends:f.Renderer,constructor:function(e){g.superclass.constructor.call(this,e);this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(e){return e.visible&&0<e.alpha?(e===this.stage&&this.clear(0,0,e.width,e.height),this.context.save(),!0):!1},draw:function(e){var d=this.context,b=e.width,c=e.height;e.clipChildren&&(d.beginPath(),d.rect(0,0,b,c),d.clip());var a=e.background;a&&(d.fillStyle=a,d.fillRect(0,0,b,c));
var k=e.drawable;if(a=k&&k.image){var k=k.rect,h=k[2],g=k[3],f=k[4],q=k[5];b||c||(b=e.width=h,c=e.height=g);(f||q)&&d.translate(f-.5*h,q-.5*g);d.drawImage(a,k[0],k[1],h,g,0,0,b,c)}},endDraw:function(e){this.context.restore()},transform:function(e){var d=this.context,b=e.x,c=e.y,a=e.scaleX,k=e.scaleY,h=e.pivotX,g=e.pivotY,f=e.rotation%360,q=e.align;if(q)if("function"===typeof q)e.align();else{var t=e.parent;if(t){var l=e.width,n=e.height,m=t.width,t=t.height;switch(q){case "TL":c=b=0;break;case "T":b=
m-l>>1;c=0;break;case "TR":b=m-l;c=0;break;case "L":b=0;c=t-n>>1;break;case "C":b=m-l>>1;c=t-n>>1;break;case "R":b=m-l;c=t-n>>1;break;case "BL":b=0;c=t-n;break;case "B":b=m-l>>1;c=t-n;break;case "BR":b=m-l,c=t-n}}}0==b&&0==c||d.translate(b,c);0!=f&&d.rotate(f*Math.PI/180);1==a&&1==k||d.scale(a,k);0==h&&0==g||d.translate(-h,-g);0<e.alpha&&(d.globalAlpha*=e.alpha)},clear:function(e,d,b,c){this.context.clearRect(e,d,b,c)},resize:function(e,d){this.canvas.width=e;this.canvas.height=d}});f.CanvasRenderer=
g})(window);(function(f){var g=f.Hilo,e=g.Class,d=g.Event,b=g.Matrix;f=function(){function c(a,b,c){for(var d=a.length,e=b.length,g,f,l,n,m,p,u=0,w=g=0;w<d;w++){g=a[w];f=a[w<d-1?w+1:0];u=g.y-f.y;g=f.x-g.x;f=Math.sqrt(u*u+g*g);u/=f;g/=f;f=l=a[0].x*u+a[0].y*g;for(var x=1;x<d;x++)p=a[x].x*u+a[x].y*g,p>l?l=p:p<f&&(f=p);n=m=b[0].x*u+b[0].y*g;for(x=1;x<e;x++)p=b[x].x*u+b[x].y*g,p>m?m=p:p<n&&(n=p);f<n?(f=n-l,u=-u,g=-g):f-=m;if(0<=f)return!1;f>c.overlap&&(c.overlap=f,c.normal.x=u,c.normal.y=g)}return c}return e.create({Mixes:d,
constructor:function(a){a=a||{};this.id=this.id||a.id||g.getUid("View");g.copy(this,a,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var a=this,b;b=a.parent;)a=b;return a.canvas?a:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(a,b){"number"===
typeof b?a.addChildAt(this,b):a.addChild(this);return this},removeFromParent:function(){var a=this.parent;a&&a.removeChild(this);return this},getBounds:function(){for(var a=this.width,b=this.height,c=this.getConcatenatedMatrix(),a=this.boundsArea||[{x:0,y:0},{x:a,y:0},{x:a,y:b},{x:0,y:b}],b=[],d,e,g,f,l,n,m,p=0,u=a.length;p<u;p++)d=c.transformPoint(a[p],!0,!0),e=d.x,g=d.y,0==p?(f=l=e,n=m=g):(f>e?f=e:l<e&&(l=e),n>g?n=g:m<g&&(m=g)),b[p]=d;b.x=f;b.y=n;b.width=l-f;b.height=m-n;return b},getConcatenatedMatrix:function(a){for(var c=
new b(1,0,0,1,0,0),d=this;d!=a&&d.parent;d=d.parent){var e=1,g=0,f=d.rotation%360,t=d.pivotX,l=d.pivotY,n=d.scaleX,m=d.scaleY;f&&(g=f*Math.PI/180,e=Math.cos(g),g=Math.sin(g));0!=t&&(c.tx-=t);0!=l&&(c.ty-=l);c.concat(e*n,g*n,-g*m,e*m,d.x,d.y)}return c},hitTestPoint:function(a,b,c){var d=this.getBounds(),e=a>=d.x&&a<=d.x+d.width&&b>=d.y&&b<=d.y+d.height;if(e&&c){c=0;for(var e=!1,g,f,l,n,m=0,p=d.length;m<p;m++){var u=d[m],w=d[(m+1)%p];if(u.y==w.y&&b==u.y&&(u.x>w.x?(g=w.x,f=u.x):(g=u.x,f=w.x),a>=g&&a<=
f)){e=!0;continue}u.y>w.y?(l=w.y,n=u.y):(l=u.y,n=w.y);if(!(b<l||b>n)){var x=(b-u.y)*(w.x-u.x)/(w.y-u.y)+u.x;x>a?c++:x==a&&(e=!0);u.x>a&&u.y==b&&(u=d[(p+m-1)%p],(u.y<b&&w.y>b||u.y>b&&w.y<b)&&c++)}}e=e||1==c%2}return e},hitTestObject:function(a,b){var d=this.getBounds(),e=a.getBounds(),g=d.x<=e.x+e.width&&e.x<=d.x+d.width&&d.y<=e.y+e.height&&e.y<=d.y+d.height;g&&b&&(g=(g=c(d,e,{overlap:-Infinity,normal:{x:0,y:0}}))?c(e,d,g):!1);return!!g},_render:function(a,b){this.onUpdate&&!1===this.onUpdate(b)||
!a.startDraw(this)||(a.transform(this),this.render(a,b),a.endDraw(this))},_fireMouseEvent:function(a){a.eventCurrentTarget=this;this.fire(a);if("mousemove"==a.type){if(!this.__mouseOver){this.__mouseOver=!0;var b=g.copy({},a);b.type="mouseover";this.fire(b)}}else"mouseout"==a.type&&(this.__mouseOver=!1);b=this.parent;a._stopped||a._stopPropagationed||!b||("mouseout"==a.type||"touchout"==a.type?b.hitTestPoint(a.stageX,a.stageY,!0)||b._fireMouseEvent(a):b._fireMouseEvent(a))},onUpdate:null,render:function(a,
b){a.draw(this)},toString:function(){return g.viewToString(this)}})}();g.View=f})(window);(function(f){var g=f.Hilo,e=g.Class.create({Extends:g.View,constructor:function(d){d=d||{};this.id=this.id||d.id||g.getUid("Container");e.superclass.constructor.call(this,d);this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(d,b){var c=this.children,a=c.length,e=d.parent;b=0>b?0:b>a?a:b;var h=this.getChildIndex(d);if(h==b)return this;0<=h?(c.splice(h,1),b=b==a?a-1:b):e&&
e.removeChild(d);c.splice(b,0,d);0>h?this._updateChildren(b):this._updateChildren(h<b?h:b,(h<b?b:h)+1);return this},addChild:function(d){for(var b=this.children.length,c=arguments,a=0,e=c.length;a<e;a++)this.addChildAt(c[a],b+a);return this},removeChildAt:function(d){var b=this.children;if(0>d||d>=b.length)return null;var c=b[d];if(c){var a=c.drawable,e=a&&a.domElement;if(e){var h=e.parentNode;h&&h.removeChild(e);a.domElement=null}c.parent=null;c.depth=-1}b.splice(d,1);this._updateChildren(d);return c},
removeChild:function(d){return this.removeChildAt(this.getChildIndex(d))},removeChildById:function(d){for(var b=this.children,c,a=0,e=b.length;a<e;a++)if(c=b[a],c.id===d)return this.removeChildAt(a),c;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(d){var b=this.children;return 0>d||d>=b.length?null:b[d]},getChildById:function(d){for(var b=this.children,c,a=0,e=b.length;a<e;a++)if(c=b[a],c.id===d)return c;return null},getChildIndex:function(d){return this.children.indexOf(d)},
setChildIndex:function(d,b){var c=this.children,a=c.indexOf(d);if(0<=a&&a!=b){var e=c.length;b=0>b?0:b>=e?e-1:b;c.splice(a,1);c.splice(b,0,d);this._updateChildren()}return this},swapChildren:function(d,b){var c=this.children,a=this.getChildIndex(d),e=this.getChildIndex(b);d.depth=e;c[e]=d;b.depth=a;c[a]=b},swapChildrenAt:function(d,b){var c=this.children,a=this.getChildAt(d),e=this.getChildAt(b);a.depth=b;c[b]=a;e.depth=d;c[d]=e},sortChildren:function(d){var b=this.children;if("string"==typeof d){var c=
d;d=function(a,b){return b[c]-a[c]}}b.sort(d);this._updateChildren()},_updateChildren:function(d,b){var c=this.children,a;b=b||c.length;for(var e=d||0;e<b;e++)a=c[e],a.depth=e+1,a.parent=this},contains:function(d){for(;d=d.parent;)if(d===this)return!0;return!1},getViewAtPoint:function(d,b,c,a,e){if(this.clipChildren&&!this.hitTestPoint(d,b,c))return null;for(var h=a?[]:null,g=this.children,f,q,t=g.length-1;0<=t;t--)if(f=g[t],!(!f||!f.visible||0>=f.alpha||e&&!f.pointerEnabled))if(f.children&&f.children.length&&
(!e||f.pointerChildren)&&(q=f.getViewAtPoint(d,b,c,a,e)),q)if(a)q.length&&(h=h.concat(q));else return q;else if(f.hitTestPoint(d,b,c))if(a)h.push(f);else return f;return a&&h.length?h:null},render:function(d,b){e.superclass.render.call(this,d,b);var c=this.children.slice(0),a,k,h;a=0;for(k=c.length;a<k;a++)h=c[a],h.parent===this&&h._render(d,b)}});g.Container=e})(window);(function(f){var g=f.Hilo,e=g.CanvasRenderer,d=g.DOMRenderer,b=g.WebGLRenderer,c=g.Class.create({Extends:g.Container,constructor:function(a){a=a||{};this.id=this.id||a.id||g.getUid("Stage");c.superclass.constructor.call(this,a);this._initRenderer(a);var b=this.width,d=this.height,e=this.updateViewport();a.width||(b=e&&e.width||320);a.height||(d=e&&e.height||480);this.resize(b,d,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(a){var c=a.canvas,h=a.container;a=a.renderType||
"canvas";"string"===typeof c&&(c=g.getElement(c));"string"===typeof h&&(h=g.getElement(h));c?c.getContext||(a="dom"):c=g.createElement("dom"===a?"div":"canvas",{style:{position:"absolute"}});this.canvas=c;h&&h.appendChild(c);c={canvas:c,stage:this};switch(a){case "dom":this.renderer=new d(c);break;case "webgl":b.isSupport()?this.renderer=new b(c):this.renderer=new e(c);break;default:this.renderer=new e(c)}},_render:function(a,b){if((!this.onUpdate||!1!==this.onUpdate(b))&&a.startDraw(this)){var c=
this.width,d=this.height,e=this.scaleX,g=this.scaleY,f=this._height,l=this._scaleX,n=this._scaleY,m=this.canvas,p=m.style;if(this._width!==c||l!==e)this._width=c,this._scaleX=e,m.width=c,p.width=e*c+"px",console.log(e*c+"px");if(f!==d||n!==g)this._height=d,this._scaleY=g,m.height=d,p.height=g*d+"px",console.log(g*d+"px");(c=this.drawable&&this.drawable.domElement)&&!c.parentNode&&(c.style.overflow="hidden",m.appendChild(c));this.render(a,b);a.endDraw(this)}},addTo:function(a){var b=this.canvas;b.parentNode!==
a&&a.appendChild(b);return this},tick:function(a){this.paused||this._render(this.renderer,a)},enableDOMEvent:function(a,b){var c=this,d=c.canvas,e="string"===typeof a?[a]:a;b=!1!==b;for(var g=c._domListener||(c._domListener=function(a){c._onDOMEvent(a)}),f=0;f<e.length;f++)a=e[f],b?d.addEventListener(a,g,!1):d.removeEventListener(a,g);return c},_onDOMEvent:function(a){var b=a.type,c=0==b.indexOf("touch"),d=a;if(c)var e=a.touches,d=a.changedTouches,d=e&&e.length?e[0]:d&&d.length?d[0]:null;var e=d.pageX||
d.clientX,d=d.pageY||d.clientY,f=this.viewport||this.updateViewport();a.stageX=e=(e-f.left)/this.scaleX;a.stageY=d=(d-f.top)/this.scaleY;a.stopPropagation=function(){this._stopPropagationed=!0};var e=this.getViewAtPoint(e,d,!0,!1,!0)||this,d=this.canvas,f=this._eventTarget,t="mouseout"===b;if(f&&(!(f==e||f.contains&&f.contains(e))||t)){if(t="touchmove"===b?"touchout":"mousemove"===b||t||!e?"mouseout":null){var l=g.copy({},a);l.type=t;l.eventTarget=f;f._fireMouseEvent(l)}a.lastEventTarget=f;this._eventTarget=
null}e&&e.pointerEnabled&&"mouseout"!==b&&(a.eventTarget=this._eventTarget=e,e._fireMouseEvent(a));c||(d.style.cursor=e&&e.pointerEnabled&&e.useHandCursor?"pointer":"");g.browser.android&&"touchmove"===b&&a.preventDefault()},updateViewport:function(){var a=this.canvas,b=null;a.parentNode&&(b=this.viewport=g.getElementRect(a));return b},resize:function(a,b,c){if(c||this.width!==a||this.height!==b)this.width=a,this.height=b,this.renderer.resize(a,b),this.updateViewport()}});g.Stage=c})(window);(function(f){var g=f.Hilo,e=g.Drawable,d=g.Class.create({Extends:g.View,constructor:function(b){b=b||{};this.id=this.id||b.id||g.getUid("Bitmap");d.superclass.constructor.call(this,b);this.drawable=new e(b);if(!this.width||!this.height)if(b=this.drawable.rect)this.width=b[2],this.height=b[3]},setImage:function(b,c){this.drawable.init({image:b,rect:c});c&&(this.width=c[2],this.height=c[3]);return this}});g.Bitmap=d})(window);(function(f){var g=f.Hilo,e=g.Drawable,d=g.Class.create({Extends:g.View,constructor:function(b){b=b||{};this.id=this.id||b.id||g.getUid("Sprite");d.superclass.constructor.call(this,b);this._frames=[];this._frameNames={};this.drawable=new e;b.frames&&this.addFrame(b.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(b,c){var a=null!=c?c:this._frames.length;
if(b instanceof Array)for(var d=0,e=b.length;d<e;d++)this.setFrame(b[d],a+d);else this.setFrame(b,a);return this},setFrame:function(b,c){var a=this._frames,d=a.length;c=0>c?0:c>d?d:c;a[c]=b;b.name&&(this._frameNames[b.name]=b);if(0==c&&!this.width||!this.height)this.width=b.rect[2],this.height=b.rect[3];return this},getFrame:function(b){if("number"===typeof b){var c=this._frames;return 0>b||b>=c.length?null:c[b]}return this._frameNames[b]},getFrameIndex:function(b){var c=this._frames,a=c.length,d=
-1;if("number"===typeof b)d=b;else if(b="string"===typeof b?this._frameNames[b]:b)for(var e=0;e<a;e++)if(b===c[e]){d=e;break}return d},play:function(){this.paused=!1;return this},stop:function(){this.paused=!0;return this},"goto":function(b,c){var a=this._frames.length,d=this.getFrameIndex(b);this.currentFrame=0>d?0:d>=a?a-1:d;this.paused=c;this._firstRender=!0;return this},_render:function(b,c){var a=this.currentFrame,e;this._firstRender?(e=a,this._firstRender=!1):e=this._nextFrame(c);e!=a&&(this.currentFrame=
e,(a=this._frames[e].callback)&&a.call(this));if(this.onEnterFrame)this.onEnterFrame(e);this.drawable.init(this._frames[e]);d.superclass._render.call(this,b,c)},_nextFrame:function(b){var c=this._frames,a=c.length,d=this.currentFrame,c=c[d],e=this._frameElapsed;b=0!=d||this.drawable?e+(this.timeBased?b:1):0;e=this._frameElapsed=b<(c.duration||this.interval)?b:0;(c.stop||!this.loop&&d>=a-1)&&this.stop();this.paused||0!=e||(null!=c.next?d=this.getFrameIndex(c.next):d>=a-1?d=0:this.drawable&&d++);return d},
setFrameCallback:function(b,c){if(b=this.getFrame(b))b.callback=c;return this},onEnterFrame:null});g.Sprite=d})(window);(function(f){var g=f.Hilo,e=g.Drawable,d=g.Class.create({Extends:g.View,constructor:function(b){b=b||{};this.id=this.id||b.id||g.getUid("Button");d.superclass.constructor.call(this,b);this.drawable=new e(b);this.setState(d.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(b){this.enabled!=b&&(b?this.setState(d.UP):this.setState(d.DISABLED));return this},setState:function(b){if(this.state!==b){this.state=b;this.pointerEnabled=
this.enabled=b!==d.DISABLED;var c;switch(b){case d.UP:c=this.upState;break;case d.OVER:c=this.overState;break;case d.DOWN:c=this.downState;break;case d.DISABLED:c=this.disabledState}c&&(this.drawable.init(c),g.copy(this,c,!0))}return this},fire:function(b,c){if(this.enabled){switch("string"===typeof b?b:b.type){case "mousedown":case "touchstart":case "touchmove":this.setState(d.DOWN);break;case "mouseover":this.setState(d.OVER);break;case "mouseup":this.overState?this.setState(d.OVER):this.upState&&
this.setState(d.UP);break;case "touchend":case "touchout":case "mouseout":this.setState(d.UP)}return d.superclass.fire.call(this,b,c)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});g.Button=d})(window);(function(f){var g=f.Hilo;f=g.Class;var e=g.View,d=g.createElement("canvas"),b=d&&d.getContext("2d"),c=f.create({Extends:e,constructor:function(a){a=a||{};this.id=this.id||a.id||g.getUid("Text");c.superclass.constructor.call(this,a);a.font||(this.font="12px arial");this._fontHeight=c.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,cacheDirty:!0,cache:function(a){(a||this._cacheDirty||!this._cacheImage)&&
this.updateCache()},updateCache:function(){d.width=this.width;d.height=this.height;this._draw(b);this._cacheImage=new Image;this._cacheImage.src=d.toDataURL();this.drawable=this.drawable||new Drawable;this.drawable.init(this._cacheImage);this.cacheDirty=!1},setCacheDirty:function(a){this._cacheDirty=a},setFont:function(a){this.font!==a&&(this.font=a,this._fontHeight=c.measureFontHeight(a),this.setCacheDirty(!0));return this},render:function(a,b){if("canvas"===a.renderType)this._draw(a.context);else{if("dom"===
a.renderType){var c=this.drawable.domElement,d=c.style;d.font=this.font;d.textAlign=this.textAlign;d.color=this.color;d.width=this.width+"px";d.height=this.height+"px";d.lineHeight=this._fontHeight+this.lineSpacing+"px";c.innerHTML=this.text}else this.cache();a.draw(this)}},_draw:function(a){var b=this.text.toString();if(b){a.font=this.font;a.textAlign=this.textAlign;a.textBaseline="top";var c=b.split(/\r\n|\r|\n|<br(?:[ \/])*>/),d=0,e=0,g=this._fontHeight+this.lineSpacing,f,l,n,b=[];f=0;for(len=
c.length;f<len;f++)if(l=c[f],n=a.measureText(l).width,n<=this.maxWidth)b.push({text:l,y:e}),d<n&&(d=n),e+=g;else{n="";var m=0,p,u,w;u=0;for(wlen=l.length;u<wlen;u++)w=l[u],p=a.measureText(n+w).width,p>this.maxWidth?(b.push({text:n,y:e}),d<m&&(d=m),e+=g,n=w):(m=p,n+=w),u==wlen-1&&(b.push({text:n,y:e}),n!==w&&d<p&&(d=p),e+=g)}this.textWidth=d;this.textHeight=e;this.width||(this.width=d);this.height||(this.height=e);c=0;switch(this.textVAlign){case "middle":c=this.height-this.textHeight>>1;break;case "bottom":c=
this.height-this.textHeight}if(f=this.background)a.fillStyle=f,a.fillRect(0,0,this.width,this.height);this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;for(f=0;f<b.length;f++)l=b[f],this._drawTextLine(a,l.text,c+l.y)}},_drawTextLine:function(a,b,c){var d=0,e=this.width;switch(this.textAlign){case "center":d=e>>1;break;case "right":case "end":d=e}this.outline?a.strokeText(b,d,c):a.fillText(b,d,c)},Statics:{measureFontHeight:function(a){var b=document.documentElement,c=g.createElement("div",
{style:{font:a,position:"absolute"},innerHTML:"M"});b.appendChild(c);a=c.offsetHeight;b.removeChild(c);return a}}});g.Text=c})(window);(function(f){var g=f.Hilo,e=g.Bitmap,d=g.Class.create({Extends:g.Container,constructor:function(b){b=b||{};this.id=this.id||b.id||g.getUid("BitmapText");d.superclass.constructor.call(this,b);if(b=b.text+"")this.text="",this.setText(b);this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(b){b=b.toString();var c=b.length;if(this.text!=b){this.text=b;var a,d,e,f=e=0,g=0;for(a=0;a<c;a++)if(d=b.charAt(a),d=this.glyphs[d])g=e+(0<e?this.letterSpacing:0),this.children[a]?
(e=this.children[a],e.setImage(d.image,d.rect)):(e=this._createBitmap(d),this.addChild(e)),e.x=g,e=g+d.rect[2],f=Math.max(f,d.rect[3]);for(a=this.children.length-1;a>=c;a--)this._releaseBitmap(this.children[a]),this.children[a].removeFromParent();this.width=e;this.height=f;this.setTextAlign();return this}},_createBitmap:function(b){var c;d._pool.length?(c=d._pool.pop(),c.setImage(b.image,b.rect)):c=new e({image:b.image,rect:b.rect});return c},_releaseBitmap:function(b){d._pool.push(b)},setTextAlign:function(b){this.textAlign=
b||this.textAlign;switch(this.textAlign){case "center":this.pivotX=.5*this.width;break;case "right":this.pivotX=this.width;break;default:this.pivotX=0}return this},hasGlyphs:function(b){var c=this.glyphs;if(!c)return!1;b=b.toString();var a=b.length,d;for(d=0;d<a;d++)if(!c[b.charAt(d)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(b,c,a,d){var e=b.toString();a=a||e.length;var f=c.width/a;d=c.height/(d||1);var g={},q=0;for(b=b.length;q<b;q++)charStr=e.charAt(q),g[charStr]={image:c,rect:[q%
a*f,d*Math.floor(q/a),f,d]};return g}}});g.BitmapText=d})(window);(function(f){var g=f.Hilo,e=g.Drawable,d=g.Class.create({Extends:g.View,constructor:function(b){b=b||{};this.id=this.id||b.id||g.getUid("DOMElement");d.superclass.constructor.call(this,b);this.drawable=new e;(this.drawable.domElement=b.element||g.createElement("div")).id=this.id},_render:function(b,c){this.onUpdate&&!1===this.onUpdate(c)||this.visible&&this.render(b,c)},render:function(b,c){var a=b.canvas;if("dom"!=b.renderType){var d=this.depth,e=a.nextSibling,f;if(!this.drawable.domElement.parentNode){for(;e&&
3!=e.nodeType;){f=parseInt(e.style.zIndex)||0;if(0>=f||f>d)break;e=e.nextSibling}a.parentNode.insertBefore(this.drawable.domElement,e);b.setElementStyleByView(this)}}else b.draw(this)}});g.DOMElement=d})(window);(function(f){f=f.Hilo;var g=f.Class,e=function(){function d(b,c){var a={image:b.image,rect:b.rect};c&&(a.name=c.name||null,a.duration=c.duration||0,a.stop=!!c.stop,a.next=c.next||null);return a}return g.create({constructor:function(b){var c;var a=b.frames;if(a){c=[];var e;if(a instanceof Array)for(var f=0,g=a.length;f<g;f++)e=a[f],c[f]={image:b.image,rect:e};else{e=a.frameWidth;for(var g=a.frameHeight,v=b.width/e|0,f=b.height/g|0,a=a.numFrames||v*f,f=0;f<a;f++)c[f]={image:b.image,rect:[f%v*e,(f/v|
0)*g,e,g]}}}else c=null;this._frames=c;var q;c=this._frames;if(b=b.sprites){var a={},t;for(q in b){f=b[q];if("number"===typeof f)e=d(c[f]);else if(f instanceof Array)for(e=[],g=0,v=f.length;g<v;g++){t=f[g];var l;"number"===typeof t?t=d(c[t]):(l=t.rect,"number"===typeof l&&(l=c[t.rect]),t=d(l,t));e[g]=t}else for(e=[],g=f.from;g<=f.to;g++)e[g-f.from]=d(c[g],f[g]);a[q]=e}q=a}else q=null;this._sprites=q},_frames:null,_sprites:null,getFrame:function(b){var c=this._frames;return c&&c[b]},getSprite:function(b){var c=
this._sprites;return c&&c[b]},Statics:{createSpriteFrames:function(b,c,a,d,e,f,g){if("[object Array]"===Object.prototype.toString.call(b)){c=[];for(var q=0,t=b.length;q<t;q++)c=c.concat(this.createSpriteFrames.apply(this,b[q]))}else{if("string"===typeof c){var l=c.split(",");c=[];for(var n=0,m=l.length;n<m;n++)if(t=l[n].split("-"),1==t.length)c.push(parseInt(t[0]));else for(q=parseInt(t[0]),t=parseInt(t[1]);q<=t;q++)c.push(q)}l=Math.floor(a.width/d);for(q=0;q<c.length;q++)n=c[q],c[q]={rect:[n%l*d,
e*Math.floor(n/l),d,e],image:a,duration:g};c[0].name=b;f?c[c.length-1].next=b:c[c.length-1].stop=!0}return c}}})}();f.TextureAtlas=e})(window);
