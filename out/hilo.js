(function(g){g.console=g.console||{log:function(){}};g=Array.prototype;var f=g.slice;g.indexOf=g.indexOf||function(e,d){d=d||0;var b=this.length,a;if(0==b||d>=b)return-1;0>d&&(d=b+d);for(a=d;a<b;a++)if(this[a]===e)return a;return-1};g=Function.prototype;g.bind=g.bind||function(e){function d(){var c=a.concat(f.call(arguments));return b.apply(this instanceof d?this:e,c)}var b=this,a=f.call(arguments,1),c=function(){};c.prototype=b.prototype;d.prototype=new c;return d}})(window);
(function(g){for(var f=0,e=["ms","moz","webkit","o"],d=0;d<e.length&&!g.requestAnimationFrame;++d)g.requestAnimationFrame=g[e[d]+"RequestAnimationFrame"],g.cancelAnimationFrame=g[e[d]+"CancelAnimationFrame"]||g[e[d]+"CancelRequestAnimationFrame"];g.requestAnimationFrame||(g.requestAnimationFrame=function(b,a){var c=(new Date).getTime(),h=Math.max(0,16-(c-f)),t=g.setTimeout(function(){b(c+h)},h);f=c+h;return t});g.cancelAnimationFrame||(g.cancelAnimationFrame=function(b){clearTimeout(b)})})(window);
(function(g){var f=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.toColorRgb=function(){var e=this.toLowerCase();return e&&f.test(e)?4===e.length?{r:parseInt("0x"+e.charAt(1)+e.charAt(1)),g:parseInt("0x"+e.charAt(2)+e.charAt(2)),b:parseInt("0x"+e.charAt(3)+e.charAt(3))}:{r:parseInt("0x"+e.slice(1,3)),g:parseInt("0x"+e.slice(3,5)),b:parseInt("0x"+e.slice(5,7))}:{r:0,g:0,b:0}}})(window);(function(g){var f=function(){var e=document,d=e.documentElement,b=0;return{getUid:function(a){var c=++b;return a?a+"_"+c:c},viewToString:function(a){for(var c;a;)c=c?a.id+"."+c:a.id,a=a.parent;return c},copy:function(a,c,h){for(var b in c)if(!h||a.hasOwnProperty(b)||void 0!==a[b])a[b]=c[b];return a},browser:function(){var a=navigator.userAgent,a={iphone:/iphone/i.test(a),ipad:/ipad/i.test(a),ipod:/ipod/i.test(a),ios:/iphone|ipad|ipod/i.test(a),android:/android/i.test(a),webkit:/webkit/i.test(a),
chrome:/chrome/i.test(a),safari:/safari/i.test(a),firefox:/firefox/i.test(a),ie:/msie/i.test(a),opera:/opera/i.test(a),supportTouch:"ontouchstart"in g,supportCanvas:null!=e.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation"in g,supportDeviceMotion:"ondevicemotion"in g};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),a.supportStorage=!0}catch(c){}a.jsVendor=a.webkit?"webkit":a.firefox?"Moz":a.opera?"O":a.ie?"ms":"";a.cssVendor="-"+a.jsVendor+
"-";return a}(),event:function(){var a="ontouchstart"in g;return{POINTER_START:a?"touchstart":"mousedown",POINTER_MOVE:a?"touchmove":"mousemove",POINTER_END:a?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElement:function(a){return e.getElementById(a)},getElementRect:function(a){try{var c=a.getBoundingClientRect()}catch(b){c={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var h=
(g.pageXOffset||d.scrollLeft)-(d.clientLeft||0)||0,t=(g.pageYOffset||d.scrollTop)-(d.clientTop||0)||0,r=g.getComputedStyle?g.getComputedStyle(a):a.currentStyle,u=parseInt;a=u(r.paddingLeft)+u(r.borderLeftWidth)||0;var p=u(r.paddingTop)+u(r.borderTopWidth)||0,e=u(r.paddingRight)+u(r.borderRightWidth)||0,r=u(r.paddingBottom)+u(r.borderBottomWidth)||0,u=c.top||0,f=c.left||0;return{left:f+h+a,top:u+t+p,width:c.right-e-f-a,height:c.bottom-r-u-p}},createElement:function(a,c){var h=e.createElement(a),b,
r,u;for(b in c)if(r=c[b],"style"===b)for(u in r)h.style[u]=r[u];else h[b]=r;return h},setElementStyleByView:function(a,c){var h=f.browser.jsVendor,b=!1,r=a.parent,u=a.drawable,b=u.domElement,d=b.style,e=a._stateCache||(a._stateCache={});if(!a.width&&!a.height){var g=u.rect;g&&(g[2]||g[3])&&(a.width=g[2],a.height=g[3])}r&&(g=r.drawable&&r.drawable.domElement)&&g!=b.parentNode&&g.appendChild(b);this.cacheStateIfChanged(a,["visible"],e)&&(d.display=a.visible?"":"none");this.cacheStateIfChanged(a,["alpha"],
e)&&(d.opacity=a.alpha);if(a.visible&&!(0>=a.alpha)){this.cacheStateIfChanged(a,["width"],e)&&(d.width=a.width+"px");this.cacheStateIfChanged(a,["height"],e)&&(d.height=a.height+"px");this.cacheStateIfChanged(a,["depth"],e)&&(d.zIndex=a.depth+1);this.cacheStateIfChanged(a,["clipChildren"],e)&&(d.overflow=a.clipChildren?"hidden":null);if(b=this.cacheStateIfChanged(a,["pivotX","pivotY"],e)){var r=a.pivotX,k=a.pivotY;if(g=u.rect){var l=g[2],q=g[3],v=g[4],g=g[5];if(v||g)r-=v-.5*l,k-=g-.5*q}d[h+"TransformOrigin"]=
r+"px "+k+"px"}if(this.cacheStateIfChanged(a,["x","y","rotation","scaleX","scaleY"],e)||b)d[h+"Transform"]="translate("+(a.x-a.pivotX)+"px, "+(a.y-a.pivotY)+"px)rotate("+a.rotation+"deg)scale("+a.scaleX+", "+a.scaleY+")";if(c)d.pointerEvents="none";else if(d.pointerEvents||(d.pointerEvents="none"),this.cacheStateIfChanged(a,["background"],e)&&(d.backgroundColor=a.background),h=u.image)if(h=h.src,h!==e.image&&(e.image=h,d.backgroundImage="url("+h+")"),g=u.rect)u=g[0],h=g[1],u!==e.sx&&(e.sx=u,d.backgroundPositionX=
-u+"px"),h!==e.sy&&(e.sy=h,d.backgroundPositionY=-h+"px")}},cacheStateIfChanged:function(a,c,h){var b,r,u,d,e=!1;b=0;for(r=c.length;b<r;b++)u=c[b],d=a[u],d!=h[u]&&(h[u]=d,e=!0);return e}}}();f.undefined=void 0;g.Hilo=f})(window);(function(g){g=g.Hilo;var f=function(){var e=function(c){var h={},b,e;for(b in c)e=c[b],d.hasOwnProperty(b)?d[b].call(this,e):h[b]=e;a(this.prototype,h)},d={Extends:function(c){var h=this.prototype,d=b(c.prototype);a(this,c);a(d,h);d.constructor=this;this.prototype=d;this.superclass=c.prototype},Mixes:function(c){c instanceof Array||(c=[c]);for(var h=this.prototype,b;b=c.shift();)a(h,b.prototype||b)},Statics:function(c){a(this,c)}},b=function(){if(Object.__proto__)return function(c){return{__proto__:c}};
var c=function(){};return function(h){c.prototype=h;return new c}}(),a=function(c){for(var b=1,a=arguments.length;b<a;b++){var d=arguments[b],e,g;for(g in d){var f=d[g];!f||"object"!==typeof f||void 0===f.value&&"function"!==typeof f.get&&"function"!==typeof f.set?c[g]=f:(e=e||{},e[g]=f)}e&&h(c,e)}return c};try{var c=Object.defineProperty,h=Object.defineProperties;c({},"$",{value:0})}catch(t){"__defineGetter__"in Object&&(c=function(c,h,b){"value"in b&&(c[h]=b.value);"get"in b&&c.__defineGetter__(h,
b.get);"set"in b&&c.__defineSetter__(h,b.set);return c},h=function(h,b){for(var a in b)b.hasOwnProperty(a)&&c(h,a,b[a]);return h})}return{create:function(c){c=c||{};var h=c.hasOwnProperty("constructor")?c.constructor:function(){};e.call(h,c);return h},mix:a}}();g.Class=f})(window);(function(g){var f=g.Hilo,e=f.Class.create({constructor:function(b,a,c){this.type=b;this.target=a;this.detail=c;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}});if(g=g.Event){g=g.prototype;var d=g.stopImmediatePropagation;g.stopImmediatePropagation=function(){d&&d.call(this);this._stopped=!0}}f.Event={_listeners:null,on:function(b,a,c){var h=this._listeners=this._listeners||{};b=h[b]=h[b]||[];for(var h=0,t=b.length;h<t;h++)if(b[h].listener===
a)return;b.push({listener:a,once:c});return this},off:function(b,a){if(0==arguments.length)return this._listeners=null,this;var c=this._listeners&&this._listeners[b];if(c){if(1==arguments.length)return delete this._listeners[b],this;for(var h=0,t=c.length;h<t;h++)if(c[h].listener===a){c.splice(h,1);0===c.length&&delete this._listeners[b];break}}return this},fire:function(b,a){var c,h;"string"===typeof b?h=b:(c=b,h=b.type);var t=this._listeners;if(!t)return!1;var r=t[h];if(r){r=r.slice(0);c=c||new e(h,
this,a);if(c._stopped)return!1;for(var d=0;d<r.length;d++){var p=r[d];p.listener.call(this,c);p.once&&r.splice(d--,1)}0==r.length&&delete t[h];return!0}return!1}}})(window);(function(g){g=g.Hilo;var f=g.Class.create({constructor:function(e,d,b,a,c,h){this.a=e;this.b=d;this.c=b;this.d=a;this.tx=c;this.ty=h},concat:function(e){var d=arguments,b=this.a,a=this.b,c=this.c,h=this.d,t=this.tx,r=this.ty;if(6<=d.length)var u=d[0],p=d[1],g=d[2],f=d[3],k=d[4],d=d[5];else u=e.a,p=e.b,g=e.c,f=e.d,k=e.tx,d=e.ty;this.a=b*u+a*g;this.b=b*p+a*f;this.c=c*u+h*g;this.d=c*p+h*f;this.tx=t*u+r*g+k;this.ty=t*p+r*f+d;return this},rotate:function(e){var d=Math.sin(e);e=Math.cos(e);var b=this.a,
a=this.b,c=this.c,h=this.d,t=this.tx,r=this.ty;this.a=b*e-a*d;this.b=b*d+a*e;this.c=c*e-h*d;this.d=c*d+h*e;this.tx=t*e-r*d;this.ty=t*d+r*e;return this},scale:function(e,d){this.a*=e;this.d*=d;this.c*=e;this.b*=d;this.tx*=e;this.ty*=d;return this},translate:function(e,d){this.tx+=e;this.ty+=d;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var e=this.a,d=this.b,b=this.c,a=this.d,c=this.tx,h=e*a-d*b;this.a=a/h;this.b=-d/h;this.c=-b/h;this.d=
e/h;this.tx=(b*this.ty-a*c)/h;this.ty=-(e*this.ty-d*c)/h;return this},transformPoint:function(e,d,b){var a=e.x*this.a+e.y*this.c+this.tx,c=e.x*this.b+e.y*this.d+this.ty;d&&(a=a+.5>>0,c=c+.5>>0);if(b)return{x:a,y:c};e.x=a;e.y=c;return e}});g.Matrix=f})(window);(function(g){var f=g.Hilo,e=f.Class.create({constructor:function(d){this._targetFPS=d||30;this._interval=1E3/this._targetFPS;this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(d){if(!this._intervalId){this._lastTime=+new Date;var b=this,a=this._interval,c=g.requestAnimationFrame||g[f.browser.jsVendor+"RequestAnimationFrame"];if(d&&c)var h=function(){b._tick()},t=function(){b._intervalId=setTimeout(t,
a);c(h)};else t=function(){b._intervalId=setTimeout(t,a);b._tick()};t()}},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var d=+new Date,b=d-this._lastTime,a=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1E3/(this._tickTime/this._tickCount)+.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=d-this._lastTime;this._lastTime=d;for(var d=
0,c=a.length;d<c;d++)a[d].tick(b)}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(d){if(!d||"function"!=typeof d.tick)throw Error("Ticker: The tick object must implement the tick method.");this._tickers.push(d)},removeTick:function(d){var b=this._tickers;d=b.indexOf(d);0<=d&&b.splice(d,1)}});f.Ticker=e})(window);(function(g){var f=g.Hilo,e=f.Class.create({constructor:function(d){this.init(d)},image:null,rect:null,domElement:null,init:function(d){var b=this,a=b.image;e.isDrawable(d)?b.image=d:f.copy(b,d,!0);d=b.image;if("string"===typeof d)if(a&&d===a.getAttribute("src"))d=b.image=a;else{b.image=null;var c=new Image;c.onload=function(){c.onload=null;b.init(c)};c.src=d;return}d&&!b.rect&&(b.rect=[0,0,d.width,d.height])},Statics:{isDrawable:function(d){if(!d||!d.tagName)return!1;d=d.tagName.toLowerCase();return"img"===
d||"canvas"===d||"video"===d}}});f.Drawable=e})(window);(function(g){var f=g.Hilo,e=f.Class.create({load:function(d){var b=d.src,a="jsonp"==d.type;if(a){var c=d.callbackName||"callback",h=d.callback||"jsonp"+ ++e._count;g[h]||(g[h]=function(c){delete g[h]})}a&&(b+=(-1==b.indexOf("?")?"?":"&")+c+"="+h);d.noCache&&(b+=(-1==b.indexOf("?")?"?":"&")+"t="+ +new Date);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.onload=this.onLoad.bind(this);a.onerror=this.onError.bind(this);a.src=b;d.id&&(a.id=d.id);document.getElementsByTagName("head")[0].appendChild(a)},
onLoad:function(d){d=d.target;d.onload=d.onerror=null;return d},onError:function(d){var b=d.target;b.onload=b.onerror=null;return d},Statics:{_count:0}});f.ScriptLoader=e})(window);(function(g){var f=g.Hilo,e=f.Class.create({load:function(d){var b=this,a=new Image;d.crossOrigin&&(a.crossOrigin=d.crossOrigin);a.onload=function(){b.onLoad(a)};a.onerror=a.onabort=b.onError.bind(a);a.src=d.src+(d.noCache?(-1==d.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(d){d=d||g.event;d.onload=d.onerror=d.onabort=null;return d},onError:function(d){var b=d.target;b.onload=b.onerror=b.onabort=null;return d}});f.ImageLoader=e})(window);(function(g){g=g.Hilo;var f=g.ImageLoader,e=g.ScriptLoader,d=g.Class.create({Mixes:g.Event,constructor:function(b){this._source=[];this.add(b)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(b){b&&(b=b instanceof Array?b:[b],this._source=this._source.concat(b));return this},get:function(b){if(b)for(var a=this._source,c=0;c<a.length;c++){var h=a[c];if(h.id===b||h.src===b)return h}return null},getContent:function(b){return(b=this.get(b))&&b.content},start:function(){this._loadNext();
return this},_loadNext:function(){var b=this,a=b._source,c=a.length;if(b._loaded>=c)b.fire("complete");else if(b._currentIndex<c-1&&b._connections<b.maxConnections){var h=++b._currentIndex,a=a[h],t=b._getLoader(a);if(t){var r=t.onLoad,d=t.onError;t.onLoad=function(c){t.onLoad=r;t.onError=d;c=r&&r.call(t,c)||c.target;b._onItemLoad(h,c)};t.onError=function(c){t.onLoad=r;(t.onError=d)&&d.call(t,c);b._onItemError(h,c)};b._connections++}b._loadNext();t&&t.load(a)}},_getLoader:function(b){var a=b.loader;
if(a)return a;var c;if(!(c=b.type)){var h;if(b=b.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i))h=b[1].toLowerCase();c=h||null}switch(c){case "png":case "jpg":case "jpeg":case "gif":a=new f;break;case "js":case "jsonp":a=new e}return a},_onItemLoad:function(b,a){var c=this._source[b];c.loaded=!0;c.content=a;this._connections--;this._loaded++;this.fire("load",c);this._loadNext()},_onItemError:function(b,a){var c=this._source[b];c.error=a;this._connections--;this._loaded++;this.fire("error",c);this._loadNext()},
getSize:function(b){for(var a=0,c=this._source,h=0;h<c.length;h++)var t=c[h],a=a+((b?t.loaded&&t.size:t.size)||0);return a},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});g.LoadQueue=d})(window);(function(g){var f=g.Hilo;g=f.Class.create({Mixes:f.Event,constructor:function(e){f.copy(this,e,!0);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element)try{var e=this._element=new Audio;e.addEventListener("canplaythrough",this._onAudioEvent,!1);e.addEventListener("ended",this._onAudioEvent,!1);e.addEventListener("error",this._onAudioEvent,!1);e.src=this.src;e.volume=this.volume;
e.load()}catch(d){e=this._element={},e.play=e.pause=function(){}}return this},_onAudioEvent:function(e){var d=e.type;switch(d){case "canplaythrough":e.target.removeEventListener(d,this._onAudioEvent);this.loaded=!0;this.duration=this._element.duration;this.fire("load");this.autoPlay&&this._doPlay();break;case "ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case "error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),
this.playing=!0)},play:function(){this.playing&&this.stop();this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._element.pause(),this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1);return this},setVolume:function(e){this.volume!=e&&(this.volume=e,this._element.volume=e);return this},setMute:function(e){this.muted!=
e&&(this.muted=e,this._element.volume=e?0:this.volume);return this},Statics:{isSupported:null!==g.Audio}});f.HTMLAudio=g})(window);(function(g){var f=g.Hilo,e=f.Class,d=f.Event,b=function(){var b=g.AudioContext||g.webkitAudioContext,c=b?new b:null;return e.create({Mixes:d,constructor:function(c){f.copy(this,c,!0);this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=c;this._gainNode=c.createGain?c.createGain():c.createGainNode();this._gainNode.connect(c.destination);this._onAudioEvent=
this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var c=new XMLHttpRequest;c.src=this.src;c.open("GET",this.src,!0);c.responseType="arraybuffer";c.onload=this._onAudioEvent;c.onprogress=this._onAudioEvent;c.onerror=this._onAudioEvent;c.send();this._buffer=!0}return this},_onAudioEvent:function(c){switch(c.type){case "load":c=c.target;c.onload=c.onprogress=c.onerror=null;this._context.decodeAudioData(c.response,
this._onDecodeComplete,this._onDecodeError);break;case "ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case "progress":this.fire(c);break;case "error":this.fire(c)}},_onDecodeComplete:function(c){this._buffer=c;this.loaded=!0;this.duration=c.duration;this.fire("load");this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var c=this._context.createBufferSource();c.start||(c.start=c.noteOn,c.stop=c.noteOff);c.buffer=
this._buffer;c.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;c.connect(this._gainNode);c.start(0,this._offset);this._audioNode=c;this._startTime=this._context.currentTime;this.playing=!0},_clearAudioNode:function(){var c=this._audioNode;c&&(c.onended=null,c.disconnect(0),this._audioNode=null)},play:function(){this.playing&&this.stop();this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._audioNode.stop(0),
this._offset+=this._context.currentTime-this._startTime,this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1);return this},setVolume:function(c){this.volume!=c&&(this.volume=c,this._gainNode.gain.value=c);return this},setMute:function(c){this.muted!=c&&(this.muted=c,this._gainNode.gain.value=c?0:this.volume);return this},Statics:{isSupported:null!=
b,enabled:!1,enable:function(){if(!this.enabled&&c){var h=c.createBufferSource();h.buffer=c.createBuffer(1,1,22050);h.connect(c.destination);h.start?h.start(0,0,0):h.noteOn(0,0,0);return this.enabled=!0}return this.enabled}}})}();f.WebAudio=b})(window);(function(g){var f=g.Hilo,e=f.HTMLAudio,d=f.WebAudio;f.WebSound={_audios:{},enableAudio:function(){d.isSupported&&d.enable()},getAudio:function(b){b=this._normalizeSource(b);var a=this._audios[b.src];a||(d.isSupported?a=new d(b):e.isSupported&&(a=new e(b)),this._audios[b.src]=a);return a},removeAudio:function(b){b="string"===typeof b?b:b.src;var a=this._audios[b];a&&(a.stop(),a.off(),this._audios[b]=null,delete this._audios[b])},_normalizeSource:function(b){var a={};"string"===typeof b?a={src:b}:
f.copy(a,b);return a}}})(window);(function(g){var f=g.Hilo;g=f.Class.create({constructor:function(e){e=e||{};f.copy(this,e,!0)},renderType:null,canvas:null,stage:null,startDraw:function(e){return!0},draw:function(e){},endDraw:function(e){},transform:function(){},clear:function(e,d,b,a){},resize:function(e,d){}});f.Renderer=g})(window);(function(g){var f=g.Hilo,e=f.Class,d=f.Renderer,b=f.Drawable,a=function(){return e.create({Extends:d,constructor:function(c){a.superclass.constructor.call(this,c)},renderType:"dom",startDraw:function(c){var h=c.drawable=c.drawable||new b;h.domElement=h.domElement||f.createElement("div",{style:{position:"absolute"}});return c.visible},draw:function(c){f.setElementStyleByView(c)},resize:function(c,h){var b=this.canvas.style;b.width=c+"px";b.height=h+"px";"absolute"!=b.position&&(b.position="relative")}})}();
f.DOMRenderer=a})(window);(function(g){g=g.Hilo;var f=g.Matrix,e=Math.PI/180,d=g.Class.create({Extends:g.Renderer,Statics:{MAX_BATCH_NUM:2E3,ATTRIBUTE_NUM:5,isSupport:null},renderType:"webgl",gl:null,constructor:function(c){d.superclass.constructor.call(this,c);c=this.gl=this.canvas.getContext("webgl",{stencil:!0})||this.canvas.getContext("experimental-webgl",{stencil:!0});c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA);c.enable(c.BLEND);c.disable(c.CULL_FACE);c.disable(c.DEPTH_TEST);c.disable(c.STENCIL_TEST);this._initShaders();
this.vertex2=new Float32Array(8);this.indexs2=new Uint16Array([0,1,2,1,2,3]);this.notextureShader.active();c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indexs2,c.STATIC_DRAW);c.bufferData(c.ARRAY_BUFFER,this.vertex2,c.STREAM_DRAW);this.maxBatchNum=d.MAX_BATCH_NUM;this.positionStride=4*d.ATTRIBUTE_NUM;var h=6*this.maxBatchNum;this.vertex=new Float32Array(this.maxBatchNum*d.ATTRIBUTE_NUM*4);this.indexs=new Uint16Array(h);for(var b=0,a=0;b<h;b+=6,a+=4)this.indexs[b+0]=a+0,this.indexs[b+1]=a+1,this.indexs[b+
2]=a+2,this.indexs[b+3]=a+1,this.indexs[b+4]=a+2,this.indexs[b+5]=a+3;this.batchIndex=0;this.sprites=[];this.defaultShader.active();c.bufferData(c.ELEMENT_ARRAY_BUFFER,this.indexs,c.STATIC_DRAW);c.bufferData(c.ARRAY_BUFFER,this.vertex,c.STREAM_DRAW)},context:null,startDraw:function(c){return c.visible&&0<c.alpha?(c===this.stage&&this.clear(),c.__webglWorldMatrix=c.__webglWorldMatrix||new f(1,0,0,1,0,0),c.__webglRenderAlpha=c.__webglRenderAlpha||1,!0):!1},draw:function(c){var h=c.drawable,b=h&&h.image,
h=h&&h.rect,a=c.background,d=c.width,e=c.height;!h||d||e||(c.width=h[2],c.height=h[3]);(this.batchIndex>=this.maxBatchNum||a)&&this._renderBatches();c.clipChildren&&(this.stencilLevel=this.stencilLevel||0,d=this.gl,0===this.stencilLevel?(d.enable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),d.stencilFunc(d.ALWAYS,1,255),d.stencilOp(d.KEEP,d.REPLACE,d.REPLACE)):d.stencilOp(d.KEEP,d.INCR,d.INCR),d.colorMask(!1,!1,!1,!1),this.notextureShader.active(),this._renderBackground(c,{r:1,g:1,b:1}),this.stencilLevel+=
1,d.colorMask(!0,!0,!0,!0),d.stencilFunc(d.LEQUAL,this.stencilLevel,255),d.stencilOp(d.KEEP,d.KEEP,d.KEEP));a&&(this.notextureShader.active(),this._renderBackground(c,a.toColorRgb()));b&&(this.defaultShader.active(),this._renderImage(c,b,h))},endDraw:function(c){c===this.stage&&this._renderBatches();c.clipChildren&&(c=this.gl,--this.stencilLevel,c.stencilFunc(c.LEQUAL,this.stencilLevel,255),0==this.stencilLevel&&(this._renderBatches(),c.disable(this.gl.STENCIL_TEST)))},transform:function(c){this._setConcatenatedMatrix(c,
c.parent);0<c.alpha&&(c.__webglRenderAlpha=c.parent&&c.parent.__webglRenderAlpha?c.alpha*c.parent.__webglRenderAlpha:c.alpha)},clear:function(c,h,b,a){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(c,h){if(this.width!==c||this.height!==h)this.width=this.canvas.width=c,this.height=this.canvas.height=h,this.gl.viewport(0,0,c,h),this.activeShader.active(!0)},_renderBackground:function(c,h){var b=this.gl,a=c.__webglRenderAlpha;b.uniform4f(this.activeShader.u_color,h.r/255*a,h.g/255*a,h.b/255*
a,a);var d=c.width,e=c.height,a=-c.pivotX,g=c.pivotY-e,f=this.vertex2;f[0]=a;f[1]=g;f[2]=a+d;f[3]=g;f[4]=a;f[5]=g+e;f[6]=a+d;f[7]=g+e;d=c.__webglWorldMatrix;for(e=0;4>e;e++)a=f[2*e],g=f[2*e+1],f[2*e]=d.a*a+d.c*g+d.tx,f[2*e+1]=d.b*a+d.d*g+d.ty;b.bufferData(b.ARRAY_BUFFER,f,b.STREAM_DRAW);b.drawElements(b.TRIANGLES,6,b.UNSIGNED_SHORT,0)},_renderImage:function(c,h,b){h.texture||this.activeShader.uploadTexture(h);var a=b[2],d=b[3],e=b[4],f=b[5],g=c.width,k=c.height,l=-c.pivotX,q=-c.pivotY;if(e||f)l=l+
e-.5*a,q=q+f-.5*d;d=this._createVertexs(h,b[0],b[1],a,d,l,q,g,k);b=this.batchIndex*this.positionStride;a=this.vertex;e=c.__webglRenderAlpha;a[b+0]=d[0];a[b+1]=d[1];a[b+2]=d[2];a[b+3]=d[3];a[b+4]=e;a[b+5]=d[4];a[b+6]=d[5];a[b+7]=d[6];a[b+8]=d[7];a[b+9]=e;a[b+10]=d[8];a[b+11]=d[9];a[b+12]=d[10];a[b+13]=d[11];a[b+14]=e;a[b+15]=d[12];a[b+16]=d[13];a[b+17]=d[14];a[b+18]=d[15];a[b+19]=e;d=c.__webglWorldMatrix;for(e=0;4>e;e++)f=a[b+5*e],g=a[b+5*e+1],a[b+5*e]=d.a*f+d.c*g+d.tx,a[b+5*e+1]=d.b*f+d.d*g+d.ty;
c.texture=h.texture;this.sprites[this.batchIndex++]=c},_renderBatches:function(){var c=this.gl;c.bufferSubData(c.ARRAY_BUFFER,0,this.vertex.subarray(0,this.batchIndex*this.positionStride));for(var c=0,b=null,a=0;a<this.batchIndex;a++){var d=this.sprites[a];b&&b!==d.texture&&(this._renderBatch(c,a),c=a);b=d.texture}this._renderBatch(c,this.batchIndex);this.batchIndex=0},_renderBatch:function(c,b){var a=this.gl,d=b-c;0<d&&(a.bindTexture(a.TEXTURE_2D,this.sprites[c].texture),a.drawElements(a.TRIANGLES,
6*d,a.UNSIGNED_SHORT,12*c))},_initShaders:function(){this.defaultShader=new a(this,{v:"attribute vec2 a_position;\nattribute vec2 a_TexCoord;\nattribute float a_alpha;\nuniform mat3 u_projectionTransform;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n    v_TexCoord = a_TexCoord;\n    v_alpha = a_alpha;\n}\n",f:"\nprecision mediump float;\nuniform sampler2D u_Sampler;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_alpha;\n}\n"},
{attributes:[{name:"a_position",count:2,offset:0,stride:20},{name:"a_TexCoord",count:2,offset:8,stride:20},{name:"a_alpha",count:1,offset:16,stride:20}],uniforms:["u_projectionTransform","u_Sampler"]});this.notextureShader=new a(this,{v:"attribute vec2 a_position;\nuniform mat3 u_projectionTransform;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n}\n",f:"\nprecision mediump float;\nuniform vec4 u_color;\nvoid main(){\n    gl_FragColor = u_color;\n}\n"},
{attributes:[{name:"a_position",count:2,offset:0,stride:8}],uniforms:["u_projectionTransform","u_color"]})},_createVertexs:function(c,b,a,d,e,f,g,m,k){var l=this.__tempVertexs||[],q=c.width;c=c.height;d/=q;e/=c;b/=q;a/=c;1<d+b&&(d=1-b);1<e+a&&(e=1-a);a=1-a-e;g=-k-g;q=0;l[q++]=f;l[q++]=g;l[q++]=b;l[q++]=a;l[q++]=f+m;l[q++]=g;l[q++]=b+d;l[q++]=a;l[q++]=f;l[q++]=g+k;l[q++]=b;l[q++]=a+e;l[q++]=f+m;l[q++]=g+k;l[q++]=b+d;l[q++]=a+e;return l},_setConcatenatedMatrix:function(c,b){var a=c.__webglWorldMatrix,
d=1,f=0,g=360-c.rotation%360,n=c.scaleX,m=c.scaleY;g&&(f=g*e,d=Math.cos(f),f=Math.sin(f));a.a=d*n;a.b=f*n;a.c=-f*m;a.d=d*m;a.tx=c.x;a.ty=-c.y;d=b.__webglWorldMatrix;a.concat(d.a,d.b,d.c,d.d,d.tx,d.ty)}}),b={},a=function(c,b,a){this.renderer=c;this.gl=c.gl;this.program=this._createProgram(this.gl,b.v,b.f);a=a||{};this.attributes=a.attributes||[];this.uniforms=a.uniforms||[];this.vertexBuffer=this.gl.createBuffer();this.indexBuffer=this.gl.createBuffer()};a.prototype={active:function(c){var b=this,
a=b.renderer,d=a.activeShader;if(d!==b||c){var e=b.gl,f=b.program;f&&e&&(d&&d.attributes.forEach(function(c){e.disableVertexAttribArray(d[c.name])}),a.activeShader=b,e.useProgram(f),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,b.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,b.vertexBuffer),b.attributes.forEach(function(c){attribute=c.name;b[attribute]=b[attribute]||e.getAttribLocation(f,attribute);e.enableVertexAttribArray(b[attribute]);e.vertexAttribPointer(b[attribute],c.count,e.FLOAT,!1,c.stride,c.offset)}),
b.uniforms.forEach(function(c){b[c]=b[c]||e.getUniformLocation(f,c)}),b.width!==a.width||b.height!==a.height)&&(b.width=a.width,b.height=a.height,b.uploadProjectionTransform(!0))}},uploadTexture:function(c){var a=this.gl;if(b[c.src])c.texture=b[c.src];else{var d=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,d);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,1);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,c);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.uniform1i(this.u_Sampler,0);a.bindTexture(a.TEXTURE_2D,null);c.texture=d;b[c.src]=d}},uploadProjectionTransform:function(c){var a=this.gl;if(!this._projectionTransformElements||c)this._projectionTransformElements=new Float32Array([2/this.width,0,0,0,2/this.height,0,-1,1,1]);a.uniformMatrix3fv(this.u_projectionTransform,
!1,this._projectionTransformElements)},_createProgram:function(c,a,b){a=this._createShader(c,c.VERTEX_SHADER,a);var d=this._createShader(c,c.FRAGMENT_SHADER,b);if(!a||!d)return null;if(b=c.createProgram())if(c.attachShader(b,a),c.attachShader(b,d),c.linkProgram(b),c.deleteShader(d),c.deleteShader(a),!c.getProgramParameter(b,c.LINK_STATUS))return a=c.getProgramInfoLog(b),console.log("Failed to link program: "+a),c.deleteProgram(b),null;return b},_createShader:function(c,a,b){if(a=c.createShader(a))if(c.shaderSource(a,
b),c.compileShader(a),!c.getShaderParameter(a,c.COMPILE_STATUS))return b=c.getShaderInfoLog(a),console.log("Failed to compile shader: "+b),c.deleteShader(a),null;return a}};d.isSupport=function(){if(void 0===this._isSupport){var c=document.createElement("canvas");c.getContext&&(c.getContext("webgl")||c.getContext("experimental-webgl"))?this._isSupport=!0:this._isSupport=!1}return this._isSupport};g.WebGLRenderer=d})(window);(function(g){g=g.Hilo;var f=g.Class.create({Extends:g.Renderer,constructor:function(e){f.superclass.constructor.call(this,e);this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(e){return e.visible&&0<e.alpha?(e===this.stage&&this.clear(0,0,e.width,e.height),this.context.save(),!0):!1},draw:function(e){var d=this.context,b=e.width,a=e.height;e.clipChildren&&(d.beginPath(),d.rect(0,0,b,a),d.clip());var c=e.background;c&&(d.fillStyle=c,d.fillRect(0,0,b,a));
var h=e.drawable;if(c=h&&h.image){var h=h.rect,t=h[2],f=h[3],g=h[4],p=h[5];b||a||(b=e.width=t,a=e.height=f);(g||p)&&d.translate(g-.5*t,p-.5*f);d.drawImage(c,h[0],h[1],t,f,0,0,b,a)}},endDraw:function(e){this.context.restore()},transform:function(e){var d=this.context,b=e.x,a=e.y,c=e.scaleX,h=e.scaleY,t=e.pivotX,f=e.pivotY,g=e.rotation%360,p=e.align;if(p)if("function"===typeof p)e.align();else{var n=e.parent;if(n){var m=e.width,k=e.height,l=n.width,n=n.height;switch(p){case "TL":a=b=0;break;case "T":b=
l-m>>1;a=0;break;case "TR":b=l-m;a=0;break;case "L":b=0;a=n-k>>1;break;case "C":b=l-m>>1;a=n-k>>1;break;case "R":b=l-m;a=n-k>>1;break;case "BL":b=0;a=n-k;break;case "B":b=l-m>>1;a=n-k;break;case "BR":b=l-m,a=n-k}}}0==b&&0==a||d.translate(b,a);0!=g&&d.rotate(g*Math.PI/180);1==c&&1==h||d.scale(c,h);0==t&&0==f||d.translate(-t,-f);0<e.alpha&&(d.globalAlpha*=e.alpha)},clear:function(e,d,b,a){this.context.clearRect(e,d,b,a)},resize:function(e,d){this.canvas.width=e;this.canvas.height=d}});g.CanvasRenderer=
f})(window);(function(g){var f=g.Hilo,e=f.Class,d=f.Event,b=f.Matrix;g=function(){function a(c,a,b){for(var d=c.length,e=a.length,f,g,m,k,l,q,v=0,w=f=0;w<d;w++){f=c[w];g=c[w<d-1?w+1:0];v=f.y-g.y;f=g.x-f.x;g=Math.sqrt(v*v+f*f);v/=g;f/=g;g=m=c[0].x*v+c[0].y*f;for(var x=1;x<d;x++)q=c[x].x*v+c[x].y*f,q>m?m=q:q<g&&(g=q);k=l=a[0].x*v+a[0].y*f;for(x=1;x<e;x++)q=a[x].x*v+a[x].y*f,q>l?l=q:q<k&&(k=q);g<k?(g=k-m,v=-v,f=-f):g-=l;if(0<=g)return!1;g>b.overlap&&(b.overlap=g,b.normal.x=v,b.normal.y=f)}return b}return e.create({Mixes:d,
constructor:function(c){c=c||{};this.id=this.id||c.id||f.getUid("View");f.copy(this,c,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var c=this,a;a=c.parent;)c=a;return c.canvas?c:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(c,a){"number"===
typeof a?c.addChildAt(this,a):c.addChild(this);return this},removeFromParent:function(){var c=this.parent;c&&c.removeChild(this);return this},getBounds:function(){for(var c=this.width,a=this.height,b=this.getConcatenatedMatrix(),c=this.boundsArea||[{x:0,y:0},{x:c,y:0},{x:c,y:a},{x:0,y:a}],a=[],d,e,f,g,m,k,l,q=0,v=c.length;q<v;q++)d=b.transformPoint(c[q],!0,!0),e=d.x,f=d.y,0==q?(g=m=e,k=l=f):(g>e?g=e:m<e&&(m=e),k>f?k=f:l<f&&(l=f)),a[q]=d;a.x=g;a.y=k;a.width=m-g;a.height=l-k;return a},getConcatenatedMatrix:function(c){for(var a=
new b(1,0,0,1,0,0),d=this;d!=c&&d.parent;d=d.parent){var e=1,f=0,g=d.rotation%360,n=d.pivotX,m=d.pivotY,k=d.scaleX,l=d.scaleY;g&&(f=g*Math.PI/180,e=Math.cos(f),f=Math.sin(f));0!=n&&(a.tx-=n);0!=m&&(a.ty-=m);a.concat(e*k,f*k,-f*l,e*l,d.x,d.y)}return a},hitTestPoint:function(c,a,b){var d=this.getBounds(),e=c>=d.x&&c<=d.x+d.width&&a>=d.y&&a<=d.y+d.height;if(e&&b){b=0;for(var e=!1,f,g,m,k,l=0,q=d.length;l<q;l++){var v=d[l],w=d[(l+1)%q];if(v.y==w.y&&a==v.y&&(v.x>w.x?(f=w.x,g=v.x):(f=v.x,g=w.x),c>=f&&c<=
g)){e=!0;continue}v.y>w.y?(m=w.y,k=v.y):(m=v.y,k=w.y);if(!(a<m||a>k)){var x=(a-v.y)*(w.x-v.x)/(w.y-v.y)+v.x;x>c?b++:x==c&&(e=!0);v.x>c&&v.y==a&&(v=d[(q+l-1)%q],(v.y<a&&w.y>a||v.y>a&&w.y<a)&&b++)}}e=e||1==b%2}return e},hitTestObject:function(c,b){var d=this.getBounds(),e=c.getBounds(),f=d.x<=e.x+e.width&&e.x<=d.x+d.width&&d.y<=e.y+e.height&&e.y<=d.y+d.height;f&&b&&(f=(f=a(d,e,{overlap:-Infinity,normal:{x:0,y:0}}))?a(e,d,f):!1);return!!f},_render:function(c,a){this.onUpdate&&!1===this.onUpdate(a)||
!c.startDraw(this)||(c.transform(this),this.render(c,a),c.endDraw(this))},_fireMouseEvent:function(c){c.eventCurrentTarget=this;this.fire(c);if("mousemove"==c.type){if(!this.__mouseOver){this.__mouseOver=!0;var a=f.copy({},c);a.type="mouseover";this.fire(a)}}else"mouseout"==c.type&&(this.__mouseOver=!1);a=this.parent;c._stopped||c._stopPropagationed||!a||("mouseout"==c.type||"touchout"==c.type?a.hitTestPoint(c.stageX,c.stageY,!0)||a._fireMouseEvent(c):a._fireMouseEvent(c))},onUpdate:null,render:function(c,
a){c.draw(this)},toString:function(){return f.viewToString(this)}})}();f.View=g})(window);(function(g){var f=g.Hilo,e=f.Drawable,d=f.Class.create({Extends:f.View,constructor:function(b){b=b||{};this.id=this.id||b.id||f.getUid("Container");d.superclass.constructor.call(this,b);this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(b,a){var c=this.children,d=c.length,e=b.parent;a=0>a?0:a>d?d:a;var f=this.getChildIndex(b);if(f==a)return this;0<=f?(c.splice(f,1),a=a==
d?d-1:a):e&&e.removeChild(b);c.splice(a,0,b);0>f?this._updateChildren(a):this._updateChildren(f<a?f:a,(f<a?a:f)+1);b.drawable&&b.drawable.domElement&&this.setDOMContainer(!0);return this},addChild:function(b){for(var a=this.children.length,c=arguments,d=0,e=c.length;d<e;d++)this.addChildAt(c[d],a+d);return this},removeChildAt:function(b){var a=this.children;if(0>b||b>=a.length)return null;var c=a[b];if(c){var d=c.drawable,e=d&&d.domElement;if(e){var f=e.parentNode;f&&f.removeChild(e);d.domElement=
null;this.setDOMContainer(!1)}c.parent=null;c.depth=-1}a.splice(b,1);this._updateChildren(b);return c},removeChild:function(b){return this.removeChildAt(this.getChildIndex(b))},removeChildById:function(b){for(var a=this.children,c,d=0,e=a.length;d<e;d++)if(c=a[d],c.id===b)return this.removeChildAt(d),c;return null},removeAllChildren:function(){for(;this.children.length;)this.removeChildAt(0);return this},getChildAt:function(b){var a=this.children;return 0>b||b>=a.length?null:a[b]},getChildById:function(b){for(var a=
this.children,c,d=0,e=a.length;d<e;d++)if(c=a[d],c.id===b)return c;return null},getChildIndex:function(b){return this.children.indexOf(b)},setChildIndex:function(b,a){var c=this.children,d=c.indexOf(b);if(0<=d&&d!=a){var e=c.length;a=0>a?0:a>=e?e-1:a;c.splice(d,1);c.splice(a,0,b);this._updateChildren()}return this},swapChildren:function(b,a){var c=this.children,d=this.getChildIndex(b),e=this.getChildIndex(a);b.depth=e;c[e]=b;a.depth=d;c[d]=a},swapChildrenAt:function(b,a){var c=this.children,d=this.getChildAt(b),
e=this.getChildAt(a);d.depth=a;c[a]=d;e.depth=b;c[b]=e},sortChildren:function(b){var a=this.children;if("string"==typeof b){var c=b;b=function(a,b){return b[c]-a[c]}}a.sort(b);this._updateChildren()},_updateChildren:function(b,a){var c=this.children,d;a=a||c.length;for(var e=b||0;e<a;e++)d=c[e],d.depth=e+1,d.parent=this},contains:function(b){for(;b=b.parent;)if(b===this)return!0;return!1},getViewAtPoint:function(b,a,c,d,e){if(this.clipChildren&&!this.hitTestPoint(b,a,c))return null;for(var f=d?[]:
null,g=this.children,p,n,m=g.length-1;0<=m;m--)if(p=g[m],!(!p||!p.visible||0>=p.alpha||e&&!p.pointerEnabled))if(p.children&&p.children.length&&(!e||p.pointerChildren)&&(n=p.getViewAtPoint(b,a,c,d,e)),n)if(d)n.length&&(f=f.concat(n));else return n;else if(p.hitTestPoint(b,a,c))if(d)f.push(p);else return p;return d&&f.length?f:null},render:function(b,a){d.superclass.render.call(this,b,a);"dom"!=b.renderType&&this.drawable&&this.drawable.domElement&&f.setElementStyleByView(this,!0);var c=this.children.slice(0),
e,g,r;e=0;for(g=c.length;e<g;e++)r=c[e],r.parent===this&&r._render(b,a)},setDOMContainer:function(b){var a=this.parent,c=this.drawable,d=c&&c.domElement;if(b)c=this.drawable=this.drawable||new e,c.domElement=c.domElement||f.createElement("div",{style:{position:"absolute"}}),a&&a.setDOMContainer(!0);else{b=!1;i=0;for(len=children.length;i<len;i++)if(child=children[i],child.drawable&&child.drawable.domElement){b=!0;break}b||(d&&d&&((b=d.parentNode)&&b.removeChild(d),this.drawable=c.domElement=null),
a&&a.setDOMContainer(!1))}}});f.Container=d})(window);(function(g){var f=g.Hilo,e=f.CanvasRenderer,d=f.DOMRenderer,b=f.WebGLRenderer,a=f.Class.create({Extends:f.Container,constructor:function(c){c=c||{};this.id=this.id||c.id||f.getUid("Stage");a.superclass.constructor.call(this,c);this._initRenderer(c);var b=this.width,d=this.height,e=this.updateViewport();c.width||(b=e&&e.width||320);c.height||(d=e&&e.height||480);this.resize(b,d,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(c){var a=c.canvas,g=c.container;c=c.renderType||
"canvas";"string"===typeof a&&(a=f.getElement(a));"string"===typeof g&&(g=f.getElement(g));a||(a=f.createElement("dom"===c?"div":"canvas",{style:{position:"absolute",overflow:"hidden"}}));this.canvas=a;g&&g.appendChild(a);a={canvas:a,stage:this};switch(c){case "dom":this.renderer=new d(a);break;case "webgl":b.isSupport()?this.renderer=new b(a):this.renderer=new e(a);break;default:this.renderer=new e(a)}},_render:function(c,a){if((!this.onUpdate||!1!==this.onUpdate(a))&&c.startDraw(this)){var b=this.width,
d=this.height,e=this.scaleX,f=this.scaleY,g=this._height,m=this._scaleX,k=this._scaleY,l=this.canvas,q=l.style;if(this._width!==b||m!==e)this._width=b,this._scaleX=e,l.width=b,q.width=e*b+"px";if(g!==d||k!==f)this._height=d,this._scaleY=f,l.height=d,q.height=f*d+"px";(b=this.drawable&&this.drawable.domElement)&&!b.parentNode&&(b.style.overflow="hidden",l.appendChild(b));this.render(c,a);c.endDraw(this)}},addTo:function(c){var a=this.canvas;a.parentNode!==c&&c.appendChild(a);return this},tick:function(c){this.paused||
this._render(this.renderer,c)},enableDOMEvent:function(c,a){var b=this,d=b.canvas,e="string"===typeof c?[c]:c;a=!1!==a;for(var f=b._domListener||(b._domListener=function(c){b._onDOMEvent(c)}),g=0;g<e.length;g++)c=e[g],a?d.addEventListener(c,f,!1):d.removeEventListener(c,f);return b},_onDOMEvent:function(c){var a=c.type,b=0==a.indexOf("touch"),d=c;if(b)var e=c.touches,d=c.changedTouches,d=e&&e.length?e[0]:d&&d.length?d[0]:null;var e=d.pageX||d.clientX,d=d.pageY||d.clientY,g=this.viewport||this.updateViewport();
c.stageX=e=(e-g.left)/this.scaleX;c.stageY=d=(d-g.top)/this.scaleY;c.stopPropagation=function(){this._stopPropagationed=!0};var e=this.getViewAtPoint(e,d,!0,!1,!0)||this,d=this.canvas,g=this._eventTarget,n="mouseout"===a;if(g&&(!(g==e||g.contains&&g.contains(e))||n)){if(n="touchmove"===a?"touchout":"mousemove"===a||n||!e?"mouseout":null){var m=f.copy({},c);m.type=n;m.eventTarget=g;g._fireMouseEvent(m)}c.lastEventTarget=g;this._eventTarget=null}e&&e.pointerEnabled&&"mouseout"!==a&&(c.eventTarget=this._eventTarget=
e,e._fireMouseEvent(c));b||(d.style.cursor=e&&e.pointerEnabled&&e.useHandCursor?"pointer":"");f.browser.android&&"touchmove"===a&&c.preventDefault()},updateViewport:function(){var a=this.canvas,b=null;a.parentNode&&(b=this.viewport=f.getElementRect(a));return b},resize:function(a,b,d){if(d||this.width!==a||this.height!==b)this.width=a,this.height=b,this.renderer.resize(a,b),this.updateViewport()},setDOMContainer:function(c){a.superclass.setDOMContainer.call(this,c);c&&(c=this.drawable&&this.drawable.domElement)&&
!c.parentNode&&this.canvas.parentNode&&this.canvas.parentNode.appendChild(c)}});f.Stage=a})(window);(function(g){var f=g.Hilo,e=f.Drawable,d=f.Class.create({Extends:f.View,constructor:function(b){b=b||{};this.id=this.id||b.id||f.getUid("Bitmap");d.superclass.constructor.call(this,b);this.drawable=new e(b);if(!this.width||!this.height)if(b=this.drawable.rect)this.width=b[2],this.height=b[3]},setImage:function(b,a){this.drawable.init({image:b,rect:a});a&&(this.width=a[2],this.height=a[3]);return this}});f.Bitmap=d})(window);(function(g){var f=g.Hilo,e=f.Drawable,d=f.Class.create({Extends:f.View,constructor:function(b){b=b||{};this.id=this.id||b.id||f.getUid("Sprite");d.superclass.constructor.call(this,b);this._frames=[];this._frameNames={};this.drawable=new e;b.frames&&this.addFrame(b.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(b,a){var c=null!=a?a:this._frames.length;
if(b instanceof Array)for(var d=0,e=b.length;d<e;d++)this.setFrame(b[d],c+d);else this.setFrame(b,c);return this},setFrame:function(b,a){var c=this._frames,d=c.length;a=0>a?0:a>d?d:a;c[a]=b;b.name&&(this._frameNames[b.name]=b);if(0==a&&!this.width||!this.height)this.width=b.rect[2],this.height=b.rect[3];return this},getFrame:function(b){if("number"===typeof b){var a=this._frames;return 0>b||b>=a.length?null:a[b]}return this._frameNames[b]},getFrameIndex:function(b){var a=this._frames,c=a.length,d=
-1;if("number"===typeof b)d=b;else if(b="string"===typeof b?this._frameNames[b]:b)for(var e=0;e<c;e++)if(b===a[e]){d=e;break}return d},play:function(){this.paused=!1;return this},stop:function(){this.paused=!0;return this},"goto":function(b,a){var c=this._frames.length,d=this.getFrameIndex(b);this.currentFrame=0>d?0:d>=c?c-1:d;this.paused=a;this._firstRender=!0;return this},_render:function(b,a){var c=this.currentFrame,e;this._firstRender?(e=c,this._firstRender=!1):e=this._nextFrame(a);e!=c&&(this.currentFrame=
e,(c=this._frames[e].callback)&&c.call(this));if(this.onEnterFrame)this.onEnterFrame(e);this.drawable.init(this._frames[e]);d.superclass._render.call(this,b,a)},_nextFrame:function(b){var a=this._frames,c=a.length,d=this.currentFrame,a=a[d],e=this._frameElapsed;b=0!=d||this.drawable?e+(this.timeBased?b:1):0;e=this._frameElapsed=b<(a.duration||this.interval)?b:0;(a.stop||!this.loop&&d>=c-1)&&this.stop();this.paused||0!=e||(null!=a.next?d=this.getFrameIndex(a.next):d>=c-1?d=0:this.drawable&&d++);return d},
setFrameCallback:function(b,a){if(b=this.getFrame(b))b.callback=a;return this},onEnterFrame:null});f.Sprite=d})(window);(function(g){var f=g.Hilo,e=f.Drawable,d=f.Class.create({Extends:f.View,constructor:function(b){b=b||{};this.id=this.id||b.id||f.getUid("Button");d.superclass.constructor.call(this,b);this.drawable=new e(b);this.setState(d.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(b){this.enabled!=b&&(b?this.setState(d.UP):this.setState(d.DISABLED));return this},setState:function(b){if(this.state!==b){this.state=b;this.pointerEnabled=
this.enabled=b!==d.DISABLED;var a;switch(b){case d.UP:a=this.upState;break;case d.OVER:a=this.overState;break;case d.DOWN:a=this.downState;break;case d.DISABLED:a=this.disabledState}a&&(this.drawable.init(a),f.copy(this,a,!0))}return this},fire:function(b,a){if(this.enabled){switch("string"===typeof b?b:b.type){case "mousedown":case "touchstart":case "touchmove":this.setState(d.DOWN);break;case "mouseover":this.setState(d.OVER);break;case "mouseup":this.overState?this.setState(d.OVER):this.upState&&
this.setState(d.UP);break;case "touchend":case "touchout":case "mouseout":this.setState(d.UP)}return d.superclass.fire.call(this,b,a)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});f.Button=d})(window);(function(g){var f=g.Hilo;g=f.Class;var e=f.View,d=f.createElement("canvas"),b=d&&d.getContext("2d"),a=g.create({Extends:e,constructor:function(c){c=c||{};this.id=this.id||c.id||f.getUid("Text");a.superclass.constructor.call(this,c);c.font||(this.font="12px arial");this._fontHeight=a.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,cacheDirty:!0,cache:function(a){(a||this._cacheDirty||!this._cacheImage)&&
this.updateCache()},updateCache:function(){d.width=this.width;d.height=this.height;this._draw(b);this._cacheImage=new Image;this._cacheImage.src=d.toDataURL();this.drawable=this.drawable||new Drawable;this.drawable.init(this._cacheImage);this.cacheDirty=!1},setCacheDirty:function(a){this._cacheDirty=a},setFont:function(c){this.font!==c&&(this.font=c,this._fontHeight=a.measureFontHeight(c),this.setCacheDirty(!0));return this},render:function(a,b){if("canvas"===a.renderType)this._draw(a.context);else{if("dom"===
a.renderType){var d=this.drawable.domElement,e=d.style;e.font=this.font;e.textAlign=this.textAlign;e.color=this.color;e.width=this.width+"px";e.height=this.height+"px";e.lineHeight=this._fontHeight+this.lineSpacing+"px";d.innerHTML=this.text}else this.cache();a.draw(this)}},_draw:function(a){var b=this.text.toString();if(b){a.font=this.font;a.textAlign=this.textAlign;a.textBaseline="top";var d=b.split(/\r\n|\r|\n|<br(?:[ \/])*>/),e=0,f=0,g=this._fontHeight+this.lineSpacing,n,m,k,b=[];n=0;for(len=
d.length;n<len;n++)if(m=d[n],k=a.measureText(m).width,k<=this.maxWidth)b.push({text:m,y:f}),e<k&&(e=k),f+=g;else{k="";var l=0,q,v,w;v=0;for(wlen=m.length;v<wlen;v++)w=m[v],q=a.measureText(k+w).width,q>this.maxWidth?(b.push({text:k,y:f}),e<l&&(e=l),f+=g,k=w):(l=q,k+=w),v==wlen-1&&(b.push({text:k,y:f}),k!==w&&e<q&&(e=q),f+=g)}this.textWidth=e;this.textHeight=f;this.width||(this.width=e);this.height||(this.height=f);d=0;switch(this.textVAlign){case "middle":d=this.height-this.textHeight>>1;break;case "bottom":d=
this.height-this.textHeight}if(n=this.background)a.fillStyle=n,a.fillRect(0,0,this.width,this.height);this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;for(n=0;n<b.length;n++)m=b[n],this._drawTextLine(a,m.text,d+m.y)}},_drawTextLine:function(a,b,d){var e=0,f=this.width;switch(this.textAlign){case "center":e=f>>1;break;case "right":case "end":e=f}this.outline?a.strokeText(b,e,d):a.fillText(b,e,d)},Statics:{measureFontHeight:function(a){var b=document.documentElement,d=f.createElement("div",
{style:{font:a,position:"absolute"},innerHTML:"M"});b.appendChild(d);a=d.offsetHeight;b.removeChild(d);return a}}});f.Text=a})(window);(function(g){var f=g.Hilo,e=f.Bitmap,d=f.Class.create({Extends:f.Container,constructor:function(b){b=b||{};this.id=this.id||b.id||f.getUid("BitmapText");d.superclass.constructor.call(this,b);if(b=b.text+"")this.text="",this.setText(b);this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(b){b=b.toString();var a=b.length;if(this.text!=b){this.text=b;var c,d,e,f=e=0,g=0;for(c=0;c<a;c++)if(d=b.charAt(c),d=this.glyphs[d])g=e+(0<e?this.letterSpacing:0),this.children[c]?
(e=this.children[c],e.setImage(d.image,d.rect)):(e=this._createBitmap(d),this.addChild(e)),e.x=g,e=g+d.rect[2],f=Math.max(f,d.rect[3]);for(c=this.children.length-1;c>=a;c--)this._releaseBitmap(this.children[c]),this.children[c].removeFromParent();this.width=e;this.height=f;this.setTextAlign();return this}},_createBitmap:function(b){var a;d._pool.length?(a=d._pool.pop(),a.setImage(b.image,b.rect)):a=new e({image:b.image,rect:b.rect});return a},_releaseBitmap:function(b){d._pool.push(b)},setTextAlign:function(b){this.textAlign=
b||this.textAlign;switch(this.textAlign){case "center":this.pivotX=.5*this.width;break;case "right":this.pivotX=this.width;break;default:this.pivotX=0}return this},hasGlyphs:function(b){var a=this.glyphs;if(!a)return!1;b=b.toString();var c=b.length,d;for(d=0;d<c;d++)if(!a[b.charAt(d)])return!1;return!0},Statics:{_pool:[],createGlyphs:function(b,a,c,d){var e=b.toString();c=c||e.length;var f=a.width/c;d=a.height/(d||1);var g={},p=0;for(b=b.length;p<b;p++)charStr=e.charAt(p),g[charStr]={image:a,rect:[p%
c*f,d*Math.floor(p/c),f,d]};return g}}});f.BitmapText=d})(window);(function(g){var f=g.Hilo,e=f.Drawable,d=f.Class.create({Extends:f.View,constructor:function(b){b=b||{};this.id=this.id||b.id||f.getUid("DOMElement");d.superclass.constructor.call(this,b);this.drawable=new e;(this.drawable.domElement=b.element||f.createElement("div",{style:{position:"absolute"}})).id=this.id},_render:function(b,a){this.onUpdate&&!1===this.onUpdate(a)||this.visible&&this.render(b,a)},render:function(b,a){"dom"!=b.renderType?f.setElementStyleByView(this):b.draw(this)}});f.DOMElement=
d})(window);(function(g){g=g.Hilo;var f=g.Class,e=function(){function d(b,a){var c={image:b.image,rect:b.rect};a&&(c.name=a.name||null,c.duration=a.duration||0,c.stop=!!a.stop,c.next=a.next||null);return c}return f.create({constructor:function(b){var a;var c=b.frames;if(c){a=[];var e;if(c instanceof Array)for(var f=0,g=c.length;f<g;f++)e=c[f],a[f]={image:b.image,rect:e};else{e=c.frameWidth;for(var g=c.frameHeight,u=b.width/e|0,f=b.height/g|0,c=c.numFrames||u*f,f=0;f<c;f++)a[f]={image:b.image,rect:[f%u*e,(f/u|
0)*g,e,g]}}}else a=null;this._frames=a;var p;a=this._frames;if(b=b.sprites){var c={},n;for(p in b){f=b[p];if("number"===typeof f)e=d(a[f]);else if(f instanceof Array)for(e=[],g=0,u=f.length;g<u;g++){n=f[g];var m;"number"===typeof n?n=d(a[n]):(m=n.rect,"number"===typeof m&&(m=a[n.rect]),n=d(m,n));e[g]=n}else for(e=[],g=f.from;g<=f.to;g++)e[g-f.from]=d(a[g],f[g]);c[p]=e}p=c}else p=null;this._sprites=p},_frames:null,_sprites:null,getFrame:function(b){var a=this._frames;return a&&a[b]},getSprite:function(b){var a=
this._sprites;return a&&a[b]},Statics:{createSpriteFrames:function(b,a,c,d,e,f,g){if("[object Array]"===Object.prototype.toString.call(b)){a=[];for(var p=0,n=b.length;p<n;p++)a=a.concat(this.createSpriteFrames.apply(this,b[p]))}else{if("string"===typeof a){var m=a.split(",");a=[];for(var k=0,l=m.length;k<l;k++)if(n=m[k].split("-"),1==n.length)a.push(parseInt(n[0]));else for(p=parseInt(n[0]),n=parseInt(n[1]);p<=n;p++)a.push(p)}m=Math.floor(c.width/d);for(p=0;p<a.length;p++)k=a[p],a[p]={rect:[k%m*d,
e*Math.floor(k/m),d,e],image:c,duration:g};a[0].name=b;f?a[a.length-1].next=b:a[a.length-1].stop=!0}return a}}})}();g.TextureAtlas=e})(window);
