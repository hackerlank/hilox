(function(b){b.console=b.console||{log:function(){}};b=Array.prototype;var a=b.slice;b.indexOf=b.indexOf||function(g,h){h=h||0;var j=this.length,f;if(0==j||h>=j){return -1}0>h&&(h=j+h);for(f=h;f<j;f++){if(this[f]===g){return f}}return -1};b=Function.prototype;b.bind=b.bind||function(h){function j(){var c=f.concat(a.call(arguments));return k.apply(this instanceof j?this:h,c)}var k=this,f=a.call(arguments,1),g=function(){};g.prototype=k.prototype;j.prototype=new g;return j}})(window);(function(b){for(var a=0,c=["ms","moz","webkit","o"],h=0;h<c.length&&!b.requestAnimationFrame;++h){b.requestAnimationFrame=b[c[h]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[c[h]+"CancelAnimationFrame"]||b[c[h]+"CancelRequestAnimationFrame"]}b.requestAnimationFrame||(b.requestAnimationFrame=function(j,d){var f=(new Date).getTime(),g=Math.max(0,16-(f-a)),e=b.setTimeout(function(){j(f+g)},g);a=f+g;return e});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(d){clearTimeout(d)})})(window);(function(b){var a=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.toColorRgb=function(){var c=this.toLowerCase();return c&&a.test(c)?4===c.length?{r:parseInt("0x"+c.charAt(1)+c.charAt(1)),g:parseInt("0x"+c.charAt(2)+c.charAt(2)),b:parseInt("0x"+c.charAt(3)+c.charAt(3))}:{r:parseInt("0x"+c.slice(1,3)),g:parseInt("0x"+c.slice(3,5)),b:parseInt("0x"+c.slice(5,7))}:{r:0,g:0,b:0}}})(window);(function(b){var a=function(){var f=document,g=f.documentElement,h=0;return{getUid:function(c){var d=++h;return c?c+"_"+d:d},copy:function(c,e,j){for(var d in e){if(!j||c.hasOwnProperty(d)||void 0!==c[d]){c[d]=e[d]}}return c},browser:function(){var c=navigator.userAgent,c={iphone:/iphone/i.test(c),ipad:/ipad/i.test(c),ipod:/ipod/i.test(c),ios:/iphone|ipad|ipod/i.test(c),android:/android/i.test(c),webkit:/webkit/i.test(c),chrome:/chrome/i.test(c),safari:/safari/i.test(c),firefox:/firefox/i.test(c),ie:/msie/i.test(c),opera:/opera/i.test(c),supportTouch:"ontouchstart" in b,supportCanvas:null!=f.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation" in b,supportDeviceMotion:"ondevicemotion" in b};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),c.supportStorage=!0}catch(d){}c.jsVendor=c.webkit?"webkit":c.firefox?"Moz":c.opera?"O":c.ie?"ms":"";c.cssVendor="-"+c.jsVendor+"-";return c}(),event:function(){var c="ontouchstart" in b;return{POINTER_START:c?"touchstart":"mousedown",POINTER_MOVE:c?"touchmove":"mousemove",POINTER_END:c?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElement:function(c){return f.getElementById(c)},getElementRect:function(q){try{var s=q.getBoundingClientRect()}catch(p){s={top:q.offsetTop,left:q.offsetLeft,width:q.offsetWidth,height:q.offsetHeight}}var n=(b.pageXOffset||g.scrollLeft)-(g.clientLeft||0)||0,j=(b.pageYOffset||g.scrollTop)-(g.clientTop||0)||0,u=b.getComputedStyle?b.getComputedStyle(q):q.currentStyle,d=parseInt;q=d(u.paddingLeft)+d(u.borderLeftWidth)||0;var t=d(u.paddingTop)+d(u.borderTopWidth)||0,o=d(u.paddingRight)+d(u.borderRightWidth)||0,u=d(u.paddingBottom)+d(u.borderBottomWidth)||0,d=s.top||0,m=s.left||0;return{left:m+n+q,top:d+j+t,width:s.right-o-m-q,height:s.bottom-u-d-t}},createElement:function(c,e){var k=f.createElement(c),d,j,m;for(d in e){if(j=e[d],"style"===d){for(m in j){k.style[m]=j[m]}}else{k[d]=j}}return k}}}();b.Hilo=a})(window);(function(b){b=b.Hilo;var a=function(){var m=function(d){var e={},l,p;for(l in d){p=d[l],n.hasOwnProperty(l)?n[l].call(this,p):e[l]=p}f(this.prototype,e)},n={Extends:function(c){var d=this.prototype,e=o(c.prototype);f(this,c);f(e,d);e.constructor=this;this.prototype=e;this.superclass=c.prototype},Mixes:function(c){c instanceof Array||(c=[c]);for(var d=this.prototype,e;e=c.shift();){f(d,e.prototype||e)}},Statics:function(c){f(this,c)}},o=function(){if(Object.__proto__){return function(d){return{__proto__:d}}}var c=function(){};return function(d){c.prototype=d;return new c}}(),f=function(l){for(var p=1,h=arguments.length;p<h;p++){var t=arguments[p],s,r;for(r in t){var q=t[r];!q||"object"!==typeof q||void 0===q.value&&"function"!==typeof q.get&&"function"!==typeof q.set?l[r]=q:(s=s||{},s[r]=q)}s&&k(l,s)}return l};try{var j=Object.defineProperty,k=Object.defineProperties;j({},"$",{value:0})}catch(g){"__defineGetter__" in Object&&(j=function(d,e,c){"value" in c&&(d[e]=c.value);"get" in c&&d.__defineGetter__(e,c.get);"set" in c&&d.__defineSetter__(e,c.set);return d},k=function(e,d){for(var c in d){d.hasOwnProperty(c)&&j(e,c,d[c])}return e})}return{create:function(c){c=c||{};var d=c.hasOwnProperty("constructor")?c.constructor:function(){};m.call(d,c);return d},mix:f}}();b.Class=a})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(f,d,e){this.type=f;this.target=d;this.detail=e;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}});if(b=b.Event){b=b.prototype;var h=b.stopImmediatePropagation;b.stopImmediatePropagation=function(){h&&h.call(this);this._stopped=!0}}a.Event={_listeners:null,on:function(j,d,f){var g=this._listeners=this._listeners||{};j=g[j]=g[j]||[];for(var g=0,e=j.length;g<e;g++){if(j[g].listener===d){return}}j.push({listener:d,once:f});return this},off:function(j,d){if(0==arguments.length){return this._listeners=null,this}var f=this._listeners&&this._listeners[j];if(f){if(1==arguments.length){return delete this._listeners[j],this}for(var g=0,e=f.length;g<e;g++){if(f[g].listener===d){f.splice(g,1);0===f.length&&delete this._listeners[j];break}}}return this},fire:function(o,e){var g,k;"string"===typeof o?k=o:(g=o,k=o.type);var f=this._listeners;if(!f){return !1}var j=f[k];if(j){j=j.slice(0);g=g||new c(k,this,e);if(g._stopped){return !1}for(var m=0;m<j.length;m++){var n=j[m];n.listener.call(this,g);n.once&&j.splice(m--,1)}0==j.length&&delete f[k];return !0}return !1}}})(window);(function(b){b=b.Hilo;var a=b.Class.create({constructor:function(k,l,m,f,g,j){this.a=k;this.b=l;this.c=m;this.d=f;this.tx=g;this.ty=j},concat:function(p){var q=arguments,s=this.a,u=this.b,x=this.c,n=this.d,j=this.tx,z=this.ty;if(6<=q.length){var f=q[0],y=q[1],A=q[2],m=q[3],o=q[4],q=q[5]}else{f=p.a,y=p.b,A=p.c,m=p.d,o=p.tx,q=p.ty}this.a=s*f+u*A;this.b=s*y+u*m;this.c=x*f+n*A;this.d=x*y+n*m;this.tx=j*f+z*A+o;this.ty=j*y+z*m+q;return this},rotate:function(n){var o=Math.sin(n);n=Math.cos(n);var p=this.a,f=this.b,j=this.c,m=this.d,g=this.tx,k=this.ty;this.a=p*n-f*o;this.b=p*o+f*n;this.c=j*n-m*o;this.d=j*o+m*n;this.tx=g*n-k*o;this.ty=g*o+k*n;return this},scale:function(c,f){this.a*=c;this.d*=f;this.c*=c;this.b*=f;this.tx*=c;this.ty*=f;return this},translate:function(c,f){this.tx+=c;this.ty+=f;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var k=this.a,l=this.b,m=this.c,f=this.d,g=this.tx,j=k*f-l*m;this.a=f/j;this.b=-l/j;this.c=-m/j;this.d=k/j;this.tx=(m*this.ty-f*g)/j;this.ty=-(k*this.ty-l*g)/j;return this},transformPoint:function(h,j,k){var f=h.x*this.a+h.y*this.c+this.tx,g=h.x*this.b+h.y*this.d+this.ty;j&&(f=f+0.5>>0,g=g+0.5>>0);if(k){return{x:f,y:g}}h.x=f;h.y=g;return h}});b.Matrix=a})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(e){this._targetFPS=e||30;this._interval=1000/this._targetFPS;this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(k){if(!this._intervalId){this._lastTime=+new Date;var m=this,e=this._interval,g=b.requestAnimationFrame||b[a.browser.jsVendor+"RequestAnimationFrame"];if(k&&g){var j=function(){m._tick()},f=function(){m._intervalId=setTimeout(f,e);g(j)}}else{f=function(){m._intervalId=setTimeout(f,e);m._tick()}}f()}},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var g=+new Date,h=g-this._lastTime,e=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1000/(this._tickTime/this._tickCount)+0.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=g-this._lastTime;this._lastTime=g;for(var g=0,f=e.length;g<f;g++){e[g].tick(h)}}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(e){if(!e||"function"!=typeof e.tick){throw Error("Ticker: The tick object must implement the tick method.")}this._tickers.push(e)},removeTick:function(e){var f=this._tickers;e=f.indexOf(e);0<=e&&f.splice(e,1)}});a.Ticker=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(e){this.init(e)},image:null,rect:null,split:null,domElement:null,init:function(g){var h=this,e=h.image;c.isDrawable(g)?h.image=g:a.copy(h,g,!0);g=h.image;if("string"===typeof g){if(e&&g===e.getAttribute("src")){g=h.image=e}else{h.image=null;var f=new Image;f.onload=function(){f.onload=null;h.init(f)};f.src=g;return}}g&&!h.rect&&(h.rect=[0,0,g.width,g.height])},Statics:{isDrawable:function(e){if(!e||!e.tagName){return !1}e=e.tagName.toLowerCase();return"img"===e||"canvas"===e||"video"===e}}});a.Drawable=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({load:function(k){var m=this,e=k.src,g="jsonp"==k.type;if(g){var j=k.callbackName||"callback",f=k.callback||"jsonp"+ ++c._count;b[f]||(b[f]=function(d){delete b[f]})}g&&(e+=(-1==e.indexOf("?")?"?":"&")+j+"="+f);k.noCache&&(e+=(-1==e.indexOf("?")?"?":"&")+"t="+ +new Date);g=document.createElement("script");g.type="text/javascript";g.async=!0;g.onload=function(d){m.onLoad(d)};g.onerror=function(d){m.onError(d)};g.src=e;k.id&&(g.id=k.id);document.getElementsByTagName("head")[0].appendChild(g)},onLoad:function(e){e=e.target;e.onload=e.onerror=null;return e},onError:function(e){var f=e.target;f.onload=f.onerror=null;return e},Statics:{_count:0}});a.ScriptLoader=c})(window);(function(b){b=b.Hilo;var a=b.Class.create({load:function(f){var g=this,h=new Image;f.crossOrigin&&(h.crossOrigin=f.crossOrigin);h.onload=function(c){g.onLoad(c)};h.onerror=h.onabort=function(c){g.onError(c)};h.src=f.src+(f.noCache?(-1==f.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(c){c=c.target;c.onload=c.onerror=c.onabort=null;return c},onError:function(c){var f=c.target;f.onload=f.onerror=f.onabort=null;return c}});b.ImageLoader=a})(window);(function(b){b=b.Hilo;var a=b.ImageLoader,c=b.ScriptLoader,h=b.Class.create({Mixes:b.Event,constructor:function(d){this._source=[];this.add(d)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(d){d&&(d=d instanceof Array?d:[d],this._source=this._source.concat(d));return this},get:function(g){if(g){for(var d=this._source,e=0;e<d.length;e++){var f=d[e];if(f.id===g||f.src===g){return f}}}return null},getContent:function(d){return(d=this.get(d))&&d.content},start:function(){this._loadNext();return this},_loadNext:function(){var m=this,d=m._source,f=d.length;if(m._loaded>=f){m.fire("complete")}else{if(m._currentIndex<f-1&&m._connections<m.maxConnections){var j=++m._currentIndex,d=d[j],e=m._getLoader(d);if(e){var g=e.onLoad,k=e.onError;e.onLoad=function(l){e.onLoad=g;e.onError=k;l=g&&g.call(e,l)||l.target;m._onItemLoad(j,l)};e.onError=function(l){e.onLoad=g;(e.onError=k)&&k.call(e,l);m._onItemError(j,l)};m._connections++}m._loadNext();e&&e.load(d)}}},_getLoader:function(g){var d=g.loader;if(d){return d}var e;if(!(e=g.type)){var f;if(g=g.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i)){f=g[1].toLowerCase()}e=f||null}switch(e){case"png":case"jpg":case"jpeg":case"gif":d=new a;break;case"js":case"jsonp":d=new c}return d},_onItemLoad:function(f,d){var e=this._source[f];e.loaded=!0;e.content=d;this._connections--;this._loaded++;this.fire("load",e);this._loadNext()},_onItemError:function(f,d){var e=this._source[f];e.error=d;this._connections--;this._loaded++;this.fire("error",e);this._loadNext()},getSize:function(j){for(var d=0,f=this._source,g=0;g<f.length;g++){var e=f[g],d=d+((j?e.loaded&&e.size:e.size)||0)}return d},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});b.LoadQueue=h})(window);(function(b){var a=b.Hilo;b=a.Class.create({Mixes:a.Event,constructor:function(c){a.copy(this,c,!0);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element){try{var c=this._element=new Audio;c.addEventListener("canplaythrough",this._onAudioEvent,!1);c.addEventListener("ended",this._onAudioEvent,!1);c.addEventListener("error",this._onAudioEvent,!1);c.src=this.src;c.volume=this.volume;c.load()}catch(f){c=this._element={},c.play=c.pause=function(){}}}return this},_onAudioEvent:function(c){var f=c.type;switch(f){case"canplaythrough":c.target.removeEventListener(f,this._onAudioEvent);this.loaded=!0;this.duration=this._element.duration;this.fire("load");this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){this.playing&&this.stop();this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._element.pause(),this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1);return this},setVolume:function(c){this.volume!=c&&(this.volume=c,this._element.volume=c);return this},setMute:function(c){this.muted!=c&&(this.muted=c,this._element.volume=c?0:this.volume);return this},Statics:{isSupported:null!==b.Audio}});a.HTMLAudio=b})(window);(function(b){var a=b.Hilo,h=a.Class,j=a.Event,k=function(){var c=b.AudioContext||b.webkitAudioContext,d=c?new c:null;return h.create({Mixes:j,constructor:function(e){a.copy(this,e,!0);this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=d;this._gainNode=d.createGain?d.createGain():d.createGainNode();this._gainNode.connect(d.destination);this._onAudioEvent=this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var e=new XMLHttpRequest;e.src=this.src;e.open("GET",this.src,!0);e.responseType="arraybuffer";e.onload=this._onAudioEvent;e.onprogress=this._onAudioEvent;e.onerror=this._onAudioEvent;e.send();this._buffer=!0}return this},_onAudioEvent:function(e){switch(e.type){case"load":e=e.target;e.onload=e.onprogress=e.onerror=null;this._context.decodeAudioData(e.response,this._onDecodeComplete,this._onDecodeError);break;case"ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case"progress":this.fire(e);break;case"error":this.fire(e)}},_onDecodeComplete:function(e){this._buffer=e;this.loaded=!0;this.duration=e.duration;this.fire("load");this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var e=this._context.createBufferSource();e.start||(e.start=e.noteOn,e.stop=e.noteOff);e.buffer=this._buffer;e.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;e.connect(this._gainNode);e.start(0,this._offset);this._audioNode=e;this._startTime=this._context.currentTime;this.playing=!0},_clearAudioNode:function(){var e=this._audioNode;e&&(e.onended=null,e.disconnect(0),this._audioNode=null)},play:function(){this.playing&&this.stop();this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1);return this},setVolume:function(e){this.volume!=e&&(this.volume=e,this._gainNode.gain.value=e);return this},setMute:function(e){this.muted!=e&&(this.muted=e,this._gainNode.gain.value=e?0:this.volume);return this},Statics:{isSupported:null!=c,enabled:!1,enable:function(){if(!this.enabled&&d){var e=d.createBufferSource();e.buffer=d.createBuffer(1,1,22050);e.connect(d.destination);e.start?e.start(0,0,0):e.noteOn(0,0,0);return this.enabled=!0}return this.enabled}}})}();a.WebAudio=k})(window);(function(b){var a=b.Hilo,c=a.HTMLAudio,h=a.WebAudio;a.WebSound={_audios:{},enableAudio:function(){h.isSupported&&h.enable()},getAudio:function(e){e=this._normalizeSource(e);var d=this._audios[e.src];d||(h.isSupported?d=new h(e):c.isSupported&&(d=new c(e)),this._audios[e.src]=d);return d},removeAudio:function(e){e="string"===typeof e?e:e.src;var d=this._audios[e];d&&(d.stop(),d.off(),this._audios[e]=null,delete this._audios[e])},_normalizeSource:function(e){var d={};"string"===typeof e?d={src:e}:a.copy(d,e);return d}}})(window);(function(b){var a=b.Hilo;b=a.Class.create({constructor:function(c){c=c||{};a.copy(this,c,!0)},renderType:null,canvas:null,stage:null,startDraw:function(c){return !0},draw:function(c){},endDraw:function(c){},transform:function(){},clear:function(g,h,j,f){},resize:function(c,f){}});a.Renderer=b})(window);(function(j){var h=j.Hilo,k=h.Class,l=h.Renderer,m=h.Drawable,a=function(){return k.create({Extends:l,constructor:function(b){a.superclass.constructor.call(this,b)},renderType:"dom",startDraw:function(b){var c=b.drawable=b.drawable||new m;c.domElement=c.domElement||h.createElement("div",{id:b.id,style:{position:"absolute"}});return b.visible},draw:function(b){a.setElementStyleByView(b)},resize:function(c,d){var b=this.canvas.style;b.width=c+"px";b.height=d+"px";"absolute"!=b.position&&(b.position="relative")},Statics:{setElementStyleByView:function(t,n){var g=h.browser.jsVendor,u=!1,s=t.parent,r=t.drawable,q=r.domElement,p=q.style,o=t._stateCache||(t._stateCache={});s&&(s=s.drawable&&s.drawable.domElement)&&s!=q.parentNode&&s.appendChild(q);this.cacheStateIfChanged(t,["visible"],o)&&(p.display=t.visible?"":"none");this.cacheStateIfChanged(t,["alpha"],o)&&(p.opacity=t.alpha);if(t.visible&&!(0>=t.alpha)){this.cacheStateIfChanged(t,["width"],o)&&(u=!0,p.width=t.width+"px");this.cacheStateIfChanged(t,["height"],o)&&(u=!0,p.height=t.height+"px");this.cacheStateIfChanged(t,["depth"],o)&&(p.zIndex=t.depth+1);this.cacheStateIfChanged(t,["clipChildren"],o)&&(p.overflow=t.clipChildren?"hidden":null);if(u||this.cacheStateIfChanged(t,["pivotX","pivotY"],o)){u=!0,p[g+"TransformOrigin"]=t.pivotX*t.width+"px "+t.pivotY*t.height+"px"}if(u||this.cacheStateIfChanged(t,["x","y","rotation","scaleX","scaleY"],o)){u=!0,p[g+"Transform"]="translate("+(t.x-t.pivotX*t.width)+"px, "+(t.y-t.pivotY*t.height)+"px)rotate("+t.rotation+"deg)scale("+t.scaleX+", "+t.scaleY+")"}n?p.pointerEvents="none":(p.pointerEvents||(p.pointerEvents="none"),this.cacheStateIfChanged(t,["background"],o)&&(p.backgroundColor=t.background),r.image&&(r.split?this.setElementStyleBySplit(o,t,u):this.setElementStyleByImage(o,t,u)))}},setElementStyleByImage:function(u,o,g){var t=o.drawable,s=t.domElement.style,r=t.rect,t=t.image.src;t!==u.image&&(u.image=t,s.backgroundImage="url("+t+")");if(r){var t=h.browser.jsVendor,q=r[0],n=r[1],p=r[2],r=r[3];q!==u.sx&&(u.sx=q,s.backgroundPositionX=-q+"px");n!==u.sy&&(u.sy=n,s.backgroundPositionY=-n+"px");!g||p==o.width&&r==o.height||(u=p/o.width,g=r/o.height,s.width=p+"px",s.height=r+"px",s[t+"TransformOrigin"]=o.pivotX*p+"px "+o.pivotY*r+"px",s[t+"Transform"]="translate("+(o.x-o.pivotX*p)+"px, "+(o.y-o.pivotY*r)+"px)rotate("+o.rotation+"deg)scale("+o.scaleX/u+", "+o.scaleY/g+")")}},setElementStyleBySplit:function(A,t,r){var z=t.drawable,y=t.width,x=t.height;t=h.browser.jsVendor;var w=z.image;r=w.src;var s=z.rect,v=s&&s[0]||0,q=s&&s[1]||0,o=s&&s[2]||w.width,w=s&&s[3]||w.height;if(r!==A.image||v!==A.sx||q!==A.sy){A.image=r;A.sx=v;A.sy=q;s=z.split;A=z.domScale9Image;if(null==A){A=[];for(var g=0;9>g;g++){var B=h.createElement("div",{style:{position:"absolute"}});z.domElement.appendChild(B);A[g]=B}z.domScale9Image=A}z=s[0];g=s[2];o=o-z-g;B=s[1];s=s[3];w=w-B-s;y=[[v+0,q+0,z,B,0,0,z,B],[v+z,q+0,g,B,z,0,y-z-o,B],[v+z+g,q+0,o,B,y-o,0,o,B],[v+0,q+B,z,s,0,B,z,x-B-w],[v+z,q+B,g,s,z,B,y-z-o,x-B-w],[v+z+g,q+B,o,s,y-o,B,o,x-B-w],[v+0,q+B+s,z,w,0,x-w,z,w],[v+z,q+B+s,g,w,z,x-w,y-z-o,w],[v+z+g,q+B+s,o,w,y-o,x-w,o,w]];for(g=0;9>g;g++){x=y[g],B=A[g],v=B.style,v.border="none",v.width=x[2]+"px",v.height=x[3]+"px",v.backgroundImage="url("+r+")",v.backgroundPositionX=-x[0]+"px",v.backgroundPositionY=-x[1]+"px",v[t+"TransformOrigin"]="0px 0px",v[t+"Transform"]="translate("+x[4]+"px, "+x[5]+"px) scale("+x[6]/x[2]*1.001+", "+x[7]/x[3]*1.001+")"}}},cacheStateIfChanged:function(n,o,g){var u,p,t,s,q=!1;u=0;for(p=o.length;u<p;u++){t=o[u],s=n[t],s!=g[t]&&(g[t]=s,q=!0)}return q}}})}();h.DOMRenderer=a})(window);(function(j){j=j.Hilo;var h=j.Matrix,k=Math.PI/180,l=j.Class.create({Extends:j.Renderer,Statics:{MAX_BATCH_NUM:2000,ATTRIBUTE_NUM:5,isSupport:null},renderType:"webgl",gl:null,constructor:function(e){l.superclass.constructor.call(this,e);e=this.gl=this.canvas.getContext("webgl",{stencil:!0})||this.canvas.getContext("experimental-webgl",{stencil:!0});e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);e.enable(e.BLEND);e.disable(e.CULL_FACE);e.disable(e.DEPTH_TEST);e.disable(e.STENCIL_TEST);this._initShaders();this.vertex2=new Float32Array(8);this.indexs2=new Uint16Array([0,1,2,1,2,3]);this.notextureShader.active();e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indexs2,e.STATIC_DRAW);e.bufferData(e.ARRAY_BUFFER,this.vertex2,e.STREAM_DRAW);this.maxBatchNum=l.MAX_BATCH_NUM;this.positionStride=4*l.ATTRIBUTE_NUM;var f=6*this.maxBatchNum;this.vertex=new Float32Array(this.maxBatchNum*l.ATTRIBUTE_NUM*4);this.indexs=new Uint16Array(f);for(var d=0,g=0;d<f;d+=6,g+=4){this.indexs[d+0]=g+0,this.indexs[d+1]=g+1,this.indexs[d+2]=g+2,this.indexs[d+3]=g+1,this.indexs[d+4]=g+2,this.indexs[d+5]=g+3}this.batchIndex=0;this.sprites=[];this.defaultShader.active();e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indexs,e.STATIC_DRAW);e.bufferData(e.ARRAY_BUFFER,this.vertex,e.STREAM_DRAW)},context:null,startDraw:function(b){return b.visible&&0<b.alpha?(b.__webglWorldMatrix=b.__webglWorldMatrix||new h(1,0,0,1,0,0),b.__webglRenderAlpha=b.__webglRenderAlpha||1,!0):!1},draw:function(B){var u=B.drawable,A=u&&u.image,z=B.background;(this.batchIndex>=this.maxBatchNum||z)&&this._renderBatches();if(B.clipChildren){this.stencilLevel=this.stencilLevel||0;var y=this.gl;0===this.stencilLevel?(y.enable(y.STENCIL_TEST),y.clear(y.STENCIL_BUFFER_BIT),y.stencilFunc(y.ALWAYS,1,255),y.stencilOp(y.KEEP,y.REPLACE,y.REPLACE)):y.stencilOp(y.KEEP,y.INCR,y.INCR);y.colorMask(!1,!1,!1,!1);this.notextureShader.active();this._renderBackground(B,{r:1,g:1,b:1});this.stencilLevel+=1;y.colorMask(!0,!0,!0,!0);y.stencilFunc(y.LEQUAL,this.stencilLevel,255);y.stencilOp(y.KEEP,y.KEEP,y.KEEP)}z&&(this.notextureShader.active(),this._renderBackground(B,z.toColorRgb()));if(A){this.defaultShader.active();var z=u.rect,x=u.split,u=B.width,y=B.height;if(x){var w=z&&z[0]||0,v=z&&z[1]||0,o=x[0],t=x[2],s=(z&&z[2]||A.width)-o-t,r=x[1],x=x[3],z=(z&&z[3]||A.height)-r-x;this._renderImage(B,A,w+0,v+0,o,r,0,0,o,r);this._renderImage(B,A,w+o,v+0,t,r,o,0,u-o-s,r);this._renderImage(B,A,w+o+t,v+0,s,r,u-s,0,s,r);this._renderImage(B,A,w+0,v+r,o,x,0,r,o,y-r-z);this._renderImage(B,A,w+o,v+r,t,x,o,r,u-o-s,y-r-z);this._renderImage(B,A,w+o+t,v+r,s,x,u-s,r,s,y-r-z);this._renderImage(B,A,w+0,v+r+x,o,z,0,y-z,o,z);this._renderImage(B,A,w+o,v+r+x,t,z,o,y-z,u-o-s,z);this._renderImage(B,A,w+o+t,v+r+x,s,z,u-s,y-z,s,z)}else{this._renderImage(B,A,z[0],z[1],z[2],z[3],0,0,u,y)}}},endDraw:function(b){b===this.stage&&this._renderBatches();b.clipChildren&&(b=this.gl,--this.stencilLevel,b.stencilFunc(b.LEQUAL,this.stencilLevel,255),0==this.stencilLevel&&(this._renderBatches(),b.disable(this.gl.STENCIL_TEST)))},transform:function(b){this._setConcatenatedMatrix(b,b.parent);0<b.alpha&&(b.__webglRenderAlpha=b.parent&&b.parent.__webglRenderAlpha?b.alpha*b.parent.__webglRenderAlpha:b.alpha)},clear:function(e,f,d,g){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(b,c){if(this.width!==b||this.height!==c){this.width=this.canvas.width=b,this.height=this.canvas.height=c,this.gl.viewport(0,0,b,c),this.activeShader.active(!0)}},_renderBackground:function(o,p){var n=this.gl,u=o.__webglRenderAlpha;n.uniform4f(this.activeShader.u_color,p.r/255*u,p.g/255*u,p.b/255*u,u);var t=o.width,s=o.height,u=-o.pivotX*t,r=o.pivotY*s-s,q=this.vertex2;q[0]=u;q[1]=r;q[2]=u+t;q[3]=r;q[4]=u;q[5]=r+s;q[6]=u+t;q[7]=r+s;t=o.__webglWorldMatrix;for(s=0;4>s;s++){u=q[2*s],r=q[2*s+1],q[2*s]=t.a*u+t.c*r+t.tx,q[2*s+1]=t.b*u+t.d*r+t.ty}n.bufferData(n.ARRAY_BUFFER,q,n.STREAM_DRAW);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},_renderImage:function(x,p,w,v,u,t,s,r,n,o){p.texture||this.activeShader.uploadTexture(p);s=this._createVertexs(p,w,v,u,t,-x.pivotX*n+s,-x.pivotY*o+r,n,o);w=this.batchIndex*this.positionStride;v=this.vertex;r=x.__webglRenderAlpha;v[w+0]=s[0];v[w+1]=s[1];v[w+2]=s[2];v[w+3]=s[3];v[w+4]=r;v[w+5]=s[4];v[w+6]=s[5];v[w+7]=s[6];v[w+8]=s[7];v[w+9]=r;v[w+10]=s[8];v[w+11]=s[9];v[w+12]=s[10];v[w+13]=s[11];v[w+14]=r;v[w+15]=s[12];v[w+16]=s[13];v[w+17]=s[14];v[w+18]=s[15];v[w+19]=r;u=x.__webglWorldMatrix;for(t=0;4>t;t++){s=v[w+5*t],r=v[w+5*t+1],v[w+5*t]=u.a*s+u.c*r+u.tx,v[w+5*t+1]=u.b*s+u.d*r+u.ty}x.texture=p.texture;this.sprites[this.batchIndex++]=x},_renderBatches:function(){var e=this.gl;e.bufferSubData(e.ARRAY_BUFFER,0,this.vertex.subarray(0,this.batchIndex*this.positionStride));for(var e=0,f=null,d=0;d<this.batchIndex;d++){var g=this.sprites[d];f&&f!==g.texture&&(this._renderBatch(e,d),e=d);f=g.texture}this._renderBatch(e,this.batchIndex);this.batchIndex=0},_renderBatch:function(e,f){var d=this.gl,g=f-e;0<g&&(d.bindTexture(d.TEXTURE_2D,this.sprites[e].texture),d.drawElements(d.TRIANGLES,6*g,d.UNSIGNED_SHORT,12*e))},_initShaders:function(){this.defaultShader=new a(this,{v:"attribute vec2 a_position;\nattribute vec2 a_TexCoord;\nattribute float a_alpha;\nuniform mat3 u_projectionTransform;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n    v_TexCoord = a_TexCoord;\n    v_alpha = a_alpha;\n}\n",f:"\nprecision mediump float;\nuniform sampler2D u_Sampler;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_alpha;\n}\n"},{attributes:[{name:"a_position",count:2,offset:0,stride:20},{name:"a_TexCoord",count:2,offset:8,stride:20},{name:"a_alpha",count:1,offset:16,stride:20}],uniforms:["u_projectionTransform","u_Sampler"]});this.notextureShader=new a(this,{v:"attribute vec2 a_position;\nuniform mat3 u_projectionTransform;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n}\n",f:"\nprecision mediump float;\nuniform vec4 u_color;\nvoid main(){\n    gl_FragColor = u_color;\n}\n"},{attributes:[{name:"a_position",count:2,offset:0,stride:8}],uniforms:["u_projectionTransform","u_color"]})},_createVertexs:function(z,s,y,x,w,v,u,t,o){var r=this.__tempVertexs||[],p=z.width;z=z.height;x/=p;w/=z;s/=p;y/=z;1<x+s&&(x=1-s);1<w+y&&(w=1-y);y=1-y-w;u=-o-u;p=0;r[p++]=v;r[p++]=u;r[p++]=s;r[p++]=y;r[p++]=v+t;r[p++]=u;r[p++]=s+x;r[p++]=y;r[p++]=v;r[p++]=u+o;r[p++]=s;r[p++]=y+w;r[p++]=v+t;r[p++]=u+o;r[p++]=s+x;r[p++]=y+w;return r},_setConcatenatedMatrix:function(n,p){var e=n.__webglWorldMatrix,t=1,s=0,r=360-n.rotation%360,q=n.scaleX,o=n.scaleY;r&&(s=r*k,t=Math.cos(s),s=Math.sin(s));e.a=t*q;e.b=s*q;e.c=-s*o;e.d=t*o;e.tx=n.x;e.ty=-n.y;t=p.pivotX;q=p.pivotY;if(0!=t||0!=q){e.tx-=t*p.width,e.ty+=t*p.height}t=p.__webglWorldMatrix;e.concat(t.a,t.b,t.c,t.d,t.tx,t.ty)}}),m={},a=function(d,e,c){this.renderer=d;this.gl=d.gl;this.program=this._createProgram(this.gl,e.v,e.f);c=c||{};this.attributes=c.attributes||[];this.uniforms=c.uniforms||[];this.vertexBuffer=this.gl.createBuffer();this.indexBuffer=this.gl.createBuffer()};a.prototype={active:function(g){var n=this,f=n.renderer,q=f.activeShader;if(q!==n||g){var p=n.gl,o=n.program;o&&p&&(q&&q.attributes.forEach(function(b){p.disableVertexAttribArray(q[b.name])}),f.activeShader=n,p.useProgram(o),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,n.indexBuffer),p.bindBuffer(p.ARRAY_BUFFER,n.vertexBuffer),n.attributes.forEach(function(b){attribute=b.name;n[attribute]=n[attribute]||p.getAttribLocation(o,attribute);p.enableVertexAttribArray(n[attribute]);p.vertexAttribPointer(n[attribute],b.count,p.FLOAT,!1,b.stride,b.offset)}),n.uniforms.forEach(function(b){n[b]=n[b]||p.getUniformLocation(o,b)}),n.width!==f.width||n.height!==f.height)&&(n.width=f.width,n.height=f.height,n.uploadProjectionTransform(!0))}},uploadTexture:function(e){var c=this.gl;if(m[e.src]){e.texture=m[e.src]}else{var f=c.createTexture();c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,f);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,1);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.uniform1i(this.u_Sampler,0);c.bindTexture(c.TEXTURE_2D,null);e.texture=f;m[e.src]=f}},uploadProjectionTransform:function(d){var c=this.gl;if(!this._projectionTransformElements||d){this._projectionTransformElements=new Float32Array([2/this.width,0,0,0,2/this.height,0,-1,1,1])}c.uniformMatrix3fv(this.u_projectionTransform,!1,this._projectionTransformElements)},_createProgram:function(f,e,n){e=this._createShader(f,f.VERTEX_SHADER,e);var g=this._createShader(f,f.FRAGMENT_SHADER,n);if(!e||!g){return null}if(n=f.createProgram()){if(f.attachShader(n,e),f.attachShader(n,g),f.linkProgram(n),f.deleteShader(g),f.deleteShader(e),!f.getProgramParameter(n,f.LINK_STATUS)){return e=f.getProgramInfoLog(n),console.log("Failed to link program: "+e),f.deleteProgram(n),null}}return n},_createShader:function(e,d,f){if(d=e.createShader(d)){if(e.shaderSource(d,f),e.compileShader(d),!e.getShaderParameter(d,e.COMPILE_STATUS)){return f=e.getShaderInfoLog(d),console.log("Failed to compile shader: "+f),e.deleteShader(d),null}}return d}};l.isSupport=function(){if(void 0===this._isSupport){var b=document.createElement("canvas");b.getContext&&(b.getContext("webgl")||b.getContext("experimental-webgl"))?this._isSupport=!0:this._isSupport=!1}return this._isSupport};j.WebGLRenderer=l})(window);(function(b){b=b.Hilo;var a=b.Class.create({Extends:b.Renderer,constructor:function(c){a.superclass.constructor.call(this,c);this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(c){return c.visible&&0<c.alpha?(this.context.save(),!0):!1},draw:function(q){var r=this.context,s=q.width,u=q.height;q.clipChildren&&(r.beginPath(),r.rect(0,0,s,u),r.clip());var v=q.background;v&&(r.fillStyle=v,r.fillRect(0,0,s,u));var n=q.drawable;if(q=n&&n.image){var v=n.rect,j=n.split;if(j){var n=v&&v[0]||0,p=v&&v[1]||0,o=j[0],x=j[2],y=(v&&v[2]||q.width)-o-x,m=j[1],j=j[3],v=(v&&v[3]||q.height)-m-j;r.drawImage(q,n+0,p+0,o,m,0,0,o,m);r.drawImage(q,n+o,p+0,x,m,o,0,s-o-y,m);r.drawImage(q,n+o+x,p+0,y,m,s-y,0,y,m);r.drawImage(q,n+0,p+m,o,j,0,m,o,u-m-v);r.drawImage(q,n+o,p+m,x,j,o,m,s-o-y,u-m-v);r.drawImage(q,n+o+x,p+m,y,j,s-y,m,y,u-m-v);r.drawImage(q,n+0,p+m+j,o,v,0,u-v,o,v);r.drawImage(q,n+o,p+m+j,x,v,o,u-v,s-o-y,v);r.drawImage(q,n+o+x,p+m+j,y,v,s-y,u-v,y,v)}else{r.drawImage(q,v[0],v[1],v[2],v[3],0,0,s,u)}}},endDraw:function(c){this.context.restore()},transform:function(v){var x=this.context,y=v.x,z=v.y,A=v.width,r=v.height,o=v.scaleX,u=v.scaleY,s=v.pivotX,B=v.pivotY,C=v.rotation%360,p=v.align;if(p){if("function"===typeof p){v.align()}else{var j=v.parent;if(j){var n=j.width,j=j.height;switch(p){case"TL":z=y=0;break;case"T":y=n-A>>1;z=0;break;case"TR":y=n-A;z=0;break;case"L":y=0;z=j-r>>1;break;case"C":y=n-A>>1;z=j-r>>1;break;case"R":y=n-A;z=j-r>>1;break;case"BL":y=0;z=j-r;break;case"B":y=n-A>>1;z=j-r;break;case"BR":y=n-A,z=j-r}}}}0==y&&0==z||x.translate(y,z);0!=C&&x.rotate(C*Math.PI/180);1==o&&1==u||x.scale(o,u);0==s&&0==B||x.translate(-s*A,-B*r);0<v.alpha&&(x.globalAlpha*=v.alpha)},clear:function(g,h,j,f){this.context.clearRect(g,h,j,f)},resize:function(c,f){this.canvas.width=c;this.canvas.height=f}});b.CanvasRenderer=a})(window);(function(b){var a=b.Hilo,h=a.Class,j=a.Event,k=a.Matrix;b=function(){function c(D,B,A){for(var z=D.length,y=B.length,w,v,t,l,s,r,o=0,E=w=0;E<z;E++){w=D[E];v=D[E<z-1?E+1:0];o=w.y-v.y;w=v.x-w.x;v=Math.sqrt(o*o+w*w);o/=v;w/=v;v=t=D[0].x*o+D[0].y*w;for(var C=1;C<z;C++){r=D[C].x*o+D[C].y*w,r>t?t=r:r<v&&(v=r)}l=s=B[0].x*o+B[0].y*w;for(C=1;C<y;C++){r=B[C].x*o+B[C].y*w,r>s?s=r:r<l&&(l=r)}v<l?(v=l-t,o=-o,w=-w):v-=s;if(0<=v){return !1}v>A.overlap&&(A.overlap=v,A.normal.x=o,A.normal.y=w)}return A}return h.create({Mixes:j,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("View");a.copy(this,d,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var e=this,d;d=e.parent;){e=d}return e.canvas&&e.renderer?e:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(e,d){"number"===typeof d?e.addChildAt(this,d):e.addChild(this);return this},removeFromParent:function(){var d=this.parent;d&&d.removeChild(this);return this},fixSize:function(){if(!this.width||!this.height){var d=this.drawable&&this.drawable.rect;d&&(this.width=d[2],this.height=d[3])}},getBounds:function(){for(var A=this.width,z=this.height,y=this.getConcatenatedMatrix(),A=this.boundsArea||[{x:0,y:0},{x:A,y:0},{x:A,y:z},{x:0,y:z}],z=[],x,w,v,u,t,l,s,r=0,o=A.length;r<o;r++){x=y.transformPoint(A[r],!0,!0),w=x.x,v=x.y,0==r?(u=t=w,l=s=v):(u>w?u=w:t<w&&(t=w),l>v?l=v:s<v&&(s=v)),z[r]=x}z.x=u;z.y=l;z.width=t-u;z.height=s-l;return z},getConcatenatedMatrix:function(w){for(var v=new k(1,0,0,1,0,0),u=this;u!=w&&u.parent;u=u.parent){var s=1,r=0,p=u.rotation%360,x=u.pivotX,o=u.pivotY,l=u.scaleX,n=u.scaleY;p&&(r=p*Math.PI/180,s=Math.cos(r),r=Math.sin(r));0!=x&&(v.tx-=x*u.width);0!=o&&(v.ty-=o*u.height);v.concat(s*l,r*l,-r*n,s*n,u.x,u.y)}return v},hitTestPoint:function(D,B,A){var z=this.getBounds(),y=D>=z.x&&D<=z.x+z.width&&B>=z.y&&B<=z.y+z.height;if(y&&A){A=0;for(var y=!1,w,v,t,l,s=0,r=z.length;s<r;s++){var o=z[s],E=z[(s+1)%r];if(o.y==E.y&&B==o.y&&(o.x>E.x?(w=E.x,v=o.x):(w=o.x,v=E.x),D>=w&&D<=v)){y=!0;continue}o.y>E.y?(t=E.y,l=o.y):(t=o.y,l=E.y);if(!(B<t||B>l)){var C=(B-o.y)*(E.x-o.x)/(E.y-o.y)+o.x;C>D?A++:C==D&&(y=!0);o.x>D&&o.y==B&&(o=z[(r+s-1)%r],(o.y<B&&E.y>B||o.y>B&&E.y<B)&&A++)}}y=y||1==A%2}return y},hitTestObject:function(g,o){var n=this.getBounds(),m=g.getBounds(),l=n.x<=m.x+m.width&&m.x<=n.x+n.width&&n.y<=m.y+m.height&&m.y<=n.y+n.height;l&&o&&(l=(l=c(n,m,{overlap:-Infinity,normal:{x:0,y:0}}))?c(m,n,l):!1);return !!l},_render:function(e,d){this.onUpdate&&!1===this.onUpdate(d)||!e.startDraw(this)||(e.transform(this),this.render(e,d),e.endDraw(this))},_fireMouseEvent:function(e){e.eventCurrentTarget=this;this.fire(e);if("mousemove"==e.type){if(!this.__mouseOver){this.__mouseOver=!0;var d=a.copy({},e);d.type="mouseover";this.fire(d)}}else{"mouseout"==e.type&&(this.__mouseOver=!1)}d=this.parent;e._stopped||e._stopPropagationed||!d||("mouseout"==e.type||"touchout"==e.type?d.hitTestPoint(e.stageX,e.stageY,!0)||d._fireMouseEvent(e):d._fireMouseEvent(e))},onUpdate:null,render:function(e,d){this.fixSize();e.draw(this)},toString:function(){for(var e,d=this;d;){e=e?d.id+"."+e:d.id,d=d.parent}return e}})}();a.View=b})(window);(function(b){var a=b.Hilo,h=a.Drawable,j=a.DOMRenderer,k=a.Class.create({Extends:a.View,constructor:function(c){c=c||{};this.id=this.id||c.id||a.getUid("Container");k.superclass.constructor.call(this,c);this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getChildrenNum:function(){return this.children.length},addChildAt:function(g,l){var p=this.children,o=p.length,n=g.parent;l=0>l?0:l>o?o:l;var m=this.getChildIndex(g);if(m==l){return this}0<=m?(p.splice(m,1),l=l==o?o-1:l):n&&n.removeChild(g);p.splice(l,0,g);0>m?this._updateChildren(l):this._updateChildren(m<l?m:l,(m<l?l:m)+1);g.drawable&&g.drawable.domElement&&(this._domContainerFlag=!0);return this},addChild:function(f){for(var g=this.children.length,n=arguments,m=0,l=n.length;m<l;m++){this.addChildAt(n[m],g+m)}return this},removeChildAt:function(g){var l=this.children;if(0>g||g>=l.length){return null}var p=l[g];if(p){var o=p.drawable,n=o&&o.domElement;if(n){var m=n.parentNode;m&&m.removeChild(n);o.domElement=null;this._domContainerFlag=!0}p.parent=null;p.depth=-1}l.splice(g,1);this._updateChildren(g);return p},removeChild:function(c){return this.removeChildAt(this.getChildIndex(c))},removeChildById:function(f){for(var g=this.children,n,m=0,l=g.length;m<l;m++){if(n=g[m],n.id===f){return this.removeChildAt(m),n}}return null},removeAllChildren:function(){for(;this.children.length;){this.removeChildAt(0)}return this},getChildAt:function(c){var d=this.children;return 0>c||c>=d.length?null:d[c]},getChildById:function(f){for(var g=this.children,n,m=0,l=g.length;m<l;m++){if(n=g[m],n.id===f){return n}}return null},getChildIndex:function(c){return this.children.indexOf(c)},setChildIndex:function(f,g){var n=this.children,m=n.indexOf(f);if(0<=m&&m!=g){var l=n.length;g=0>g?0:g>=l?l-1:g;n.splice(m,1);n.splice(g,0,f);this._updateChildren()}return this},swapChildren:function(f,g){var n=this.children,m=this.getChildIndex(f),l=this.getChildIndex(g);f.depth=l;n[l]=f;g.depth=m;n[m]=g},swapChildrenAt:function(f,g){var n=this.children,m=this.getChildAt(f),l=this.getChildAt(g);m.depth=g;n[g]=m;l.depth=f;n[f]=l},sortChildren:function(d){var e=this.children;if("string"==typeof d){var f=d;d=function(g,c){return c[f]-g[f]}}e.sort(d);this._updateChildren()},_updateChildren:function(f,g){var n=this.children,m;g=g||n.length;for(var l=f||0;l<g;l++){m=n[l],m.depth=l+1,m.parent=this}},contains:function(c){for(;c=c.parent;){if(c===this){return !0}}return !1},getViewAtPoint:function(u,v,s,r,p){if(this.clipChildren&&!this.hitTestPoint(u,v,s)){return null}for(var o=r?[]:null,n=this.children,w,m,l=n.length-1;0<=l;l--){if(w=n[l],!(!w||!w.visible||0>=w.alpha||p&&!w.pointerEnabled)){if(w.children&&w.children.length&&(!p||w.pointerChildren)&&(m=w.getViewAtPoint(u,v,s,r,p)),m){if(r){m.length&&(o=o.concat(m))}else{return m}}else{if(w.hitTestPoint(u,v,s)){if(r){o.push(w)}else{return w}}}}}return r&&o.length?o:null},render:function(c,d){k.superclass.render.call(this,c,d);"dom"!=c.renderType&&(this._domContainerFlag&&(this._domContainerFlag=!1,this._domContainerUpdate()),this.drawable&&this.drawable.domElement&&j.setElementStyleByView(this,!0));var o=this.children.slice(0),n,m,l;n=0;for(m=o.length;n<m;n++){l=o[n],l._render(c,d)}},_domContainerUpdate:function(){var e=this.children,f=!1;i=0;for(len=e.length;i<len;i++){if(child=e[i],child.drawable&&child.drawable.domElement){f=!0;break}}var e=this.parent,l=this.drawable,g=l&&l.domElement;f?g||(l=this.drawable=this.drawable||new h,l.domElement=l.domElement||a.createElement("div",{style:{position:"absolute"}}),e&&e._domContainerUpdate()):g&&(g&&((f=g.parentNode)&&f.removeChild(g),this.drawable=l.domElement=null),e&&e._domContainerUpdate())}});a.Container=k})(window);(function(j){var h=j.Hilo,k=h.CanvasRenderer,l=h.DOMRenderer,m=h.WebGLRenderer,a=h.Class.create({Extends:h.Container,constructor:function(b){b=b||{};this.id=this.id||b.id||h.getUid("Stage");a.superclass.constructor.call(this,b);this._initRenderer(b);var n=this.width,g=this.height,f=this.updateViewport();b.width||(n=f&&f.width||320);b.height||(g=f&&f.height||480);this.resize(n,g,!0)},pivotX:0,pivotY:0,paused:!1,canvas:null,renderer:null,viewport:null,_initRenderer:function(d){var c=d.canvas,e=d.container;d=d.renderType||"canvas";"string"===typeof c&&(c=h.getElement(c));"string"===typeof e&&(e=h.getElement(e));c||(c=h.createElement("dom"===d?"div":"canvas",{style:{position:"absolute",overflow:"hidden"}}));this.canvas=c;e&&e.appendChild(c);c={canvas:c,stage:this};switch(d){case"dom":this.renderer=new l(c);break;case"webgl":m.isSupport()?this.renderer=new m(c):this.renderer=new k(c);break;default:this.renderer=new k(c)}},_render:function(z,y){if((!this.onUpdate||!1!==this.onUpdate(y))&&z.startDraw(this)){var x=this.width,w=this.height,v=this.scaleX,u=this.scaleY,t=this._height,s=this._scaleX,o=this._scaleY,r=this.canvas,p=r.style;if(this._width!==x||s!==v){this._width=x,this._scaleX=v,r.width=x,p.width=v*x+"px"}if(t!==w||o!==u){this._height=w,this._scaleY=u,r.height=w,p.height=u*w+"px"}(x=this.drawable&&this.drawable.domElement)&&!x.parentNode&&(x.style.overflow="hidden",r.appendChild(x));z.clear(0,0,this.width,this.height);this.render(z,y);z.endDraw(this)}},addTo:function(d){var c=this.canvas;c.parentNode!==d&&d.appendChild(c);return this},tick:function(b){this.paused||this._render(this.renderer,b)},resize:function(e,d,f){if(f||this.width!==e||this.height!==d){this.width=e,this.height=d,this.renderer.resize(e,d),this.updateViewport()}},updateViewport:function(){var d=this.canvas,c=null;d.parentNode&&(c=this.viewport=h.getElementRect(d));return c},enableDOMEvent:function(o,n){var t=this,s=t.canvas,r="string"===typeof o?[o]:o;n=!1!==n;for(var q=t._domListener||(t._domListener=function(b){t._onDOMEvent(b)}),p=0;p<r.length;p++){o=r[p],n?s.addEventListener(o,q,!1):s.removeEventListener(o,q)}return t},_onDOMEvent:function(n){var g=n.type,u=0==g.indexOf("touch"),s=n;if(u){var r=n.touches,s=n.changedTouches,s=r&&r.length?r[0]:s&&s.length?s[0]:null}var r=s.pageX||s.clientX,s=s.pageY||s.clientY,q=this.viewport||this.updateViewport();n.stageX=r=(r-q.left)/this.scaleX;n.stageY=s=(s-q.top)/this.scaleY;n.stopPropagation=function(){this._stopPropagationed=!0};var r=this.getViewAtPoint(r,s,!0,!1,!0)||this,s=this.canvas,q=this._eventTarget,p="mouseout"===g;if(q&&(!(q==r||q.contains&&q.contains(r))||p)){if(p="touchmove"===g?"touchout":"mousemove"===g||p||!r?"mouseout":null){var o=h.copy({},n);o.type=p;o.eventTarget=q;q._fireMouseEvent(o)}n.lastEventTarget=q;this._eventTarget=null}r&&r.pointerEnabled&&"mouseout"!==g&&(n.eventTarget=this._eventTarget=r,r._fireMouseEvent(n));u||(s.style.cursor=r&&r.pointerEnabled&&r.useHandCursor?"pointer":"");h.browser.android&&"touchmove"===g&&n.preventDefault()},_domContainerUpdate:function(){a.superclass._domContainerUpdate.call(this);var b=this.drawable&&this.drawable.domElement;b&&!b.parentNode&&this.canvas.parentNode&&this.canvas.parentNode.appendChild(b)}});h.Stage=a})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Bitmap");h.superclass.constructor.call(this,d);this.drawable=new c(d);if(!this.width||!this.height){if(d=this.drawable.rect){this.width=d[2],this.height=d[3]}}},setImage:function(f,d,e){this.drawable.init({image:f,rect:d,split:e});d&&(this.width=d[2],this.height=d[3]);return this}});a.Bitmap=h})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Sprite");h.superclass.constructor.call(this,d);this._frames=[];this._frameNames={};this._frameCallbacks=[];this.drawable=new c;d.frames&&this.setFrames(d.frames)},_frames:null,_frameNames:null,_frameIndex:0,_framePaused:!1,_frameElapsed:0,_frameCallbacks:null,loop:!0,duration:1,setFrames:function(n){if(n instanceof Array){this._frames=n;this._frameNames={};for(var o=0,p=n.length;o<p;o++){var m=n[o];m.name&&(this._frameNames[m.name]=m)}}else{var p=n.image,o=n.rect||[0,0,p.width,p.height],m=o[0],l=o[1],k=n.width||o[2],j=n.height||o[3],q=Math.floor(o[2]/k);n=n.total||q*Math.floor(o[3]/j);for(var r=[],o=0;o<n;o++){r[o]={image:p,rect:[m+o%q*k,l+j*Math.floor(o/q),k,j]}}this.setFrames(r)}return this},getFrame:function(e){if("number"===typeof e){var d=this._frames;return 0>e||e>=d.length?null:d[e]}return this._frameNames[e]},getFrameIndex:function(l){if(null==l||void 0==l){return this._frameIndex}var f=this._frames,g=f.length,k=-1;if("number"===typeof l){k=l}else{if(l="string"===typeof l?this._frameNames[l]:l){for(var j=0;j<g;j++){if(l===f[j]){k=j;break}}}}return k},getFrameTotal:function(){return this._frames?this._frames.length:0},setFrameCallback:function(f,d){var e=this.getFrameIndex(f);-1<e&&(this._frameCallbacks[e]=d);return this},play:function(){this._framePaused=!1;return this},stop:function(){this._framePaused=!0;return this},"goto":function(j,e){var f=this._frames.length,g=this.getFrameIndex(j);this._frameIndex=0>g?0:g>=f?f-1:g;this._framePaused=e||this._framePaused;this._frameElapsed=0;return this},_render:function(j,d){var f=this._nextFrame(d);if(f!=this._frameIndex){this._frameIndex=f;var g=this._frameCallbacks[f];g&&g.call(this);f=this._frames[f];this.drawable.init(f);this.width=f.rect[2];this.height=f.rect[3]}h.superclass._render.call(this,j,d)},_nextFrame:function(l){var f=this._frameIndex;if(this._framePaused){return f}var g=this._frames,k=g.length,g=g[f];if(g.stop||!this.loop&&f>=k-1){return this.stop(),f}l=this._frameElapsed+l;var j=g.duration||this.duration;l>j?(this._frameElapsed=l-j,null!=g.next?f=this.getFrameIndex(g.next):f>=k-1?f=0:f++):this._frameElapsed=l;return f}});a.Sprite=h})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Button");h.superclass.constructor.call(this,d);this.drawable=new c(d);this.setState(h.UP)},upState:null,overState:null,downState:null,disabledState:null,useHandCursor:!0,_state:null,_enabled:!0,setEnabled:function(d){this._enabled!=d&&(d?this.setState(h.UP):this.setState(h.DISABLED));return this},setState:function(e){if(this._state!==e){this._state=e;this._enabled=this.pointerEnabled=e!==h.DISABLED;var d;switch(e){case h.UP:d=this.upState;break;case h.OVER:d=this.overState;break;case h.DOWN:d=this.downState;break;case h.DISABLED:d=this.disabledState}d&&(this.drawable.init(d),a.copy(this,d,!0))}return this},fire:function(e,d){if(this.enabled){switch("string"===typeof e?e:e.type){case"mousedown":case"touchstart":case"touchmove":this.setState(h.DOWN);break;case"mouseover":this.setState(h.OVER);break;case"mouseup":this.overState?this.setState(h.OVER):this.upState&&this.setState(h.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(h.UP)}return h.superclass.fire.call(this,e,d)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});a.Button=h})(window);(function(l){var k=l.Hilo;l=k.Class;var m=k.Drawable,n=k.View,o=k.createElement("canvas"),h=o&&o.getContext("2d"),j=l.create({Extends:n,constructor:function(a){a=a||{};this.id=this.id||a.id||k.getUid("Text");j.superclass.constructor.call(this,a);this.font=a.font||"16px arial";a.width?(this.width=a.width,this._autoWidth=!1):(this.width=256,this._autoWidth=!0);a.height?(this.height=a.height,this._autoHeight=!1):(this.height=256,this._autoHeight=!0)},font:null,text:null,color:"#000",textAlign:null,outline:!1,spacing:0,dirty:!0,render:function(f,e){if("canvas"===f.renderType){this._check(),this._draw(f.context)}else{if("dom"===f.renderType){var p=this.drawable.domElement,g=p.style;this._check()&&(g.font=this.font,g.color=this.color,g.textAlign=this.textAlign,g.lineHeight=this._fontHeight+this.spacing+"px",g["word-break"]="break-all",g["word-wrap"]="break-word",p.innerHTML=this.text.replace("\n","</br>"));f.draw(this);this._autoWidth?(this.width=p.offsetWidth,g.width=null):g.width=this.width+"px";this._autoHeight?(this.height=p.offsetHeight,g.height=null):g.height=this.height+"px"}else{this._check()&&this._cache(),f.draw(this)}}},_draw:function(D){var B=this.text.toString();if(B){D.font=this.font;D.textAlign=this.textAlign;D.textBaseline="top";var A=B.split(/\r\n|\r|\n|<br(?:[ \/])*>/),z=0,y=0,w=this._fontHeight+this.spacing,v,b,t,B=[];v=0;for(len=A.length;v<len;v++){if(b=A[v],t=D.measureText(b).width,t<=this.width||this._autoWidth){B.push({text:b,y:y}),z<t&&(z=t),y+=w}else{t="";var s=0,r,E,C;E=0;for(wlen=b.length;E<wlen;E++){C=b[E],r=D.measureText(t+C).width,r>this.width?(B.push({text:t,y:y}),z<s&&(z=s),y+=w,t=C):(s=r,t+=C),E==wlen-1&&(B.push({text:t,y:y}),t!==C&&z<r&&(z=r),y+=w)}}}this._autoWidth&&(this.width=z);this._autoHeight&&(this.height=y);(A=this.background)&&D!==h&&(D.fillStyle=A,D.fillRect(0,0,this.width,this.height));this.outline?D.strokeStyle=this.color:D.fillStyle=this.color;for(v=0;v<B.length;v++){b=B[v],this._drawTextLine(D,b.text,b.y)}}},_drawTextLine:function(g,f,r){var q=0,p=this.width;switch(this.textAlign){case"center":q=p>>1;break;case"right":q=p}this.outline?g.strokeText(f,q,r):g.fillText(f,q,r)},_check:function(){return this._font!==this.font?(this._font=this.font,this._fontHeight=j.measureFontHeight(this.font),!0):this._text!==this.text?(this._text=this.text,!0):this._color!==this.color?(this._color=this.color,!0):this._textAlign!==this.textAlign?(this._textAlign=this.textAlign,!0):this.dirty},_cache:function(){o.width=this.width;o.height=this.height;h.clearRect(0,0,o.width,o.height);this._draw(h);var b=new Image;b.src=o.toDataURL();this.drawable=this.drawable||new m;this.drawable.init(b)},Statics:{measureFontHeight:function(e){e=k.createElement("div",{style:{font:e,position:"absolute"},innerHTML:"PM\u56fd\u5bb6"});var d=document.documentElement;d.appendChild(e);var f=e.offsetHeight;d.removeChild(e);return f}}});k.Text=j})(window);(function(b){var a=b.Hilo,c=a.Bitmap,h=a.Class.create({Extends:a.Container,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Label");h.superclass.constructor.call(this,d);d.font&&this.genGlyphs(d.font);this.pointerChildren=!1},glyphs:null,spacing:0,text:"",genGlyphs:function(q){var j=q.text.toString(),l=q.image,p=q.rect||[0,0,l.width,l.height],o=q.width||p[2],n=q.height||p[3];q=q.col||Math.floor(p[2]/o);for(var p={},m=0,k=j.length;m<k;m++){charStr=j.charAt(m),p[charStr]={image:l,rect:[m%q*o,n*Math.floor(m/q),o,n]}}this.glyphs=p},render:function(o,p){var q=this.text.toString(),n=this.spacing,m=this.glyphs;if(this._text!=q||this._spacing!=n||this._glyphs!=m){this._text=q;this._spacing=n;this._glyphs=m;var n=q.length,l,d,s,u=s=0,j=0;for(l=0;l<n;l++){if(d=q.charAt(l),d=m[d]){j=s+(0<s?this.spacing:0),this.children[l]?(s=this.children[l],s.setImage(d.image,d.rect)):(s=h._createBitmap(d),this.addChild(s)),s.x=j,s=j+d.rect[2],u=Math.max(u,d.rect[3])}}for(l=this.children.length-1;l>=n;l--){h._releaseBitmap(this.children[l]),this.removeChild(this.children[l])}this.width=s;this.height=u}h.superclass.render.call(this,o,p)},Statics:{_pool:[],_createBitmap:function(e){var d;0<h._pool.length?(d=h._pool.pop(),d.setImage(e.image,e.rect)):d=new c({image:e.image,rect:e.rect});return d},_releaseBitmap:function(d){h._pool.push(d)}}});a.Label=h})(window);(function(b){var a=b.Hilo,h=a.Drawable,j=a.DOMRenderer,k=a.Class.create({Extends:a.View,constructor:function(c){c=c||{};this.id=this.id||c.id||a.getUid("Element");k.superclass.constructor.call(this,c);this.drawable=new h;this.element=this.drawable.domElement=c.element||a.createElement("div",{style:{position:"absolute"}});this.element.id=this.id},element:null,_render:function(c,d){this.onUpdate&&!1===this.onUpdate(d)||this.visible&&this.render(c,d)},render:function(c,d){this._element!=this.element&&(this.drawable.domElement=this.element);"dom"!=c.renderType?j.setElementStyleByView(this):c.draw(this)}});a.Element=k})(window);