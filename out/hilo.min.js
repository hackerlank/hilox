(function(b){b.console=b.console||{log:function(){}};b=Array.prototype;var a=b.slice;b.indexOf=b.indexOf||function(g,h){h=h||0;var f=this.length,j;if(0==f||h>=f){return -1}0>h&&(h=f+h);for(j=h;j<f;j++){if(this[j]===g){return j}}return -1};b=Function.prototype;b.bind=b.bind||function(h){function j(){var c=k.concat(a.call(arguments));return f.apply(this instanceof j?this:h,c)}var f=this,k=a.call(arguments,1),g=function(){};g.prototype=f.prototype;j.prototype=new g;return j}})(window);(function(b){for(var a=0,c=["ms","moz","webkit","o"],h=0;h<c.length&&!b.requestAnimationFrame;++h){b.requestAnimationFrame=b[c[h]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[c[h]+"CancelAnimationFrame"]||b[c[h]+"CancelRequestAnimationFrame"]}b.requestAnimationFrame||(b.requestAnimationFrame=function(d,j){var f=(new Date).getTime(),g=Math.max(0,16-(f-a)),e=b.setTimeout(function(){d(f+g)},g);a=f+g;return e});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(d){clearTimeout(d)})})(window);(function(b){var a=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.toColorRgb=function(){var c=this.toLowerCase();return c&&a.test(c)?4===c.length?{r:parseInt("0x"+c.charAt(1)+c.charAt(1)),g:parseInt("0x"+c.charAt(2)+c.charAt(2)),b:parseInt("0x"+c.charAt(3)+c.charAt(3))}:{r:parseInt("0x"+c.slice(1,3)),g:parseInt("0x"+c.slice(3,5)),b:parseInt("0x"+c.slice(5,7))}:{r:0,g:0,b:0}}})(window);(function(b){var a=function(){var f=document,g=f.documentElement,c=0;return{getUid:function(e){var d=++c;return e?e+"_"+d:d},copy:function(k,e,j){for(var d in e){if(!j||k.hasOwnProperty(d)||void 0!==k[d]){k[d]=e[d]}}return k},browser:function(){var e=navigator.userAgent,e={iphone:/iphone/i.test(e),ipad:/ipad/i.test(e),ipod:/ipod/i.test(e),ios:/iphone|ipad|ipod/i.test(e),android:/android/i.test(e),webkit:/webkit/i.test(e),chrome:/chrome/i.test(e),safari:/safari/i.test(e),firefox:/firefox/i.test(e),ie:/msie/i.test(e),opera:/opera/i.test(e),supportTouch:"ontouchstart" in b,supportCanvas:null!=f.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation" in b,supportDeviceMotion:"ondevicemotion" in b};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),e.supportStorage=!0}catch(d){}e.jsVendor=e.webkit?"webkit":e.firefox?"Moz":e.opera?"O":e.ie?"ms":"";e.cssVendor="-"+e.jsVendor+"-";return e}(),event:function(){var d="ontouchstart" in b;return{POINTER_START:d?"touchstart":"mousedown",POINTER_MOVE:d?"touchmove":"mousemove",POINTER_END:d?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElement:function(d){return f.getElementById(d)},getElementRect:function(o){try{var q=o.getBoundingClientRect()}catch(p){q={top:o.offsetTop,left:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight}}var m=(b.pageXOffset||g.scrollLeft)-(g.clientLeft||0)||0,d=(b.pageYOffset||g.scrollTop)-(g.clientTop||0)||0,r=b.getComputedStyle?b.getComputedStyle(o):o.currentStyle,s=parseInt;o=s(r.paddingLeft)+s(r.borderLeftWidth)||0;var t=s(r.paddingTop)+s(r.borderTopWidth)||0,n=s(r.paddingRight)+s(r.borderRightWidth)||0,r=s(r.paddingBottom)+s(r.borderBottomWidth)||0,s=q.top||0,j=q.left||0;return{left:j+m+o,top:s+d+t,width:q.right-n-j-o,height:q.bottom-r-s-t}},createElement:function(n,k){var m=f.createElement(n),j,e,d;for(j in k){if(e=k[j],"style"===j){for(d in e){m.style[d]=e[d]}}else{m[j]=e}}return m}}}();b.Hilo=a})(window);(function(b){b=b.Hilo;var a=function(){var m=function(d){var l={},c,e;for(c in d){e=d[c],n.hasOwnProperty(c)?n[c].call(this,e):l[c]=e}o(this.prototype,l)},n={Extends:function(c){var e=this.prototype,d=f(c.prototype);o(this,c);o(d,e);d.constructor=this;this.prototype=d;this.superclass=c.prototype},Mixes:function(d){d instanceof Array||(d=[d]);for(var e=this.prototype,c;c=d.shift();){o(e,c.prototype||c)}},Statics:function(c){o(this,c)}},f=function(){if(Object.__proto__){return function(d){return{__proto__:d}}}var c=function(){};return function(d){c.prototype=d;return new c}}(),o=function(p){for(var l=1,h=arguments.length;l<h;l++){var t=arguments[l],s,r;for(r in t){var q=t[r];!q||"object"!==typeof q||void 0===q.value&&"function"!==typeof q.get&&"function"!==typeof q.set?p[r]=q:(s=s||{},s[r]=q)}s&&k(p,s)}return p};try{var j=Object.defineProperty,k=Object.defineProperties;j({},"$",{value:0})}catch(g){"__defineGetter__" in Object&&(j=function(d,e,c){"value" in c&&(d[e]=c.value);"get" in c&&d.__defineGetter__(e,c.get);"set" in c&&d.__defineSetter__(e,c.set);return d},k=function(e,d){for(var c in d){d.hasOwnProperty(c)&&j(e,c,d[c])}return e})}return{create:function(c){c=c||{};var d=c.hasOwnProperty("constructor")?c.constructor:function(){};m.call(d,c);return d},mix:o}}();b.Class=a})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(d,f,e){this.type=d;this.target=f;this.detail=e;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}});if(b=b.Event){b=b.prototype;var h=b.stopImmediatePropagation;b.stopImmediatePropagation=function(){h&&h.call(this);this._stopped=!0}}a.Event={_listeners:null,on:function(d,j,f){var g=this._listeners=this._listeners||{};d=g[d]=g[d]||[];for(var g=0,e=d.length;g<e;g++){if(d[g].listener===j){return}}d.push({listener:j,once:f});return this},off:function(d,j){if(0==arguments.length){return this._listeners=null,this}var f=this._listeners&&this._listeners[d];if(f){if(1==arguments.length){return delete this._listeners[d],this}for(var g=0,e=f.length;g<e;g++){if(f[g].listener===j){f.splice(g,1);0===f.length&&delete this._listeners[d];break}}}return this},fire:function(e,o){var j,m;"string"===typeof e?m=e:(j=e,m=e.type);var g=this._listeners;if(!g){return !1}var f=g[m];if(f){f=f.slice(0);j=j||new c(m,this,o);if(j._stopped){return !1}for(var k=0;k<f.length;k++){var n=f[k];n.listener.call(this,j);n.once&&f.splice(k--,1)}0==f.length&&delete g[m];return !0}return !1}}})(window);(function(b){b=b.Hilo;var a=b.Class.create({constructor:function(k,l,f,m,g,j){this.a=k;this.b=l;this.c=f;this.d=m;this.tx=g;this.ty=j},concat:function(o){var p=arguments,r=this.a,q=this.b,s=this.c,m=this.d,f=this.tx,x=this.ty;if(6<=p.length){var y=p[0],z=p[1],A=p[2],j=p[3],n=p[4],p=p[5]}else{y=o.a,z=o.b,A=o.c,j=o.d,n=o.tx,p=o.ty}this.a=r*y+q*A;this.b=r*z+q*j;this.c=s*y+m*A;this.d=s*z+m*j;this.tx=f*y+x*A+n;this.ty=f*z+x*j+p;return this},rotate:function(n){var o=Math.sin(n);n=Math.cos(n);var f=this.a,p=this.b,k=this.c,m=this.d,j=this.tx,g=this.ty;this.a=f*n-p*o;this.b=f*o+p*n;this.c=k*n-m*o;this.d=k*o+m*n;this.tx=j*n-g*o;this.ty=j*o+g*n;return this},scale:function(c,f){this.a*=c;this.d*=f;this.c*=c;this.b*=f;this.tx*=c;this.ty*=f;return this},translate:function(c,f){this.tx+=c;this.ty+=f;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var k=this.a,l=this.b,f=this.c,m=this.d,g=this.tx,j=k*m-l*f;this.a=m/j;this.b=-l/j;this.c=-f/j;this.d=k/j;this.tx=(f*this.ty-m*g)/j;this.ty=-(k*this.ty-l*g)/j;return this},transformPoint:function(h,j,f){var k=h.x*this.a+h.y*this.c+this.tx,g=h.x*this.b+h.y*this.d+this.ty;j&&(k=k+0.5>>0,g=g+0.5>>0);if(f){return{x:k,y:g}}h.x=k;h.y=g;return h}});b.Matrix=a})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(e){this._targetFPS=e||30;this._interval=1000/this._targetFPS;this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(k){if(!this._intervalId){this._lastTime=+new Date;var e=this,m=this._interval,g=b.requestAnimationFrame||b[a.browser.jsVendor+"RequestAnimationFrame"];if(k&&g){var j=function(){e._tick()},f=function(){e._intervalId=setTimeout(f,m);g(j)}}else{f=function(){e._intervalId=setTimeout(f,m);e._tick()}}f()}},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var g=+new Date,e=g-this._lastTime,h=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1000/(this._tickTime/this._tickCount)+0.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=g-this._lastTime;this._lastTime=g;for(var g=0,f=h.length;g<f;g++){h[g].tick(e)}}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(e){if(!e||"function"!=typeof e.tick){throw Error("Ticker: The tick object must implement the tick method.")}this._tickers.push(e)},removeTick:function(f){var e=this._tickers;f=e.indexOf(f);0<=f&&e.splice(f,1)}});a.Ticker=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(e){this.init(e)},image:null,rect:null,split:null,domElement:null,init:function(g){var e=this,h=e.image;c.isDrawable(g)?e.image=g:a.copy(e,g,!0);g=e.image;if("string"===typeof g){if(h&&g===h.getAttribute("src")){g=e.image=h}else{e.image=null;var f=new Image;f.onload=function(){f.onload=null;e.init(f)};f.src=g;return}}g&&!e.rect&&(e.rect=[0,0,g.width,g.height])},Statics:{isDrawable:function(e){if(!e||!e.tagName){return !1}e=e.tagName.toLowerCase();return"img"===e||"canvas"===e||"video"===e}}});a.Drawable=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({load:function(k){var e=this,m=k.src,g="jsonp"==k.type;if(g){var j=k.callbackName||"callback",f=k.callback||"jsonp"+ ++c._count;b[f]||(b[f]=function(d){delete b[f]})}g&&(m+=(-1==m.indexOf("?")?"?":"&")+j+"="+f);k.noCache&&(m+=(-1==m.indexOf("?")?"?":"&")+"t="+ +new Date);g=document.createElement("script");g.type="text/javascript";g.async=!0;g.onload=function(d){e.onLoad(d)};g.onerror=function(d){e.onError(d)};g.src=m;k.id&&(g.id=k.id);document.getElementsByTagName("head")[0].appendChild(g)},onLoad:function(e){e=e.target;e.onload=e.onerror=null;return e},onError:function(f){var e=f.target;e.onload=e.onerror=null;return f},Statics:{_count:0}});a.ScriptLoader=c})(window);(function(b){b=b.Hilo;var a=b.Class.create({load:function(f){var g=this,c=new Image;f.crossOrigin&&(c.crossOrigin=f.crossOrigin);c.onload=function(d){g.onLoad(d)};c.onerror=c.onabort=function(d){g.onError(d)};c.src=f.src+(f.noCache?(-1==f.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(c){c=c.target;c.onload=c.onerror=c.onabort=null;return c},onError:function(c){var f=c.target;f.onload=f.onerror=f.onabort=null;return c}});b.ImageLoader=a})(window);(function(b){b=b.Hilo;var a=b.ImageLoader,c=b.ScriptLoader,h=b.Class.create({Mixes:b.Event,constructor:function(d){this._source=[];this.add(d)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(d){d&&(d=d instanceof Array?d:[d],this._source=this._source.concat(d));return this},get:function(d){if(d){for(var g=this._source,e=0;e<g.length;e++){var f=g[e];if(f.id===d||f.src===d){return f}}}return null},getContent:function(d){return(d=this.get(d))&&d.content},start:function(){this._loadNext();return this},_loadNext:function(){var d=this,m=d._source,g=m.length;if(d._loaded>=g){d.fire("complete")}else{if(d._currentIndex<g-1&&d._connections<d.maxConnections){var k=++d._currentIndex,m=m[k],f=d._getLoader(m);if(f){var e=f.onLoad,j=f.onError;f.onLoad=function(l){f.onLoad=e;f.onError=j;l=e&&e.call(f,l)||l.target;d._onItemLoad(k,l)};f.onError=function(l){f.onLoad=e;(f.onError=j)&&j.call(f,l);d._onItemError(k,l)};d._connections++}d._loadNext();f&&f.load(m)}}},_getLoader:function(d){var g=d.loader;if(g){return g}var e;if(!(e=d.type)){var f;if(d=d.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i)){f=d[1].toLowerCase()}e=f||null}switch(e){case"png":case"jpg":case"jpeg":case"gif":g=new a;break;case"js":case"jsonp":g=new c}return g},_onItemLoad:function(d,f){var e=this._source[d];e.loaded=!0;e.content=f;this._connections--;this._loaded++;this.fire("load",e);this._loadNext()},_onItemError:function(d,f){var e=this._source[d];e.error=f;this._connections--;this._loaded++;this.fire("error",e);this._loadNext()},getSize:function(d){for(var j=0,f=this._source,g=0;g<f.length;g++){var e=f[g],j=j+((d?e.loaded&&e.size:e.size)||0)}return j},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});b.LoadQueue=h})(window);(function(b){var a=b.Hilo;b=a.Class.create({Mixes:a.Event,constructor:function(c){a.copy(this,c,!0);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element){try{var c=this._element=new Audio;c.addEventListener("canplaythrough",this._onAudioEvent,!1);c.addEventListener("ended",this._onAudioEvent,!1);c.addEventListener("error",this._onAudioEvent,!1);c.src=this.src;c.volume=this.volume;c.load()}catch(f){c=this._element={},c.play=c.pause=function(){}}}return this},_onAudioEvent:function(c){var f=c.type;switch(f){case"canplaythrough":c.target.removeEventListener(f,this._onAudioEvent);this.loaded=!0;this.duration=this._element.duration;this.fire("load");this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){this.playing&&this.stop();this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._element.pause(),this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1);return this},setVolume:function(c){this.volume!=c&&(this.volume=c,this._element.volume=c);return this},setMute:function(c){this.muted!=c&&(this.muted=c,this._element.volume=c?0:this.volume);return this},Statics:{isSupported:null!==b.Audio}});a.HTMLAudio=b})(window);(function(h){var c=h.Hilo,j=c.Class,k=c.Event,a=function(){var d=h.AudioContext||h.webkitAudioContext,e=d?new d:null;return j.create({Mixes:k,constructor:function(b){c.copy(this,b,!0);this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=e;this._gainNode=e.createGain?e.createGain():e.createGainNode();this._gainNode.connect(e.destination);this._onAudioEvent=this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var b=new XMLHttpRequest;b.src=this.src;b.open("GET",this.src,!0);b.responseType="arraybuffer";b.onload=this._onAudioEvent;b.onprogress=this._onAudioEvent;b.onerror=this._onAudioEvent;b.send();this._buffer=!0}return this},_onAudioEvent:function(b){switch(b.type){case"load":b=b.target;b.onload=b.onprogress=b.onerror=null;this._context.decodeAudioData(b.response,this._onDecodeComplete,this._onDecodeError);break;case"ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case"progress":this.fire(b);break;case"error":this.fire(b)}},_onDecodeComplete:function(b){this._buffer=b;this.loaded=!0;this.duration=b.duration;this.fire("load");this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var b=this._context.createBufferSource();b.start||(b.start=b.noteOn,b.stop=b.noteOff);b.buffer=this._buffer;b.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;b.connect(this._gainNode);b.start(0,this._offset);this._audioNode=b;this._startTime=this._context.currentTime;this.playing=!0},_clearAudioNode:function(){var b=this._audioNode;b&&(b.onended=null,b.disconnect(0),this._audioNode=null)},play:function(){this.playing&&this.stop();this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1);return this},setVolume:function(b){this.volume!=b&&(this.volume=b,this._gainNode.gain.value=b);return this},setMute:function(b){this.muted!=b&&(this.muted=b,this._gainNode.gain.value=b?0:this.volume);return this},Statics:{isSupported:null!=d,enabled:!1,enable:function(){if(!this.enabled&&e){var b=e.createBufferSource();b.buffer=e.createBuffer(1,1,22050);b.connect(e.destination);b.start?b.start(0,0,0):b.noteOn(0,0,0);return this.enabled=!0}return this.enabled}}})}();c.WebAudio=a})(window);(function(b){var a=b.Hilo,c=a.HTMLAudio,h=a.WebAudio;a.WebSound={_audios:{},enableAudio:function(){h.isSupported&&h.enable()},getAudio:function(d){d=this._normalizeSource(d);var e=this._audios[d.src];e||(h.isSupported?e=new h(d):c.isSupported&&(e=new c(d)),this._audios[d.src]=e);return e},removeAudio:function(d){d="string"===typeof d?d:d.src;var e=this._audios[d];e&&(e.stop(),e.off(),this._audios[d]=null,delete this._audios[d])},_normalizeSource:function(d){var e={};"string"===typeof d?e={src:d}:a.copy(e,d);return e}}})(window);(function(b){var a=b.Hilo;b=a.Class.create({constructor:function(c){c=c||{};a.copy(this,c,!0)},renderType:null,canvas:null,stage:null,startDraw:function(c){return !0},draw:function(c){},endDraw:function(c){},transform:function(){},clear:function(g,h,f,j){},resize:function(c,f){}});a.Renderer=b})(window);(function(j){var h=j.Hilo,k=h.Class,l=h.Renderer,a=h.Drawable,m=function(){return k.create({Extends:l,constructor:function(b){m.superclass.constructor.call(this,b)},renderType:"dom",startDraw:function(b){var c=b.drawable=b.drawable||new a;c.domElement=c.domElement||h.createElement("div",{id:b.id,style:{position:"absolute"}});return b.visible},draw:function(b){m.setElementStyleByView(b)},resize:function(c,d){var b=this.canvas.style;b.width=c+"px";b.height=d+"px";"absolute"!=b.position&&(b.position="relative")},Statics:{setElementStyleByView:function(u,o){var g=h.browser.jsVendor,t=!1,s=u.parent,r=u.drawable,q=r.domElement,n=q.style,p=u._stateCache||(u._stateCache={});s&&(s=s.drawable&&s.drawable.domElement)&&s!=q.parentNode&&s.appendChild(q);this.cacheStateIfChanged(u,["visible"],p)&&(n.display=u.visible?"":"none");this.cacheStateIfChanged(u,["alpha"],p)&&(n.opacity=u.alpha);if(u.visible&&!(0>=u.alpha)){this.cacheStateIfChanged(u,["width"],p)&&(t=!0,n.width=u.width+"px");this.cacheStateIfChanged(u,["height"],p)&&(t=!0,n.height=u.height+"px");this.cacheStateIfChanged(u,["depth"],p)&&(n.zIndex=u.depth+1);this.cacheStateIfChanged(u,["clipChildren"],p)&&(n.overflow=u.clipChildren?"hidden":null);if(t||this.cacheStateIfChanged(u,["pivotX","pivotY"],p)){t=!0,n[g+"TransformOrigin"]=u.pivotX*u.width+"px "+u.pivotY*u.height+"px"}if(t||this.cacheStateIfChanged(u,["x","y","rotation","scaleX","scaleY"],p)){t=!0,n[g+"Transform"]="translate("+(u.x-u.pivotX*u.width)+"px, "+(u.y-u.pivotY*u.height)+"px)rotate("+u.rotation+"deg)scale("+u.scaleX+", "+u.scaleY+")"}o?n.pointerEvents="none":(n.pointerEvents||(n.pointerEvents="none"),this.cacheStateIfChanged(u,["background"],p)&&(n.backgroundColor=u.background),r.image&&(r.split?this.setElementStyleBySplit(p,u,t):this.setElementStyleByImage(p,u,t)))}},setElementStyleByImage:function(u,o,g){var t=o.drawable,s=t.domElement.style,r=t.rect,t=t.image.src;t!==u.image&&(u.image=t,s.backgroundImage="url("+t+")");if(r){var t=h.browser.jsVendor,q=r[0],n=r[1],p=r[2],r=r[3];q!==u.sx&&(u.sx=q,s.backgroundPositionX=-q+"px");n!==u.sy&&(u.sy=n,s.backgroundPositionY=-n+"px");!g||p==o.width&&r==o.height||(u=p/o.width,g=r/o.height,s.width=p+"px",s.height=r+"px",s[t+"TransformOrigin"]=o.pivotX*p+"px "+o.pivotY*r+"px",s[t+"Transform"]="translate("+(o.x-o.pivotX*p)+"px, "+(o.y-o.pivotY*r)+"px)rotate("+o.rotation+"deg)scale("+o.scaleX/u+", "+o.scaleY/g+")")}},setElementStyleBySplit:function(B,v,t){var A=v.drawable,z=v.width,y=v.height;v=h.browser.jsVendor;var x=A.image;t=x.src;var u=A.rect,w=u&&u[0]||0,s=u&&u[1]||0,r=u&&u[2]||x.width,x=u&&u[3]||x.height;if(t!==B.image||w!==B.sx||s!==B.sy){B.image=t;B.sx=w;B.sy=s;u=A.split;B=A.domScale9Image;if(null==B){B=[];for(var o=0;9>o;o++){var g=h.createElement("div",{style:{position:"absolute"}});A.domElement.appendChild(g);B[o]=g}A.domScale9Image=B}A=u[0];o=u[2];r=r-A-o;g=u[1];u=u[3];x=x-g-u;z=[[w+0,s+0,A,g,0,0,A,g],[w+A,s+0,o,g,A,0,z-A-r,g],[w+A+o,s+0,r,g,z-r,0,r,g],[w+0,s+g,A,u,0,g,A,y-g-x],[w+A,s+g,o,u,A,g,z-A-r,y-g-x],[w+A+o,s+g,r,u,z-r,g,r,y-g-x],[w+0,s+g+u,A,x,0,y-x,A,x],[w+A,s+g+u,o,x,A,y-x,z-A-r,x],[w+A+o,s+g+u,r,x,z-r,y-x,r,x]];for(o=0;9>o;o++){y=z[o],g=B[o],w=g.style,w.border="none",w.width=y[2]+"px",w.height=y[3]+"px",w.backgroundImage="url("+t+")",w.backgroundPositionX=-y[0]+"px",w.backgroundPositionY=-y[1]+"px",w[v+"TransformOrigin"]="0px 0px",w[v+"Transform"]="translate("+y[4]+"px, "+y[5]+"px) scale("+y[6]/y[2]*1.001+", "+y[7]/y[3]*1.001+")"}}},cacheStateIfChanged:function(n,p,g){var t,s,r,q,o=!1;t=0;for(s=p.length;t<s;t++){r=p[t],q=n[r],q!=g[r]&&(g[r]=q,o=!0)}return o}}})}();h.DOMRenderer=m})(window);(function(j){j=j.Hilo;var h=j.Matrix,k=Math.PI/180,l=j.Class.create({Extends:j.Renderer,Statics:{MAX_BATCH_NUM:2000,ATTRIBUTE_NUM:5,isSupport:null},renderType:"webgl",gl:null,constructor:function(e){l.superclass.constructor.call(this,e);e=this.gl=this.canvas.getContext("webgl",{stencil:!0})||this.canvas.getContext("experimental-webgl",{stencil:!0});e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);e.enable(e.BLEND);e.disable(e.CULL_FACE);e.disable(e.DEPTH_TEST);e.disable(e.STENCIL_TEST);this._initShaders();this.vertex2=new Float32Array(8);this.indexs2=new Uint16Array([0,1,2,1,2,3]);this.notextureShader.active();e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indexs2,e.STATIC_DRAW);e.bufferData(e.ARRAY_BUFFER,this.vertex2,e.STREAM_DRAW);this.maxBatchNum=l.MAX_BATCH_NUM;this.positionStride=4*l.ATTRIBUTE_NUM;var f=6*this.maxBatchNum;this.vertex=new Float32Array(this.maxBatchNum*l.ATTRIBUTE_NUM*4);this.indexs=new Uint16Array(f);for(var d=0,g=0;d<f;d+=6,g+=4){this.indexs[d+0]=g+0,this.indexs[d+1]=g+1,this.indexs[d+2]=g+2,this.indexs[d+3]=g+1,this.indexs[d+4]=g+2,this.indexs[d+5]=g+3}this.batchIndex=0;this.sprites=[];this.defaultShader.active();e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indexs,e.STATIC_DRAW);e.bufferData(e.ARRAY_BUFFER,this.vertex,e.STREAM_DRAW)},context:null,startDraw:function(b){return b.visible&&0<b.alpha?(b.__webglWorldMatrix=b.__webglWorldMatrix||new h(1,0,0,1,0,0),b.__webglRenderAlpha=b.__webglRenderAlpha||1,!0):!1},draw:function(A){var t=A.drawable,z=t&&t.image,y=A.background;(this.batchIndex>=this.maxBatchNum||y)&&this._renderBatches();if(A.clipChildren){this.stencilLevel=this.stencilLevel||0;var x=this.gl;0===this.stencilLevel?(x.enable(x.STENCIL_TEST),x.clear(x.STENCIL_BUFFER_BIT),x.stencilFunc(x.ALWAYS,1,255),x.stencilOp(x.KEEP,x.REPLACE,x.REPLACE)):x.stencilOp(x.KEEP,x.INCR,x.INCR);x.colorMask(!1,!1,!1,!1);this.notextureShader.active();this._renderBackground(A,{r:1,g:1,b:1});this.stencilLevel+=1;x.colorMask(!0,!0,!0,!0);x.stencilFunc(x.LEQUAL,this.stencilLevel,255);x.stencilOp(x.KEEP,x.KEEP,x.KEEP)}y&&(this.notextureShader.active(),this._renderBackground(A,y.toColorRgb()));if(z){this.defaultShader.active();var y=t.rect,w=t.split,t=A.width,x=A.height;if(w){var v=y&&y[0]||0,s=y&&y[1]||0,u=w[0],r=w[2],q=(y&&y[2]||z.width)-u-r,o=w[1],w=w[3],y=(y&&y[3]||z.height)-o-w;this._renderImage(A,z,v+0,s+0,u,o,0,0,u,o);this._renderImage(A,z,v+u,s+0,r,o,u,0,t-u-q,o);this._renderImage(A,z,v+u+r,s+0,q,o,t-q,0,q,o);this._renderImage(A,z,v+0,s+o,u,w,0,o,u,x-o-y);this._renderImage(A,z,v+u,s+o,r,w,u,o,t-u-q,x-o-y);this._renderImage(A,z,v+u+r,s+o,q,w,t-q,o,q,x-o-y);this._renderImage(A,z,v+0,s+o+w,u,y,0,x-y,u,y);this._renderImage(A,z,v+u,s+o+w,r,y,u,x-y,t-u-q,y);this._renderImage(A,z,v+u+r,s+o+w,q,y,t-q,x-y,q,y)}else{this._renderImage(A,z,y[0],y[1],y[2],y[3],0,0,t,x)}}},endDraw:function(b){b===this.stage&&this._renderBatches();b.clipChildren&&(this._renderBatches(),b=this.gl,--this.stencilLevel,b.stencilFunc(b.LEQUAL,this.stencilLevel,255),0==this.stencilLevel&&b.disable(this.gl.STENCIL_TEST))},transform:function(b){this._setConcatenatedMatrix(b,b.parent);0<b.alpha&&(b.__webglRenderAlpha=b.parent&&b.parent.__webglRenderAlpha?b.alpha*b.parent.__webglRenderAlpha:b.alpha)},clear:function(e,f,d,g){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(b,c){if(this.width!==b||this.height!==c){this.width=this.canvas.width=b,this.height=this.canvas.height=c,this.gl.viewport(0,0,b,c),this.activeShader.active(!0)}},_renderBackground:function(o,p){var n=this.gl,u=o.__webglRenderAlpha;n.uniform4f(this.activeShader.u_color,p.r/255*u,p.g/255*u,p.b/255*u,u);var t=o.width,s=o.height,u=-o.pivotX*t,r=o.pivotY*s-s,q=this.vertex2;q[0]=u;q[1]=r;q[2]=u+t;q[3]=r;q[4]=u;q[5]=r+s;q[6]=u+t;q[7]=r+s;t=o.__webglWorldMatrix;for(s=0;4>s;s++){u=q[2*s],r=q[2*s+1],q[2*s]=t.a*u+t.c*r+t.tx,q[2*s+1]=t.b*u+t.d*r+t.ty}n.bufferData(n.ARRAY_BUFFER,q,n.STREAM_DRAW);n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},_renderImage:function(x,p,w,v,u,t,s,q,n,o){p.texture||this.activeShader.uploadTexture(p);s=this._createVertexs(p,w,v,u,t,-x.pivotX*n+s,-x.pivotY*o+q,n,o);w=this.batchIndex*this.positionStride;v=this.vertex;q=x.__webglRenderAlpha;v[w+0]=s[0];v[w+1]=s[1];v[w+2]=s[2];v[w+3]=s[3];v[w+4]=q;v[w+5]=s[4];v[w+6]=s[5];v[w+7]=s[6];v[w+8]=s[7];v[w+9]=q;v[w+10]=s[8];v[w+11]=s[9];v[w+12]=s[10];v[w+13]=s[11];v[w+14]=q;v[w+15]=s[12];v[w+16]=s[13];v[w+17]=s[14];v[w+18]=s[15];v[w+19]=q;u=x.__webglWorldMatrix;for(t=0;4>t;t++){s=v[w+5*t],q=v[w+5*t+1],v[w+5*t]=u.a*s+u.c*q+u.tx,v[w+5*t+1]=u.b*s+u.d*q+u.ty}x.texture=p.texture;this.sprites[this.batchIndex++]=x},_renderBatches:function(){var e=this.gl;e.bufferSubData(e.ARRAY_BUFFER,0,this.vertex.subarray(0,this.batchIndex*this.positionStride));for(var e=0,f=null,d=0;d<this.batchIndex;d++){var g=this.sprites[d];f&&f!==g.texture&&(this._renderBatch(e,d),e=d);f=g.texture}this._renderBatch(e,this.batchIndex);this.batchIndex=0},_renderBatch:function(e,f){var d=this.gl,g=f-e;0<g&&(d.bindTexture(d.TEXTURE_2D,this.sprites[e].texture),d.drawElements(d.TRIANGLES,6*g,d.UNSIGNED_SHORT,12*e))},_initShaders:function(){this.defaultShader=new m(this,{v:"attribute vec2 a_position;\nattribute vec2 a_TexCoord;\nattribute float a_alpha;\nuniform mat3 u_projectionTransform;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n    v_TexCoord = a_TexCoord;\n    v_alpha = a_alpha;\n}\n",f:"\nprecision mediump float;\nuniform sampler2D u_Sampler;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_alpha;\n}\n"},{attributes:[{name:"a_position",count:2,offset:0,stride:20},{name:"a_TexCoord",count:2,offset:8,stride:20},{name:"a_alpha",count:1,offset:16,stride:20}],uniforms:["u_projectionTransform","u_Sampler"]});this.notextureShader=new m(this,{v:"attribute vec2 a_position;\nuniform mat3 u_projectionTransform;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n}\n",f:"\nprecision mediump float;\nuniform vec4 u_color;\nvoid main(){\n    gl_FragColor = u_color;\n}\n"},{attributes:[{name:"a_position",count:2,offset:0,stride:8}],uniforms:["u_projectionTransform","u_color"]})},_createVertexs:function(z,s,y,x,w,v,u,t,o){var q=this.__tempVertexs||[],p=z.width;z=z.height;x/=p;w/=z;s/=p;y/=z;1<x+s&&(x=1-s);1<w+y&&(w=1-y);y=1-y-w;u=-o-u;p=0;q[p++]=v;q[p++]=u;q[p++]=s;q[p++]=y;q[p++]=v+t;q[p++]=u;q[p++]=s+x;q[p++]=y;q[p++]=v;q[p++]=u+o;q[p++]=s;q[p++]=y+w;q[p++]=v+t;q[p++]=u+o;q[p++]=s+x;q[p++]=y+w;return q},_setConcatenatedMatrix:function(n,p){var e=n.__webglWorldMatrix,t=1,s=0,r=360-n.rotation%360,q=n.scaleX,o=n.scaleY;r&&(s=r*k,t=Math.cos(s),s=Math.sin(s));e.a=t*q;e.b=s*q;e.c=-s*o;e.d=t*o;e.tx=n.x;e.ty=-n.y;t=p.pivotX;q=p.pivotY;if(0!=t||0!=q){e.tx-=t*p.width,e.ty+=t*p.height}t=p.__webglWorldMatrix;e.concat(t.a,t.b,t.c,t.d,t.tx,t.ty)}}),a={},m=function(e,d,f){this.renderer=e;this.gl=e.gl;this.program=this._createProgram(this.gl,d.v,d.f);f=f||{};this.attributes=f.attributes||[];this.uniforms=f.uniforms||[];this.vertexBuffer=this.gl.createBuffer();this.indexBuffer=this.gl.createBuffer()};m.prototype={active:function(n){var g=this,r=g.renderer,q=r.activeShader;if(q!==g||n){var p=g.gl,o=g.program;o&&p&&(q&&q.attributes.forEach(function(b){p.disableVertexAttribArray(q[b.name])}),r.activeShader=g,p.useProgram(o),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,g.indexBuffer),p.bindBuffer(p.ARRAY_BUFFER,g.vertexBuffer),g.attributes.forEach(function(b){attribute=b.name;g[attribute]=g[attribute]||p.getAttribLocation(o,attribute);p.enableVertexAttribArray(g[attribute]);p.vertexAttribPointer(g[attribute],b.count,p.FLOAT,!1,b.stride,b.offset)}),g.uniforms.forEach(function(b){g[b]=g[b]||p.getUniformLocation(o,b)}),g.width!==r.width||g.height!==r.height)&&(g.width=r.width,g.height=r.height,g.uploadProjectionTransform(!0))}},uploadTexture:function(b){var f=this.gl;if(a[b.src]){b.texture=a[b.src]}else{var e=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,1);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.uniform1i(this.u_Sampler,0);f.bindTexture(f.TEXTURE_2D,null);b.texture=e;a[b.src]=e}},uploadProjectionTransform:function(d){var c=this.gl;if(!this._projectionTransformElements||d){this._projectionTransformElements=new Float32Array([2/this.width,0,0,0,2/this.height,0,-1,1,1])}c.uniformMatrix3fv(this.u_projectionTransform,!1,this._projectionTransformElements)},_createProgram:function(f,e,n){e=this._createShader(f,f.VERTEX_SHADER,e);var g=this._createShader(f,f.FRAGMENT_SHADER,n);if(!e||!g){return null}if(n=f.createProgram()){if(f.attachShader(n,e),f.attachShader(n,g),f.linkProgram(n),f.deleteShader(g),f.deleteShader(e),!f.getProgramParameter(n,f.LINK_STATUS)){return e=f.getProgramInfoLog(n),console.log("Failed to link program: "+e),f.deleteProgram(n),null}}return n},_createShader:function(e,d,f){if(d=e.createShader(d)){if(e.shaderSource(d,f),e.compileShader(d),!e.getShaderParameter(d,e.COMPILE_STATUS)){return f=e.getShaderInfoLog(d),console.log("Failed to compile shader: "+f),e.deleteShader(d),null}}return d}};l.isSupport=function(){if(void 0===this._isSupport){var b=document.createElement("canvas");b.getContext&&(b.getContext("webgl")||b.getContext("experimental-webgl"))?this._isSupport=!0:this._isSupport=!1}return this._isSupport};j.WebGLRenderer=l})(window);(function(b){b=b.Hilo;var a=b.Class.create({Extends:b.Renderer,constructor:function(c){a.superclass.constructor.call(this,c);this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(c){return c.visible&&0<c.alpha?(this.context.save(),!0):!1},draw:function(q){var r=this.context,v=q.width,s=q.height;q.clipChildren&&(r.beginPath(),r.rect(0,0,v,s),r.clip());var w=q.background;w&&(r.fillStyle=w,r.fillRect(0,0,v,s));var n=q.drawable;if(q=n&&n.image){var w=n.rect,j=n.split;if(j){var n=w&&w[0]||0,p=w&&w[1]||0,o=j[0],x=j[2],y=(w&&w[2]||q.width)-o-x,m=j[1],j=j[3],w=(w&&w[3]||q.height)-m-j;r.drawImage(q,n+0,p+0,o,m,0,0,o,m);r.drawImage(q,n+o,p+0,x,m,o,0,v-o-y,m);r.drawImage(q,n+o+x,p+0,y,m,v-y,0,y,m);r.drawImage(q,n+0,p+m,o,j,0,m,o,s-m-w);r.drawImage(q,n+o,p+m,x,j,o,m,v-o-y,s-m-w);r.drawImage(q,n+o+x,p+m,y,j,v-y,m,y,s-m-w);r.drawImage(q,n+0,p+m+j,o,w,0,s-w,o,w);r.drawImage(q,n+o,p+m+j,x,w,o,s-w,v-o-y,w);r.drawImage(q,n+o+x,p+m+j,y,w,v-y,s-w,y,w)}else{r.drawImage(q,w[0],w[1],w[2],w[3],0,0,v,s)}}},endDraw:function(c){this.context.restore()},transform:function(w){var x=this.context,z=w.x,y=w.y,A=w.width,q=w.height,o=w.scaleX,v=w.scaleY,s=w.pivotX,B=w.pivotY,C=w.rotation%360,p=w.align;if(p){if("function"===typeof p){w.align()}else{var j=w.parent;if(j){var n=j.width,j=j.height;switch(p){case"TL":y=z=0;break;case"T":z=n-A>>1;y=0;break;case"TR":z=n-A;y=0;break;case"L":z=0;y=j-q>>1;break;case"C":z=n-A>>1;y=j-q>>1;break;case"R":z=n-A;y=j-q>>1;break;case"BL":z=0;y=j-q;break;case"B":z=n-A>>1;y=j-q;break;case"BR":z=n-A,y=j-q}}}}0==z&&0==y||x.translate(z,y);0!=C&&x.rotate(C*Math.PI/180);1==o&&1==v||x.scale(o,v);0==s&&0==B||x.translate(-s*A,-B*q);0<w.alpha&&(x.globalAlpha*=w.alpha)},clear:function(g,h,f,j){this.context.clearRect(g,h,f,j)},resize:function(c,f){this.canvas.width=c;this.canvas.height=f}});b.CanvasRenderer=a})(window);(function(h){var c=h.Hilo,j=c.Class,k=c.Event,a=c.Matrix;h=function(){function b(E,C,B){for(var A=E.length,z=C.length,y,w,v,l,u,t,s=0,o=y=0;o<A;o++){y=E[o];w=E[o<A-1?o+1:0];s=y.y-w.y;y=w.x-y.x;w=Math.sqrt(s*s+y*y);s/=w;y/=w;w=v=E[0].x*s+E[0].y*y;for(var D=1;D<A;D++){t=E[D].x*s+E[D].y*y,t>v?v=t:t<w&&(w=t)}l=u=C[0].x*s+C[0].y*y;for(D=1;D<z;D++){t=C[D].x*s+C[D].y*y,t>u?u=t:t<l&&(l=t)}w<l?(w=l-v,s=-s,y=-y):w-=u;if(0<=w){return !1}w>B.overlap&&(B.overlap=w,B.normal.x=s,B.normal.y=y)}return B}return j.create({Mixes:k,constructor:function(d){d=d||{};this.id=this.id||d.id||c.getUid("View");c.copy(this,d,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var e=this,d;d=e.parent;){e=d}return e.canvas&&e.renderer?e:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(e,d){"number"===typeof d?e.addChildAt(this,d):e.addChild(this);return this},removeFromParent:function(){var d=this.parent;d&&d.removeChild(this);return this},fixSize:function(){if(!this.width||!this.height){var d=this.drawable&&this.drawable.rect;d&&(this.width=d[2],this.height=d[3])}},getBounds:function(){for(var A=this.width,z=this.height,y=this.getConcatenatedMatrix(),A=this.boundsArea||[{x:0,y:0},{x:A,y:0},{x:A,y:z},{x:0,y:z}],z=[],x,w,v,u,t,l,s,q=0,o=A.length;q<o;q++){x=y.transformPoint(A[q],!0,!0),w=x.x,v=x.y,0==q?(u=t=w,l=s=v):(u>w?u=w:t<w&&(t=w),l>v?l=v:s<v&&(s=v)),z[q]=x}z.x=u;z.y=l;z.width=t-u;z.height=s-l;return z},getConcatenatedMatrix:function(w){for(var v=new a(1,0,0,1,0,0),u=this;u!=w&&u.parent;u=u.parent){var s=1,q=0,p=u.rotation%360,x=u.pivotX,o=u.pivotY,l=u.scaleX,n=u.scaleY;p&&(q=p*Math.PI/180,s=Math.cos(q),q=Math.sin(q));0!=x&&(v.tx-=x*u.width);0!=o&&(v.ty-=o*u.height);v.concat(s*l,q*l,-q*n,s*n,u.x,u.y)}return v},hitTestPoint:function(G,E,C){var B=this.getBounds(),A=G>=B.x&&G<=B.x+B.width&&E>=B.y&&E<=B.y+B.height;if(A&&C){for(var A=0,z=!1,w,v,l,u,t=0,s=B.length;t<s;t++){var o=B[t],F=B[(t+1)%s];if(o.y==F.y&&E==o.y&&(o.x>F.x?(w=F.x,v=o.x):(w=o.x,v=F.x),G>=w&&G<=v)){z=!0;continue}o.y>F.y?(l=F.y,u=o.y):(l=o.y,u=F.y);if(!(E<l||E>u)){var D=(E-o.y)*(F.x-o.x)/(F.y-o.y)+o.x;D>G?A++:D==G&&(z=!0);o.x>G&&o.y==E&&(o=B[(s+t-1)%s],(o.y<E&&F.y>E||o.y>E&&F.y<E)&&A++)}}A=z||1==A%2}for(B=this.parent;A&&B;){B.clipChildren&&(A=B.hitTestPoint(G,E,C)),B=B.parent}return A},hitTestObject:function(l,g){var o=this.getBounds(),n=l.getBounds(),m=o.x<=n.x+n.width&&n.x<=o.x+o.width&&o.y<=n.y+n.height&&n.y<=o.y+o.height;m&&g&&(m=(m=b(o,n,{overlap:-Infinity,normal:{x:0,y:0}}))?b(n,o,m):!1);for(o=this.parent;m&&o;){o.clipChildren&&(m=o.polygonCollision(l,g)),o=this.parent}return !!m},_render:function(e,d){this.onUpdate&&!1===this.onUpdate(d)||!e.startDraw(this)||(e.transform(this),this.render(e,d),e.endDraw(this))},_fireMouseEvent:function(e){e.eventCurrentTarget=this;this.fire(e);if("mousemove"==e.type){if(!this.__mouseOver){this.__mouseOver=!0;var d=c.copy({},e);d.type="mouseover";this.fire(d)}}else{"mouseout"==e.type&&(this.__mouseOver=!1)}d=this.parent;e._stopped||e._stopPropagationed||!d||("mouseout"==e.type||"touchout"==e.type?d.hitTestPoint(e.stageX,e.stageY,!0)||d._fireMouseEvent(e):d._fireMouseEvent(e))},onUpdate:null,render:function(e,d){this.fixSize();e.draw(this)},toString:function(){for(var e,d=this;d;){e=e?d.id+"."+e:d.id,d=d.parent}return e}})}();c.View=h})(window);(function(h){var c=h.Hilo,j=c.Drawable,k=c.DOMRenderer,a=c.Class.create({Extends:c.View,constructor:function(b){b=b||{};this.id=this.id||b.id||c.getUid("Container");a.superclass.constructor.call(this,b);this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getChildrenNum:function(){return this.children.length},addChildAt:function(l,m){var q=this.children,p=q.length,o=l.parent;m=0>m?0:m>p?p:m;var n=this.getChildIndex(l);if(n==m){return this}0<=n?(q.splice(n,1),m=m==p?p-1:m):o&&o.removeChild(l);q.splice(m,0,l);0>n?this._updateChildren(m):this._updateChildren(n<m?n:m,(n<m?m:n)+1);l.drawable&&l.drawable.domElement&&(this._domContainerFlag=!0);return this},addChild:function(g){for(var l=this.children.length,o=arguments,n=0,m=o.length;n<m;n++){this.addChildAt(o[n],l+n)}return this},removeChildAt:function(l){var m=this.children;if(0>l||l>=m.length){return null}var q=m[l];if(q){var p=q.drawable,o=p&&p.domElement;if(o){var n=o.parentNode;n&&n.removeChild(o);p.domElement=null;this._domContainerFlag=!0}q.parent=null;q.depth=-1}m.splice(l,1);this._updateChildren(l);return q},removeChild:function(d){return this.removeChildAt(this.getChildIndex(d))},removeChildById:function(g){for(var l=this.children,o,n=0,m=l.length;n<m;n++){if(o=l[n],o.id===g){return this.removeChildAt(n),o}}return null},removeAllChildren:function(){for(;this.children.length;){this.removeChildAt(0)}return this},getChildAt:function(d){var e=this.children;return 0>d||d>=e.length?null:e[d]},getChildById:function(g){for(var l=this.children,o,n=0,m=l.length;n<m;n++){if(o=l[n],o.id===g){return o}}return null},getChildIndex:function(d){return this.children.indexOf(d)},setChildIndex:function(g,l){var o=this.children,n=o.indexOf(g);if(0<=n&&n!=l){var m=o.length;l=0>l?0:l>=m?m-1:l;o.splice(n,1);o.splice(l,0,g);this._updateChildren()}return this},swapChildren:function(g,l){var o=this.children,n=this.getChildIndex(g),m=this.getChildIndex(l);g.depth=m;o[m]=g;l.depth=n;o[n]=l},swapChildrenAt:function(g,l){var o=this.children,n=this.getChildAt(g),m=this.getChildAt(l);n.depth=l;o[l]=n;m.depth=g;o[g]=m},sortChildren:function(e){var f=this.children;if("string"==typeof e){var g=e;e=function(l,d){return d[g]-l[g]}}f.sort(e);this._updateChildren()},_updateChildren:function(g,l){var o=this.children,n;l=l||o.length;for(var m=g||0;m<l;m++){n=o[m],n.depth=m+1,n.parent=this}},contains:function(d){for(;d=d.parent;){if(d===this){return !0}}return !1},getViewAtPoint:function(s,v,q,p,o){if(this.clipChildren&&!this.hitTestPoint(s,v,q)){return null}for(var n=p?[]:null,w=this.children,x,m,l=w.length-1;0<=l;l--){if(x=w[l],!(!x||!x.visible||0>=x.alpha||o&&!x.pointerEnabled)){if(x.children&&x.children.length&&(!o||x.pointerChildren)&&(m=x.getViewAtPoint(s,v,q,p,o)),m){if(p){m.length&&(n=n.concat(m))}else{return m}}else{if(x.hitTestPoint(s,v,q)){if(p){n.push(x)}else{return x}}}}}return p&&n.length?n:null},render:function(o,b){a.superclass.render.call(this,o,b);"dom"!=o.renderType&&(this._domContainerFlag&&(this._domContainerFlag=!1,this._domContainerUpdate()),this.drawable&&this.drawable.domElement&&k.setElementStyleByView(this,!0));var n=this.children.slice(0),m,l,d;m=0;for(l=n.length;m<l;m++){d=n[m],d._render(o,b)}},_domContainerUpdate:function(){var e=this.children,g=!1;i=0;for(len=e.length;i<len;i++){if(child=e[i],child.drawable&&child.drawable.domElement){g=!0;break}}var e=this.parent,m=this.drawable,l=m&&m.domElement;g?l||(m=this.drawable=this.drawable||new j,m.domElement=m.domElement||c.createElement("div",{style:{position:"absolute"}}),e&&e._domContainerUpdate()):l&&(l&&((g=l.parentNode)&&g.removeChild(l),this.drawable=m.domElement=null),e&&e._domContainerUpdate())}});c.Container=a})(window);(function(j){var h=j.Hilo,k=h.CanvasRenderer,l=h.DOMRenderer,a=h.WebGLRenderer,m=h.Class.create({Extends:h.Container,constructor:function(f){f=f||{};this.id=this.id||f.id||h.getUid("Stage");m.superclass.constructor.call(this,f);this._initRenderer(f);var c=this.width,n=this.height,g=this.updateViewport();f.width||(c=g&&g.width||320);f.height||(n=g&&g.height||480);this.resize(c,n,!0)},pivotX:0,pivotY:0,paused:!1,canvas:null,renderer:null,viewport:null,_initRenderer:function(b){var e=b.canvas,d=b.container;b=b.renderType||"canvas";"string"===typeof e&&(e=h.getElement(e));"string"===typeof d&&(d=h.getElement(d));e||(e=h.createElement("dom"===b?"div":"canvas",{style:{position:"absolute",overflow:"hidden"}}));this.canvas=e;d&&d.appendChild(e);e={canvas:e,stage:this};switch(b){case"dom":this.renderer=new l(e);break;case"webgl":a.isSupport()?this.renderer=new a(e):this.renderer=new k(e);break;default:this.renderer=new k(e)}},_render:function(z,y){if((!this.onUpdate||!1!==this.onUpdate(y))&&z.startDraw(this)){var x=this.width,w=this.height,v=this.scaleX,u=this.scaleY,t=this._height,s=this._scaleX,o=this._scaleY,q=this.canvas,p=q.style;if(this._width!==x||s!==v){this._width=x,this._scaleX=v,q.width=x,p.width=v*x+"px"}if(t!==w||o!==u){this._height=w,this._scaleY=u,q.height=w,p.height=u*w+"px"}(x=this.drawable&&this.drawable.domElement)&&!x.parentNode&&(x.style.overflow="hidden",q.appendChild(x));z.clear(0,0,this.width,this.height);this.render(z,y);z.endDraw(this)}},addTo:function(d){var c=this.canvas;c.parentNode!==d&&d.appendChild(c);return this},tick:function(b){this.paused||this._render(this.renderer,b)},resize:function(e,d,f){if(f||this.width!==e||this.height!==d){this.width=e,this.height=d,this.renderer.resize(e,d),this.updateViewport()}},updateViewport:function(){var d=this.canvas,c=null;d.parentNode&&(c=this.viewport=h.getElementRect(d));return c},enableDOMEvent:function(o,n){var t=this,s=t.canvas,r="string"===typeof o?[o]:o;n=!1!==n;for(var q=t._domListener||(t._domListener=function(b){t._onDOMEvent(b)}),p=0;p<r.length;p++){o=r[p],n?s.addEventListener(o,q,!1):s.removeEventListener(o,q)}return t},_onDOMEvent:function(n){var g=n.type,u=0==g.indexOf("touch"),s=n;if(u){var r=n.touches,s=n.changedTouches,s=r&&r.length?r[0]:s&&s.length?s[0]:null}var r=s.pageX||s.clientX,s=s.pageY||s.clientY,q=this.viewport||this.updateViewport();n.stageX=r=(r-q.left)/this.scaleX;n.stageY=s=(s-q.top)/this.scaleY;n.stopPropagation=function(){this._stopPropagationed=!0};var r=this.getViewAtPoint(r,s,!0,!1,!0)||this,s=this.canvas,q=this._eventTarget,p="mouseout"===g;if(q&&(!(q==r||q.contains&&q.contains(r))||p)){if(p="touchmove"===g?"touchout":"mousemove"===g||p||!r?"mouseout":null){var o=h.copy({},n);o.type=p;o.eventTarget=q;q._fireMouseEvent(o)}n.lastEventTarget=q;this._eventTarget=null}r&&r.pointerEnabled&&"mouseout"!==g&&(n.eventTarget=this._eventTarget=r,r._fireMouseEvent(n));u||(s.style.cursor=r&&r.pointerEnabled&&r.useHandCursor?"pointer":"");h.browser.android&&"touchmove"===g&&n.preventDefault()},_domContainerUpdate:function(){m.superclass._domContainerUpdate.call(this);var b=this.drawable&&this.drawable.domElement;b&&!b.parentNode&&this.canvas.parentNode&&this.canvas.parentNode.appendChild(b)}});h.Stage=m})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Bitmap");h.superclass.constructor.call(this,d);this.drawable=new c(d);if(!this.width||!this.height){if(d=this.drawable.rect){this.width=d[2],this.height=d[3]}}},setImage:function(d,f,e){this.drawable.init({image:d,rect:f,split:e});f&&(this.width=f[2],this.height=f[3]);return this}});a.Bitmap=h})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Sprite");h.superclass.constructor.call(this,d);this._frames=[];this._frameNames={};this._frameCallbacks=[];this.drawable=new c;d.frames&&this.setFrames(d.frames)},_frames:null,_frameNames:null,_frameIndex:0,_framePaused:!1,_frameElapsed:0,_frameCallbacks:null,loop:!0,duration:1,setFrames:function(o){if(o instanceof Array){this._frames=o;this._frameNames={};for(var n=0,p=o.length;n<p;n++){var m=o[n];m.name&&(this._frameNames[m.name]=m)}}else{var p=o.image,n=o.rect||[0,0,p.width,p.height],m=n[0],l=n[1],k=o.width||n[2],j=o.height||n[3],q=Math.floor(n[2]/k);o=o.total||q*Math.floor(n[3]/j);for(var r=[],n=0;n<o;n++){r[n]={image:p,rect:[m+n%q*k,l+j*Math.floor(n/q),k,j]}}this.setFrames(r)}return this},getFrame:function(d){if("number"===typeof d){var e=this._frames;return 0>d||d>=e.length?null:e[d]}return this._frameNames[d]},getFrameIndex:function(f){if(null==f||void 0==f){return this._frameIndex}var l=this._frames,g=l.length,k=-1;if("number"===typeof f){k=f}else{if(f="string"===typeof f?this._frameNames[f]:f){for(var j=0;j<g;j++){if(f===l[j]){k=j;break}}}}return k},getFrameTotal:function(){return this._frames?this._frames.length:0},setFrameCallback:function(d,f){var e=this.getFrameIndex(d);-1<e&&(this._frameCallbacks[e]=f);return this},play:function(){this._framePaused=!1;return this},stop:function(){this._framePaused=!0;return this},"goto":function(e,j){var f=this._frames.length,g=this.getFrameIndex(e);this._frameIndex=0>g?0:g>=f?f-1:g;this._framePaused=j||this._framePaused;this._frameElapsed=0;return this},_render:function(d,j){var f=this._nextFrame(j);if(f!=this._frameIndex){this._frameIndex=f;var g=this._frameCallbacks[f];g&&g.call(this);f=this._frames[f];this.drawable.init(f);this.width=f.rect[2];this.height=f.rect[3]}h.superclass._render.call(this,d,j)},_nextFrame:function(f){var l=this._frameIndex;if(this._framePaused){return l}var g=this._frames,k=g.length,g=g[l];if(g.stop||!this.loop&&l>=k-1){return this.stop(),l}f=this._frameElapsed+f;var j=g.duration||this.duration;f>j?(this._frameElapsed=f-j,null!=g.next?l=this.getFrameIndex(g.next):l>=k-1?l=0:l++):this._frameElapsed=f;return l}});a.Sprite=h})(window);(function(b){var a=b.Hilo,c=a.Bitmap,h=a.Class.create({Extends:a.Container,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Button");h.superclass.constructor.call(this,d);this._cfg=d;this._bmp=(new c({pivotX:0.5,pivotY:0.5})).addTo(this);this.setState(h.UP)},pivotX:0,pivotY:0,downScale:1.2,upState:null,downState:null,disabledState:null,useHandCursor:!0,_bmp:null,_text:null,_image:null,_state:null,_enabled:!0,setText:function(d){"string"===typeof d&&(d={text:d});null==this._text&&(this._text=(new a.Text({pivotX:0.5,pivotY:0.5,textAlign:"center"})).addTo(this));a.copy(this._text,d,!0)},setImage:function(d){"string"===typeof d&&(d={image:d});null==this._image&&(this._image=(new c({pivotX:0.5,pivotY:0.5})).addTo(this));this._image.setImage(d.image,d.rect,d.split);a.copy(this._image,d,!0)},setEnabled:function(d){this._enabled!=d&&(d?this.setState(h.UP):this.setState(h.DISABLED));return this},setState:function(d){if(this._state!==d){this._state=d;this._enabled=this.pointerEnabled=d!==h.DISABLED;var e;switch(d){case h.UP:this.scaleX=this._downScaleX||this.scaleX;this.scaleY=this._downScaleY||this.scaleY;e=this.upState;break;case h.DOWN:this._downScaleX=this.scaleX;this._downScaleY=this.scaleY;this.scaleY=this.scaleX=this.downScale;e=this.downState;break;case h.DISABLED:e=this.disabledState}e&&(d=this._cfg,this._bmp.setImage(e.image||d.image,e.rect||d.rect,e.split||d.split))}return this},fire:function(d,e){if(this._enabled){switch("string"===typeof d?d:d.type){case"mousedown":case"touchstart":case"touchmove":this.setState(h.DOWN);break;case"mouseup":case"mouseout":case"touchend":case"touchout":this.setState(h.UP)}return h.superclass.fire.call(this,d,e)}},Statics:{UP:"up",DOWN:"down",DISABLED:"disabled"}});a.Button=h})(window);(function(l){var k=l.Hilo;l=k.Class;var m=k.Drawable,n=k.View,h=k.createElement("canvas"),o=h&&h.getContext("2d"),j=l.create({Extends:n,constructor:function(a){a=a||{};this.id=this.id||a.id||k.getUid("Text");j.superclass.constructor.call(this,a);this.font=a.font||"16px arial";a.width?(this.width=a.width,this._autoWidth=!1):(this.width=256,this._autoWidth=!0);a.height?(this.height=a.height,this._autoHeight=!1):(this.height=256,this._autoHeight=!0)},font:null,text:null,color:"#000",textAlign:null,outline:!1,spacing:0,dirty:!0,render:function(f,e){if("canvas"===f.renderType){this._check(),this._draw(f.context)}else{if("dom"===f.renderType){var p=this.drawable.domElement,g=p.style;this._check()&&(g.font=this.font,g.color=this.color,g.textAlign=this.textAlign,g.lineHeight=this._fontHeight+this.spacing+"px",g["word-break"]="break-all",g["word-wrap"]="break-word",p.innerHTML=this.text.replace("\n","</br>"));f.draw(this);this._autoWidth?(this.width=p.offsetWidth,g.width=null):g.width=this.width+"px";this._autoHeight?(this.height=p.offsetHeight,g.height=null):g.height=this.height+"px"}else{this._check()&&this._cache(),f.draw(this)}}},_draw:function(E){var C=this.text.toString();if(C){E.font=this.font;E.textAlign=this.textAlign;E.textBaseline="top";var B=C.split(/\r\n|\r|\n|<br(?:[ \/])*>/),A=0,z=0,y=this._fontHeight+this.spacing,w,c,v,C=[];w=0;for(len=B.length;w<len;w++){if(c=B[w],v=E.measureText(c).width,v<=this.width||this._autoWidth){C.push({text:c,y:z}),A<v&&(A=v),z+=y}else{v="";var u=0,t,s,D;s=0;for(wlen=c.length;s<wlen;s++){D=c[s],t=E.measureText(v+D).width,t>this.width?(C.push({text:v,y:z}),A<u&&(A=u),z+=y,v=D):(u=t,v+=D),s==wlen-1&&(C.push({text:v,y:z}),v!==D&&A<t&&(A=t),z+=y)}}}this._autoWidth&&(this.width=A);this._autoHeight&&(this.height=z);(B=this.background)&&E!==o&&(E.fillStyle=B,E.fillRect(0,0,this.width,this.height));this.outline?E.strokeStyle=this.color:E.fillStyle=this.color;for(w=0;w<C.length;w++){c=C[w],this._drawTextLine(E,c.text,c.y)}}},_drawTextLine:function(g,f,r){var q=0,p=this.width;switch(this.textAlign){case"center":q=p>>1;break;case"right":q=p}this.outline?g.strokeText(f,q,r):g.fillText(f,q,r)},_check:function(){return this._font!==this.font?(this._font=this.font,this._fontHeight=j.measureFontHeight(this.font),!0):this._text!==this.text?(this._text=this.text,!0):this._color!==this.color?(this._color=this.color,!0):this._textAlign!==this.textAlign?(this._textAlign=this.textAlign,!0):this.dirty},_cache:function(){h.width=this.width;h.height=this.height;o.clearRect(0,0,h.width,h.height);this._draw(o);var b=new Image;b.src=h.toDataURL();this.drawable=this.drawable||new m;this.drawable.init(b)},Statics:{measureFontHeight:function(e){e=k.createElement("div",{style:{font:e,position:"absolute"},innerHTML:"PM\u56fd\u5bb6"});var d=document.documentElement;d.appendChild(e);var f=e.offsetHeight;d.removeChild(e);return f}}});k.Text=j})(window);(function(b){var a=b.Hilo,c=a.Bitmap,h=a.Class.create({Extends:a.Container,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Label");h.superclass.constructor.call(this,d);d.font&&this.genGlyphs(d.font);this.pointerChildren=!1},glyphs:null,spacing:0,text:"",genGlyphs:function(j){var q=j.text.toString(),k=j.image,p=j.rect||[0,0,k.width,k.height],o=j.width||p[2],n=j.height||p[3];j=j.col||Math.floor(p[2]/o);for(var p={},m=0,l=q.length;m<l;m++){charStr=q.charAt(m),p[charStr]={image:k,rect:[m%j*o,n*Math.floor(m/j),o,n]}}this.glyphs=p},render:function(o,n){var p=this.text.toString(),m=this.spacing,l=this.glyphs;if(this._text!=p||this._spacing!=m||this._glyphs!=l){this._text=p;this._spacing=m;this._glyphs=l;var m=p.length,j,q,r,s=r=0,d=0;for(j=0;j<m;j++){if(q=p.charAt(j),q=l[q]){d=r+(0<r?this.spacing:0),this.children[j]?(r=this.children[j],r.setImage(q.image,q.rect)):(r=h._createBitmap(q),this.addChild(r)),r.x=d,r=d+q.rect[2],s=Math.max(s,q.rect[3])}}for(j=this.children.length-1;j>=m;j--){h._releaseBitmap(this.children[j]),this.removeChild(this.children[j])}this.width=r;this.height=s}h.superclass.render.call(this,o,n)},Statics:{_pool:[],_createBitmap:function(d){var e;0<h._pool.length?(e=h._pool.pop(),e.setImage(d.image,d.rect)):e=new c({image:d.image,rect:d.rect});return e},_releaseBitmap:function(d){h._pool.push(d)}}});a.Label=h})(window);(function(h){var c=h.Hilo,j=c.Drawable,k=c.DOMRenderer,a=c.Class.create({Extends:c.View,constructor:function(b){b=b||{};this.id=this.id||b.id||c.getUid("Element");a.superclass.constructor.call(this,b);this.drawable=new j;this.element=this.drawable.domElement=b.element||c.createElement("div",{style:{position:"absolute"}});this.element.id=this.id},element:null,_render:function(d,e){this.onUpdate&&!1===this.onUpdate(e)||this.visible&&this.render(d,e)},render:function(d,e){this._element!=this.element&&(this.drawable.domElement=this.element);"dom"!=d.renderType?k.setElementStyleByView(this):d.draw(this)}});c.Element=a})(window);(function(b){var a=b.Hilo,c=a.Container,h=a.Class.create({Extends:c,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Scroll");h.superclass.constructor.call(this,d);this.pointerChildren=this.clipChildren=!0;this.view=d.view||new c({width:d.innerWidth||this.width,height:d.innerHeight||this.height});this.addChild(this.view)},view:null,fire:function(d,f){switch("string"===typeof d?d:d.type){case"mousedown":case"touchstart":this._scrollFlag=!0;this._scrollX=d.stageX;this._scrollY=d.stageY;break;case"mousemove":case"touchmove":if(this._scrollFlag){var e=this.view;e.x+=d.stageX-this._scrollX;e.y+=d.stageY-this._scrollY;this._scrollX=d.stageX;this._scrollY=d.stageY;0<e.x&&(e.x=0);e.x+e.width<this.width&&(e.x=this.width-e.width);0<e.y&&(e.y=0);e.y+e.height<this.height&&(e.y=this.height-e.height)}break;case"mouseup":case"mouseout":case"touchend":case"touchout":this._scrollFlag=!1}return h.superclass.fire.call(this,d,f)}});a.Scroll=h})(window);