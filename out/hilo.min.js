(function(b){b.console=b.console||{log:function(){}};b=Array.prototype;var a=b.slice;b.indexOf=b.indexOf||function(g,h){h=h||0;var f=this.length,i;if(0==f||h>=f){return -1}0>h&&(h=f+h);for(i=h;i<f;i++){if(this[i]===g){return i}}return -1};b=Function.prototype;b.bind=b.bind||function(h){function i(){var c=j.concat(a.call(arguments));return f.apply(this instanceof i?this:h,c)}var f=this,j=a.call(arguments,1),g=function(){};g.prototype=f.prototype;i.prototype=new g;return i}})(window);(function(b){for(var a=0,c=["ms","moz","webkit","o"],h=0;h<c.length&&!b.requestAnimationFrame;++h){b.requestAnimationFrame=b[c[h]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[c[h]+"CancelAnimationFrame"]||b[c[h]+"CancelRequestAnimationFrame"]}b.requestAnimationFrame||(b.requestAnimationFrame=function(d,i){var e=(new Date).getTime(),f=Math.max(0,16-(e-a)),g=b.setTimeout(function(){d(e+f)},f);a=e+f;return g});b.cancelAnimationFrame||(b.cancelAnimationFrame=function(d){clearTimeout(d)})})(window);(function(b){var a=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;String.prototype.toColorRgb=function(){var c=this.toLowerCase();return c&&a.test(c)?4===c.length?{r:parseInt("0x"+c.charAt(1)+c.charAt(1)),g:parseInt("0x"+c.charAt(2)+c.charAt(2)),b:parseInt("0x"+c.charAt(3)+c.charAt(3))}:{r:parseInt("0x"+c.slice(1,3)),g:parseInt("0x"+c.slice(3,5)),b:parseInt("0x"+c.slice(5,7))}:{r:0,g:0,b:0}}})(window);(function(b){var a=function(){var f=document,g=f.documentElement,c=0;return{getUid:function(h){var d=++c;if(h){var e=h.charCodeAt(h.length-1);48<=e&&57>=e&&(h+="_");return h+d}return d},viewToString:function(d){for(var e;d;){e=e?d.id+"."+e:d.id,d=d.parent}return e},copy:function(d,e,i){for(var j in e){if(!i||d.hasOwnProperty(j)||void 0!==d[j]){d[j]=e[j]}}return d},browser:function(){var d=navigator.userAgent,d={iphone:/iphone/i.test(d),ipad:/ipad/i.test(d),ipod:/ipod/i.test(d),ios:/iphone|ipad|ipod/i.test(d),android:/android/i.test(d),webkit:/webkit/i.test(d),chrome:/chrome/i.test(d),safari:/safari/i.test(d),firefox:/firefox/i.test(d),ie:/msie/i.test(d),opera:/opera/i.test(d),supportTouch:"ontouchstart" in b,supportCanvas:null!=f.createElement("canvas").getContext,supportStorage:!1,supportOrientation:"orientation" in b,supportDeviceMotion:"ondevicemotion" in b};try{localStorage.setItem("hilo","hilo"),localStorage.removeItem("hilo"),d.supportStorage=!0}catch(n){}var e=d.jsVendor=d.webkit?"webkit":d.firefox?"Moz":d.opera?"O":d.ie?"ms":"",j=d.cssVendor="-"+e+"-",l=f.createElement("div"),m=l.style,i=void 0!=m[e+"Transform"];if(e=void 0!=m[e+"Perspective"]){l.id="test3d",m=f.createElement("style"),m.textContent="@media ("+j+"transform-3d){#test3d{height:3px}}",f.head.appendChild(m),g.appendChild(l),e=3==l.offsetHeight,f.head.removeChild(m),g.removeChild(l)}d.supportTransform=i;d.supportTransform3D=e;return d}(),event:function(){var d="ontouchstart" in b;return{POINTER_START:d?"touchstart":"mousedown",POINTER_MOVE:d?"touchmove":"mousemove",POINTER_END:d?"touchend":"mouseup"}}(),align:{TOP_LEFT:"TL",TOP:"T",TOP_RIGHT:"TR",LEFT:"L",CENTER:"C",RIGHT:"R",BOTTOM_LEFT:"BL",BOTTOM:"B",BOTTOM_RIGHT:"BR"},getElementRect:function(o){try{var p=o.getBoundingClientRect()}catch(n){p={top:o.offsetTop,left:o.offsetLeft,width:o.offsetWidth,height:o.offsetHeight}}var j=(b.pageXOffset||g.scrollLeft)-(g.clientLeft||0)||0,l=(b.pageYOffset||g.scrollTop)-(g.clientTop||0)||0,d=b.getComputedStyle?getComputedStyle(o):o.currentStyle,s=parseInt;o=s(d.paddingLeft)+s(d.borderLeftWidth)||0;var i=s(d.paddingTop)+s(d.borderTopWidth)||0,u=s(d.paddingRight)+s(d.borderRightWidth)||0,d=s(d.paddingBottom)+s(d.borderBottomWidth)||0,s=p.top||0,m=p.left||0;return{left:m+j+o,top:s+l+i,width:p.right-u-m-o,height:p.bottom-d-s-i}},createElement:function(e,i){var j=f.createElement(e),l,m,n;for(l in i){if(m=i[l],"style"===l){for(n in m){j.style[n]=m[n]}}else{j[l]=m}}return j},getElement:function(d){return f.getElementById(d)}}}();a.undefined=void 0;b.Hilo=a})(window);(function(b){b=b.Hilo;var a=function(){var l=function(d){var h={},c,o;for(c in d){o=d[c],m.hasOwnProperty(c)?m[c].call(this,o):h[c]=o}n(this.prototype,h)},m={Extends:function(c){var e=this.prototype,h=f(c.prototype);n(this,c);n(h,e);h.constructor=this;this.prototype=h;this.superclass=c.prototype},Mixes:function(d){d instanceof Array||(d=[d]);for(var e=this.prototype,c;c=d.shift();){n(e,c.prototype||c)}},Statics:function(c){n(this,c)}},f=function(){if(Object.__proto__){return function(d){return{__proto__:d}}}var c=function(){};return function(d){c.prototype=d;return new c}}(),n=function(k){for(var h=1,s=arguments.length;h<s;h++){var r=arguments[h],q,o;for(o in r){var p=r[o];!p||"object"!==typeof p||void 0===p.value&&"function"!==typeof p.get&&"function"!==typeof p.set?k[o]=p:(q=q||{},q[o]=p)}q&&i(k,q)}return k};try{var g=Object.defineProperty,i=Object.defineProperties;g({},"$",{value:0})}catch(j){"__defineGetter__" in Object&&(g=function(d,e,c){"value" in c&&(d[e]=c.value);"get" in c&&d.__defineGetter__(e,c.get);"set" in c&&d.__defineSetter__(e,c.set);return d},i=function(d,c){for(var e in c){c.hasOwnProperty(e)&&g(d,e,c[e])}return d})}return{create:function(c){c=c||{};var d=c.hasOwnProperty("constructor")?c.constructor:function(){};l.call(d,c);return d},mix:n}}();b.Class=a})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(d,f,e){this.type=d;this.target=f;this.detail=e;this.timeStamp=+new Date},type:null,target:null,detail:null,timeStamp:0,stopImmediatePropagation:function(){this._stopped=!0}});if(b=b.Event){b=b.prototype;var h=b.stopImmediatePropagation;b.stopImmediatePropagation=function(){h&&h.call(this);this._stopped=!0}}a.Event={_listeners:null,on:function(d,i,e){var f=this._listeners=this._listeners||{};d=f[d]=f[d]||[];for(var f=0,g=d.length;f<g;f++){if(d[f].listener===i){return}}d.push({listener:i,once:e});return this},off:function(d,i){if(0==arguments.length){return this._listeners=null,this}var e=this._listeners&&this._listeners[d];if(e){if(1==arguments.length){return delete this._listeners[d],this}for(var f=0,g=e.length;f<g;f++){if(e[f].listener===i){e.splice(f,1);0===e.length&&delete this._listeners[d];break}}}return this},fire:function(e,n){var f,i;"string"===typeof e?i=e:(f=e,i=e.type);var j=this._listeners;if(!j){return !1}var m=j[i];if(m){m=m.slice(0);f=f||new c(i,this,n);if(f._stopped){return !1}for(var g=0;g<m.length;g++){var l=m[g];l.listener.call(this,f);l.once&&m.splice(g--,1)}0==m.length&&delete j[i];return !0}return !1}}})(window);(function(b){b=b.Hilo;var a=b.Class.create({constructor:function(i,j,f,l,g,h){this.a=i;this.b=j;this.c=f;this.d=l;this.tx=g;this.ty=h},concat:function(t){var u=arguments,x=this.a,w=this.b,y=this.c,m=this.d,o=this.tx,i=this.ty;if(6<=u.length){var z=u[0],j=u[1],p=u[2],s=u[3],l=u[4],u=u[5]}else{z=t.a,j=t.b,p=t.c,s=t.d,l=t.tx,u=t.ty}this.a=x*z+w*p;this.b=x*j+w*s;this.c=y*z+m*p;this.d=y*j+m*s;this.tx=o*z+i*p+l;this.ty=o*j+i*s+u;return this},rotate:function(m){var n=Math.sin(m);m=Math.cos(m);var f=this.a,o=this.b,g=this.c,i=this.d,j=this.tx,l=this.ty;this.a=f*m-o*n;this.b=f*n+o*m;this.c=g*m-i*n;this.d=g*n+i*m;this.tx=j*m-l*n;this.ty=j*n+l*m;return this},scale:function(c,f){this.a*=c;this.d*=f;this.c*=c;this.b*=f;this.tx*=c;this.ty*=f;return this},translate:function(c,f){this.tx+=c;this.ty+=f;return this},identity:function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this},invert:function(){var i=this.a,j=this.b,f=this.c,l=this.d,g=this.tx,h=i*l-j*f;this.a=l/h;this.b=-j/h;this.c=-f/h;this.d=i/h;this.tx=(f*this.ty-l*g)/h;this.ty=-(i*this.ty-j*g)/h;return this},transformPoint:function(h,i,f){var j=h.x*this.a+h.y*this.c+this.tx,g=h.x*this.b+h.y*this.d+this.ty;i&&(j=j+0.5>>0,g=g+0.5>>0);if(f){return{x:j,y:g}}h.x=j;h.y=g;return h}});b.Matrix=a})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(e){this._targetFPS=e||30;this._interval=1000/this._targetFPS;this._tickers=[]},_paused:!1,_targetFPS:0,_interval:0,_intervalId:null,_tickers:null,_lastTime:0,_tickCount:0,_tickTime:0,_measuredFPS:0,start:function(j){if(!this._intervalId){this._lastTime=+new Date;var e=this,l=this._interval,f=b.requestAnimationFrame||b[a.browser.jsVendor+"RequestAnimationFrame"];if(j&&f){var g=function(){e._tick()},i=function(){e._intervalId=setTimeout(i,l);f(g)}}else{i=function(){e._intervalId=setTimeout(i,l);e._tick()}}i()}},stop:function(){clearTimeout(this._intervalId);this._intervalId=null;this._lastTime=0},pause:function(){this._paused=!0},resume:function(){this._paused=!1},_tick:function(){if(!this._paused){var g=+new Date,e=g-this._lastTime,h=this._tickers;++this._tickCount>=this._targetFPS?(this._measuredFPS=1000/(this._tickTime/this._tickCount)+0.5>>0,this._tickTime=this._tickCount=0):this._tickTime+=g-this._lastTime;this._lastTime=g;for(var g=0,f=h.length;g<f;g++){h[g].tick(e)}}},getMeasuredFPS:function(){return this._measuredFPS},addTick:function(e){if(!e||"function"!=typeof e.tick){throw Error("Ticker: The tick object must implement the tick method.")}this._tickers.push(e)},removeTick:function(f){var e=this._tickers;f=e.indexOf(f);0<=f&&e.splice(f,1)}});a.Ticker=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({constructor:function(e){this.init(e)},image:null,rect:null,init:function(g){var e=this,h=e.image;c.isDrawable(g)?e.image=g:a.copy(e,g,!0);g=e.image;if("string"===typeof g){if(h&&g===h.getAttribute("src")){g=e.image=h}else{e.image=null;var f=new Image;f.onload=function(){f.onload=null;e.init(f)};f.src=g;return}}g&&!e.rect&&(e.rect=[0,0,g.width,g.height])},Statics:{isDrawable:function(e){if(!e||!e.tagName){return !1}e=e.tagName.toLowerCase();return"img"===e||"canvas"===e||"video"===e}}});a.Drawable=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({load:function(h){var e=h.src,i="jsonp"==h.type;if(i){var f=h.callbackName||"callback",g=h.callback||"jsonp"+ ++c._count;b[g]||(b[g]=function(d){delete b[g]})}i&&(e+=(-1==e.indexOf("?")?"?":"&")+f+"="+g);h.noCache&&(e+=(-1==e.indexOf("?")?"?":"&")+"t="+ +new Date);i=document.createElement("script");i.type="text/javascript";i.async=!0;i.onload=this.onLoad.bind(this);i.onerror=this.onError.bind(this);i.src=e;h.id&&(i.id=h.id);document.getElementsByTagName("head")[0].appendChild(i)},onLoad:function(e){e=e.target;e.onload=e.onerror=null;return e},onError:function(f){var e=f.target;e.onload=e.onerror=null;return f},Statics:{_count:0}});a.ScriptLoader=c})(window);(function(b){var a=b.Hilo,c=a.Class.create({load:function(f){var e=this,g=new Image;f.crossOrigin&&(g.crossOrigin=f.crossOrigin);g.onload=function(){e.onLoad(g)};g.onerror=g.onabort=e.onError.bind(g);g.src=f.src+(f.noCache?(-1==f.src.indexOf("?")?"?":"&")+"t="+ +new Date:"")},onLoad:function(e){e=e||b.event;e.onload=e.onerror=e.onabort=null;return e},onError:function(f){var e=f.target;e.onload=e.onerror=e.onabort=null;return f}});a.ImageLoader=c})(window);(function(b){b=b.Hilo;var a=b.ImageLoader,c=b.ScriptLoader,h=b.Class.create({Mixes:b.Event,constructor:function(d){this._source=[];this.add(d)},maxConnections:2,_source:null,_loaded:0,_connections:0,_currentIndex:-1,add:function(d){d&&(d=d instanceof Array?d:[d],this._source=this._source.concat(d));return this},get:function(d){if(d){for(var g=this._source,e=0;e<g.length;e++){var f=g[e];if(f.id===d||f.src===d){return f}}}return null},getContent:function(d){return(d=this.get(d))&&d.content},start:function(){this._loadNext();return this},_loadNext:function(){var f=this,n=f._source,g=n.length;if(f._loaded>=g){f.fire("complete")}else{if(f._currentIndex<g-1&&f._connections<f.maxConnections){var i=++f._currentIndex,n=n[i],j=f._getLoader(n);if(j){var m=j.onLoad,l=j.onError;j.onLoad=function(d){j.onLoad=m;j.onError=l;d=m&&m.call(j,d)||d.target;f._onItemLoad(i,d)};j.onError=function(d){j.onLoad=m;(j.onError=l)&&l.call(j,d);f._onItemError(i,d)};f._connections++}f._loadNext();j&&j.load(n)}}},_getLoader:function(d){var g=d.loader;if(g){return g}var e;if(!(e=d.type)){var f;if(d=d.src.match(/\/?[^/]+\.(\w+)(\?\S+)?$/i)){f=d[1].toLowerCase()}e=f||null}switch(e){case"png":case"jpg":case"jpeg":case"gif":g=new a;break;case"js":case"jsonp":g=new c}return g},_onItemLoad:function(d,f){var e=this._source[d];e.loaded=!0;e.content=f;this._connections--;this._loaded++;this.fire("load",e);this._loadNext()},_onItemError:function(d,f){var e=this._source[d];e.error=f;this._connections--;this._loaded++;this.fire("error",e);this._loadNext()},getSize:function(d){for(var i=0,e=this._source,f=0;f<e.length;f++){var g=e[f],i=i+((d?g.loaded&&g.size:g.size)||0)}return i},getLoaded:function(){return this._loaded},getTotal:function(){return this._source.length}});b.LoadQueue=h})(window);(function(b){var a=b.Hilo;b=a.Class.create({Mixes:a.Event,constructor:function(c){a.copy(this,c,!0);this._onAudioEvent=this._onAudioEvent.bind(this)},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_element:null,load:function(){if(!this._element){try{var c=this._element=new Audio;c.addEventListener("canplaythrough",this._onAudioEvent,!1);c.addEventListener("ended",this._onAudioEvent,!1);c.addEventListener("error",this._onAudioEvent,!1);c.src=this.src;c.volume=this.volume;c.load()}catch(f){c=this._element={},c.play=c.pause=function(){}}}return this},_onAudioEvent:function(c){var f=c.type;switch(f){case"canplaythrough":c.target.removeEventListener(f,this._onAudioEvent);this.loaded=!0;this.duration=this._element.duration;this.fire("load");this.autoPlay&&this._doPlay();break;case"ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case"error":this.fire("error")}},_doPlay:function(){this.playing||(this._element.volume=this.muted?0:this.volume,this._element.play(),this.playing=!0)},play:function(){this.playing&&this.stop();this._element?this.loaded&&this._doPlay():(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._element.pause(),this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._element.pause(),this._element.currentTime=0,this.playing=!1);return this},setVolume:function(c){this.volume!=c&&(this.volume=c,this._element.volume=c);return this},setMute:function(c){this.muted!=c&&(this.muted=c,this._element.volume=c?0:this.volume);return this},Statics:{isSupported:null!==b.Audio}});a.HTMLAudio=b})(window);(function(h){var c=h.Hilo,i=c.Class,j=c.Event,a=function(){var d=h.AudioContext||h.webkitAudioContext,e=d?new d:null;return i.create({Mixes:j,constructor:function(b){c.copy(this,b,!0);this._init()},src:null,loop:!1,autoPlay:!1,loaded:!1,playing:!1,duration:0,volume:1,muted:!1,_context:null,_gainNode:null,_buffer:null,_audioNode:null,_startTime:0,_offset:0,_init:function(){this._context=e;this._gainNode=e.createGain?e.createGain():e.createGainNode();this._gainNode.connect(e.destination);this._onAudioEvent=this._onAudioEvent.bind(this);this._onDecodeComplete=this._onDecodeComplete.bind(this);this._onDecodeError=this._onDecodeError.bind(this)},load:function(){if(!this._buffer){var b=new XMLHttpRequest;b.src=this.src;b.open("GET",this.src,!0);b.responseType="arraybuffer";b.onload=this._onAudioEvent;b.onprogress=this._onAudioEvent;b.onerror=this._onAudioEvent;b.send();this._buffer=!0}return this},_onAudioEvent:function(b){switch(b.type){case"load":b=b.target;b.onload=b.onprogress=b.onerror=null;this._context.decodeAudioData(b.response,this._onDecodeComplete,this._onDecodeError);break;case"ended":this.playing=!1;this.fire("end");this.loop&&this._doPlay();break;case"progress":this.fire(b);break;case"error":this.fire(b)}},_onDecodeComplete:function(b){this._buffer=b;this.loaded=!0;this.duration=b.duration;this.fire("load");this.autoPlay&&this._doPlay()},_onDecodeError:function(){this.fire("error")},_doPlay:function(){this._clearAudioNode();var b=this._context.createBufferSource();b.start||(b.start=b.noteOn,b.stop=b.noteOff);b.buffer=this._buffer;b.onended=this._onAudioEvent;this._gainNode.gain.value=this.muted?0:this.volume;b.connect(this._gainNode);b.start(0,this._offset);this._audioNode=b;this._startTime=this._context.currentTime;this.playing=!0},_clearAudioNode:function(){var b=this._audioNode;b&&(b.onended=null,b.disconnect(0),this._audioNode=null)},play:function(){this.playing&&this.stop();this.loaded?this._doPlay():this._buffer||(this.autoPlay=!0,this.load());return this},pause:function(){this.playing&&(this._audioNode.stop(0),this._offset+=this._context.currentTime-this._startTime,this.playing=!1);return this},resume:function(){this.playing||this._doPlay();return this},stop:function(){this.playing&&(this._audioNode.stop(0),this._audioNode.disconnect(),this._offset=0,this.playing=!1);return this},setVolume:function(b){this.volume!=b&&(this.volume=b,this._gainNode.gain.value=b);return this},setMute:function(b){this.muted!=b&&(this.muted=b,this._gainNode.gain.value=b?0:this.volume);return this},Statics:{isSupported:null!=d,enabled:!1,enable:function(){if(!this.enabled&&e){var f=e.createBufferSource();f.buffer=e.createBuffer(1,1,22050);f.connect(e.destination);f.start?f.start(0,0,0):f.noteOn(0,0,0);return this.enabled=!0}return this.enabled}}})}();c.WebAudio=a})(window);(function(b){var a=b.Hilo,c=a.HTMLAudio,h=a.WebAudio;a.WebSound={_audios:{},enableAudio:function(){h.isSupported&&h.enable()},getAudio:function(d){d=this._normalizeSource(d);var e=this._audios[d.src];e||(h.isSupported?e=new h(d):c.isSupported&&(e=new c(d)),this._audios[d.src]=e);return e},removeAudio:function(e){e="string"===typeof e?e:e.src;var f=this._audios[e];f&&(f.stop(),f.off(),this._audios[e]=null,delete this._audios[e])},_normalizeSource:function(e){var f={};"string"===typeof e?f={src:e}:a.copy(f,e);return f}}})(window);(function(b){var a=b.Hilo;b=a.Class.create({constructor:function(c){c=c||{};a.copy(this,c,!0)},renderType:null,canvas:null,stage:null,startDraw:function(c){return !0},draw:function(c){},endDraw:function(c){},transform:function(){},clear:function(g,h,f,i){},resize:function(c,f){},setElementStyleByView:function(p){var s=a.browser.jsVendor,u=!1,t=p.parent,w=p.drawable,u=w.domElement,m=u.style,n=p._stateCache||(p._stateCache={});if(!p.width&&!p.height){var g=w.rect;g&&(g[2]||g[3])&&(p.width=g[2],p.height=g[3])}t&&(g=t.drawable&&t.drawable.domElement)&&g!=u.parentNode&&g.appendChild(u);this.cacheStateIfChanged(p,["visible"],n)&&(m.display=p.visible?"":"none");this.cacheStateIfChanged(p,["alpha"],n)&&(m.opacity=p.alpha);if(p.visible&&!(0>=p.alpha)){this.cacheStateIfChanged(p,["width"],n)&&(m.width=p.width+"px");this.cacheStateIfChanged(p,["height"],n)&&(m.height=p.height+"px");this.cacheStateIfChanged(p,["depth"],n)&&(m.zIndex=p.depth+1);if(u=this.cacheStateIfChanged(p,["pivotX","pivotY"],n)){var t=p.pivotX,x=p.pivotY;if(g=w.rect){var i=g[2],o=g[3],j=g[4],g=g[5];if(j||g){t-=j-0.5*i,x-=g-0.5*o}}m[s+"TransformOrigin"]=t+"px "+x+"px"}if(this.cacheStateIfChanged(p,["x","y","rotation","scaleX","scaleY"],n)||u){m[s+"Transform"]=this.getTransformCSS(p)}this.cacheStateIfChanged(p,["background"],n)&&(m.backgroundColor=p.background);m.pointerEvents||(m.pointerEvents="none");if(p=w.image){if(p=p.src,p!==n.image&&(n.image=p,m.backgroundImage="url("+p+")"),g=w.rect){w=g[0],p=g[1],w!==n.sx&&(n.sx=w,m.backgroundPositionX=-w+"px"),p!==n.sy&&(n.sy=p,m.backgroundPositionY=-p+"px")}}}},cacheStateIfChanged:function(m,n,f){var o,g,i,j,l=!1;o=0;for(g=n.length;o<g;o++){i=n[o],j=m[i],j!=f[i]&&(f[i]=j,l=!0)}return l},getTransformCSS:function(f){var g=a.browser.supportTransform3D,c=g?"3d":"";return"translate"+c+"("+(f.x-f.pivotX)+"px, "+(f.y-f.pivotY)+(g?"px, 0px)":"px)")+"rotate"+c+(g?"(0, 0, 1, ":"(")+f.rotation+"deg)scale"+c+"("+f.scaleX+", "+f.scaleY+(g?", 1)":")")}});a.Renderer=b})(window);(function(i){var h=i.Hilo,j=h.Class,k=h.Renderer,a=h.Drawable,l=function(){return j.create({Extends:k,constructor:function(b){l.superclass.constructor.call(this,b)},renderType:"dom",startDraw:function(g){var m=g.drawable=g.drawable||new a,n;if(!(n=m.domElement)){var q=g.tagName||"div";n=m.image;var r=g.width||n&&n.width,p=g.height||n&&n.height,o=h.createElement(q),b=o.style;g.id&&(o.id=g.id);b.position="absolute";b.left=(g.left||0)+"px";b.top=(g.top||0)+"px";b.width=r+"px";b.height=p+"px";"canvas"==q?(o.width=r,o.height=p,n&&(q=o.getContext("2d"),r=m.rect||[0,0,r,p],q.drawImage(n,r[0],r[1],r[2],r[3],g.x||0,g.y||0,g.width||r[2],g.height||r[3]))):(b.opacity=void 0!=g.alpha?g.alpha:1,g.clipChildren&&(b.overflow="hidden"),n&&n.src&&(b.backgroundImage="url("+n.src+")",b.backgroundPosition=-(g.rectX||0)+"px "+-(g.rectY||0)+"px"));n=o}m.domElement=n;return g.visible},draw:function(b){this.setElementStyleByView(b)},resize:function(d,c){var e=this.canvas.style;e.width=d+"px";e.height=c+"px";"absolute"!=e.position&&(e.position="relative")}})}();h.DOMRenderer=l})(window);(function(i){i=i.Hilo;var h=i.Matrix,j=Math.PI/180,k=i.Class.create({Extends:i.Renderer,Statics:{MAX_BATCH_NUM:2000,ATTRIBUTE_NUM:5,isSupport:null},renderType:"webgl",gl:null,constructor:function(e){k.superclass.constructor.call(this,e);e=this.gl=this.canvas.getContext("webgl",{stencil:!0})||this.canvas.getContext("experimental-webgl",{stencil:!0});e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);e.enable(e.BLEND);e.disable(e.CULL_FACE);e.disable(e.DEPTH_TEST);e.disable(e.STENCIL_TEST);this._initShaders();this.vertex2=new Float32Array(8);this.indexs2=new Uint16Array([0,1,2,1,2,3]);this.notextureShader.active();e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indexs2,e.STATIC_DRAW);e.bufferData(e.ARRAY_BUFFER,this.vertex2,e.STREAM_DRAW);this.maxBatchNum=k.MAX_BATCH_NUM;this.positionStride=4*k.ATTRIBUTE_NUM;var d=6*this.maxBatchNum;this.vertex=new Float32Array(this.maxBatchNum*k.ATTRIBUTE_NUM*4);this.indexs=new Uint16Array(d);for(var f=0,g=0;f<d;f+=6,g+=4){this.indexs[f+0]=g+0,this.indexs[f+1]=g+1,this.indexs[f+2]=g+2,this.indexs[f+3]=g+1,this.indexs[f+4]=g+2,this.indexs[f+5]=g+3}this.batchIndex=0;this.sprites=[];this.defaultShader.active();e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indexs,e.STATIC_DRAW);e.bufferData(e.ARRAY_BUFFER,this.vertex,e.STREAM_DRAW)},context:null,startDraw:function(b){return b.visible&&0<b.alpha?(b===this.stage&&this.clear(),b.__webglWorldMatrix=b.__webglWorldMatrix||new h(1,0,0,1,0,0),b.__webglRenderAlpha=b.__webglRenderAlpha||1,!0):!1},draw:function(g){var f=g.drawable,m=f&&f.image,f=f&&f.rect,o=g.background,p=g.width,n=g.height;!f||p||n||(g.width=f[2],g.height=f[3]);(this.batchIndex>=this.maxBatchNum||o)&&this._renderBatches();g.clipChildren&&(this.stencilLevel=this.stencilLevel||0,p=this.gl,0===this.stencilLevel?(p.enable(p.STENCIL_TEST),p.clear(p.STENCIL_BUFFER_BIT),p.stencilFunc(p.ALWAYS,1,255),p.stencilOp(p.KEEP,p.REPLACE,p.REPLACE)):p.stencilOp(p.KEEP,p.INCR,p.INCR),p.colorMask(!1,!1,!1,!1),this.notextureShader.active(),this._renderBackground(g,{r:1,g:1,b:1}),this.stencilLevel+=1,p.colorMask(!0,!0,!0,!0),p.stencilFunc(p.LEQUAL,this.stencilLevel,255),p.stencilOp(p.KEEP,p.KEEP,p.KEEP));o&&(this.notextureShader.active(),this._renderBackground(g,o.toColorRgb()));m&&(this.defaultShader.active(),this._renderImage(g,m,f))},endDraw:function(b){b===this.stage&&this._renderBatches();b.clipChildren&&(b=this.gl,--this.stencilLevel,b.stencilFunc(b.LEQUAL,this.stencilLevel,255),0==this.stencilLevel&&(this._renderBatches(),b.disable(this.gl.STENCIL_TEST)))},transform:function(b){this._setConcatenatedMatrix(b,b.parent);0<b.alpha&&(b.__webglRenderAlpha=b.parent&&b.parent.__webglRenderAlpha?b.alpha*b.parent.__webglRenderAlpha:b.alpha)},clear:function(e,d,f,g){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},resize:function(d,c){if(this.width!==d||this.height!==c){this.width=this.canvas.width=d,this.height=this.canvas.height=c,this.gl.viewport(0,0,d,c),this.activeShader.active(!0)}},_renderBackground:function(n,m){var o=this.gl,t=n.__webglRenderAlpha;o.uniform4f(this.activeShader.u_color,m.r/255*t,m.g/255*t,m.b/255*t,t);var s=n.width,r=n.height,t=-n.pivotX,q=n.pivotY-r,p=this.vertex2;p[0]=t;p[1]=q;p[2]=t+s;p[3]=q;p[4]=t;p[5]=q+r;p[6]=t+s;p[7]=q+r;s=n.__webglWorldMatrix;for(r=0;4>r;r++){t=p[2*r],q=p[2*r+1],p[2*r]=s.a*t+s.c*q+s.tx,p[2*r+1]=s.b*t+s.d*q+s.ty}o.bufferData(o.ARRAY_BUFFER,p,o.STREAM_DRAW);o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0)},_renderImage:function(z,y,s){y.texture||this.activeShader.uploadTexture(y);var x=s[2],w=s[3],v=s[4],t=s[5],u=z.width,q=z.height,r=-z.pivotX,o=-z.pivotY;if(v||t){r=r+v-0.5*x,o=o+t-0.5*w}w=this._createVertexs(y,s[0],s[1],x,w,r,o,u,q);s=this.batchIndex*this.positionStride;x=this.vertex;v=z.__webglRenderAlpha;x[s+0]=w[0];x[s+1]=w[1];x[s+2]=w[2];x[s+3]=w[3];x[s+4]=v;x[s+5]=w[4];x[s+6]=w[5];x[s+7]=w[6];x[s+8]=w[7];x[s+9]=v;x[s+10]=w[8];x[s+11]=w[9];x[s+12]=w[10];x[s+13]=w[11];x[s+14]=v;x[s+15]=w[12];x[s+16]=w[13];x[s+17]=w[14];x[s+18]=w[15];x[s+19]=v;w=z.__webglWorldMatrix;for(v=0;4>v;v++){t=x[s+5*v],u=x[s+5*v+1],x[s+5*v]=w.a*t+w.c*u+w.tx,x[s+5*v+1]=w.b*t+w.d*u+w.ty}z.texture=y.texture;this.sprites[this.batchIndex++]=z},_renderBatches:function(){var f=this.gl;f.bufferSubData(f.ARRAY_BUFFER,0,this.vertex.subarray(0,this.batchIndex*this.positionStride));for(var f=0,e=null,m=0;m<this.batchIndex;m++){var g=this.sprites[m];e&&e!==g.texture&&(this._renderBatch(f,m),f=m);e=g.texture}this._renderBatch(f,this.batchIndex);this.batchIndex=0},_renderBatch:function(f,e){var m=this.gl,g=e-f;0<g&&(m.bindTexture(m.TEXTURE_2D,this.sprites[f].texture),m.drawElements(m.TRIANGLES,6*g,m.UNSIGNED_SHORT,12*f))},_initShaders:function(){this.defaultShader=new l(this,{v:"attribute vec2 a_position;\nattribute vec2 a_TexCoord;\nattribute float a_alpha;\nuniform mat3 u_projectionTransform;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n    v_TexCoord = a_TexCoord;\n    v_alpha = a_alpha;\n}\n",f:"\nprecision mediump float;\nuniform sampler2D u_Sampler;\nvarying vec2 v_TexCoord;\nvarying float v_alpha;\nvoid main(){\n    gl_FragColor = texture2D(u_Sampler, v_TexCoord) * v_alpha;\n}\n"},{attributes:[{name:"a_position",count:2,offset:0,stride:20},{name:"a_TexCoord",count:2,offset:8,stride:20},{name:"a_alpha",count:1,offset:16,stride:20}],uniforms:["u_projectionTransform","u_Sampler"]});this.notextureShader=new l(this,{v:"attribute vec2 a_position;\nuniform mat3 u_projectionTransform;\nvoid main(){\n    gl_Position =  vec4((u_projectionTransform * vec3(a_position, 1.0)).xy, 1.0, 1.0);\n}\n",f:"\nprecision mediump float;\nuniform vec4 u_color;\nvoid main(){\n    gl_FragColor = u_color;\n}\n"},{attributes:[{name:"a_position",count:2,offset:0,stride:8}],uniforms:["u_projectionTransform","u_color"]})},_createVertexs:function(z,y,x,w,v,t,u,s,q){var r=this.__tempVertexs||[],o=z.width;z=z.height;w/=o;v/=z;y/=o;x/=z;1<w+y&&(w=1-y);1<v+x&&(v=1-x);x=1-x-v;u=-q-u;o=0;r[o++]=t;r[o++]=u;r[o++]=y;r[o++]=x;r[o++]=t+s;r[o++]=u;r[o++]=y+w;r[o++]=x;r[o++]=t;r[o++]=u+q;r[o++]=y;r[o++]=x+v;r[o++]=t+s;r[o++]=u+q;r[o++]=y+w;r[o++]=x+v;return r},_setConcatenatedMatrix:function(n,e){var s=n.__webglWorldMatrix,r=1,p=0,q=360-n.rotation%360,o=n.scaleX,m=n.scaleY;q&&(p=q*j,r=Math.cos(p),p=Math.sin(p));s.a=r*o;s.b=p*o;s.c=-p*m;s.d=r*m;s.tx=n.x;s.ty=-n.y;r=e.__webglWorldMatrix;s.concat(r.a,r.b,r.c,r.d,r.tx,r.ty)}}),a={},l=function(e,d,f){this.renderer=e;this.gl=e.gl;this.program=this._createProgram(this.gl,d.v,d.f);f=f||{};this.attributes=f.attributes||[];this.uniforms=f.uniforms||[];this.vertexBuffer=this.gl.createBuffer();this.indexBuffer=this.gl.createBuffer()};l.prototype={active:function(m){var f=this,q=f.renderer,p=q.activeShader;if(p!==f||m){var o=f.gl,n=f.program;n&&o&&(p&&p.attributes.forEach(function(b){o.disableVertexAttribArray(p[b.name])}),q.activeShader=f,o.useProgram(n),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,f.indexBuffer),o.bindBuffer(o.ARRAY_BUFFER,f.vertexBuffer),f.attributes.forEach(function(b){attribute=b.name;f[attribute]=f[attribute]||o.getAttribLocation(n,attribute);o.enableVertexAttribArray(f[attribute]);o.vertexAttribPointer(f[attribute],b.count,o.FLOAT,!1,b.stride,b.offset)}),f.uniforms.forEach(function(b){f[b]=f[b]||o.getUniformLocation(n,b)}),f.width!==q.width||f.height!==q.height)&&(f.width=q.width,f.height=q.height,f.uploadProjectionTransform(!0))}},uploadTexture:function(b){var f=this.gl;if(a[b.src]){b.texture=a[b.src]}else{var e=f.createTexture();f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,e);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,1);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.uniform1i(this.u_Sampler,0);f.bindTexture(f.TEXTURE_2D,null);b.texture=e;a[b.src]=e}},uploadProjectionTransform:function(d){var c=this.gl;if(!this._projectionTransformElements||d){this._projectionTransformElements=new Float32Array([2/this.width,0,0,0,2/this.height,0,-1,1,1])}c.uniformMatrix3fv(this.u_projectionTransform,!1,this._projectionTransformElements)},_createProgram:function(f,e,m){e=this._createShader(f,f.VERTEX_SHADER,e);var g=this._createShader(f,f.FRAGMENT_SHADER,m);if(!e||!g){return null}if(m=f.createProgram()){if(f.attachShader(m,e),f.attachShader(m,g),f.linkProgram(m),f.deleteShader(g),f.deleteShader(e),!f.getProgramParameter(m,f.LINK_STATUS)){return e=f.getProgramInfoLog(m),console.log("Failed to link program: "+e),f.deleteProgram(m),null}}return m},_createShader:function(e,d,f){if(d=e.createShader(d)){if(e.shaderSource(d,f),e.compileShader(d),!e.getShaderParameter(d,e.COMPILE_STATUS)){return f=e.getShaderInfoLog(d),console.log("Failed to compile shader: "+f),e.deleteShader(d),null}}return d}};k.isSupport=function(){if(void 0===this._isSupport){var b=document.createElement("canvas");b.getContext&&(b.getContext("webgl")||b.getContext("experimental-webgl"))?this._isSupport=!0:this._isSupport=!1}return this._isSupport};i.WebGLRenderer=k})(window);(function(b){b=b.Hilo;var a=b.Class.create({Extends:b.Renderer,constructor:function(c){a.superclass.constructor.call(this,c);this.context=this.canvas.getContext("2d")},renderType:"canvas",context:null,startDraw:function(c){return c.visible&&0<c.alpha?(c===this.stage&&this.clear(0,0,c.width,c.height),this.context.save(),!0):!1},draw:function(o){var p=this.context,s=o.width,r=o.height;o.clipChildren&&(p.beginPath(),p.rect(0,0,s,r),p.clip());var t=o.background;t&&(p.fillStyle=t,p.fillRect(0,0,s,r));var j=o.drawable;if(t=j&&j.image){var j=j.rect,l=j[2],m=j[3],n=j[4],i=j[5];s||r||(s=o.width=l,r=o.height=m);(n||i)&&p.translate(n-0.5*l,i-0.5*m);p.drawImage(t,j[0],j[1],l,m,0,0,s,r)}},endDraw:function(c){this.context.restore()},transform:function(w){var x=this.context,z=w.x,y=w.y,A=w.scaleX,r=w.scaleY,s=w.pivotX,u=w.pivotY,v=w.rotation%360,i=w.align;if(i){if("function"===typeof i){w.align()}else{var B=w.parent;if(B){var p=w.width,j=w.height,o=B.width,B=B.height;switch(i){case"TL":y=z=0;break;case"T":z=o-p>>1;y=0;break;case"TR":z=o-p;y=0;break;case"L":z=0;y=B-j>>1;break;case"C":z=o-p>>1;y=B-j>>1;break;case"R":z=o-p;y=B-j>>1;break;case"BL":z=0;y=B-j;break;case"B":z=o-p>>1;y=B-j;break;case"BR":z=o-p,y=B-j}}}}0==z&&0==y||x.translate(z,y);0!=v&&x.rotate(v*Math.PI/180);1==A&&1==r||x.scale(A,r);0==s&&0==u||x.translate(-s,-u);0<w.alpha&&(x.globalAlpha*=w.alpha)},clear:function(g,h,f,i){this.context.clearRect(g,h,f,i)},resize:function(c,f){this.canvas.width=c;this.canvas.height=f}});b.CanvasRenderer=a})(window);(function(h){var c=h.Hilo,i=c.Class,j=c.Event,a=c.Matrix;h=function(){function b(C,A,z){for(var y=C.length,v=A.length,s,t,r,o,q,k,E=0,D=s=0;D<y;D++){s=C[D];t=C[D<y-1?D+1:0];E=s.y-t.y;s=t.x-s.x;t=Math.sqrt(E*E+s*s);E/=t;s/=t;t=r=C[0].x*E+C[0].y*s;for(var B=1;B<y;B++){k=C[B].x*E+C[B].y*s,k>r?r=k:k<t&&(t=k)}o=q=A[0].x*E+A[0].y*s;for(B=1;B<v;B++){k=A[B].x*E+A[B].y*s,k>q?q=k:k<o&&(o=k)}t<o?(t=o-r,E=-E,s=-s):t-=q;if(0<=t){return !1}t>z.overlap&&(z.overlap=t,z.normal.x=E,z.normal.y=s)}return z}return i.create({Mixes:j,constructor:function(d){d=d||{};this.id=this.id||d.id||c.getUid("View");c.copy(this,d,!0)},id:null,x:0,y:0,width:0,height:0,alpha:1,rotation:0,visible:!0,pivotX:0,pivotY:0,scaleX:1,scaleY:1,pointerEnabled:!0,background:null,align:null,drawable:null,boundsArea:null,parent:null,depth:-1,getStage:function(){for(var e=this,d;d=e.parent;){e=d}return e.canvas?e:null},getScaledWidth:function(){return this.width*this.scaleX},getScaledHeight:function(){return this.height*this.scaleY},addTo:function(e,d){"number"===typeof d?e.addChildAt(this,d):e.addChild(this);return this},removeFromParent:function(){var d=this.parent;d&&d.removeChild(this);return this},getBounds:function(){for(var z=this.width,y=this.height,x=this.getConcatenatedMatrix(),z=this.boundsArea||[{x:0,y:0},{x:z,y:0},{x:z,y:y},{x:0,y:y}],y=[],w,v,s,t,r,o,q,k=0,A=z.length;k<A;k++){w=x.transformPoint(z[k],!0,!0),v=w.x,s=w.y,0==k?(t=r=v,o=q=s):(t>v?t=v:r<v&&(r=v),o>s?o=s:q<s&&(q=s)),y[k]=w}y.x=t;y.y=o;y.width=r-t;y.height=q-o;return y},getConcatenatedMatrix:function(w){for(var v=new a(1,0,0,1,0,0),u=this;u!=w&&u.parent;u=u.parent){var s=1,q=0,r=u.rotation%360,x=u.pivotX,p=u.pivotY,k=u.scaleX,o=u.scaleY;r&&(q=r*Math.PI/180,s=Math.cos(q),q=Math.sin(q));0!=x&&(v.tx-=x);0!=p&&(v.ty-=p);v.concat(s*k,q*k,-q*o,s*o,u.x,u.y)}return v},hitTestPoint:function(C,A,z){var y=this.getBounds(),v=C>=y.x&&C<=y.x+y.width&&A>=y.y&&A<=y.y+y.height;if(v&&z){z=0;for(var v=!1,s,t,r,o,q=0,k=y.length;q<k;q++){var E=y[q],D=y[(q+1)%k];if(E.y==D.y&&A==E.y&&(E.x>D.x?(s=D.x,t=E.x):(s=E.x,t=D.x),C>=s&&C<=t)){v=!0;continue}E.y>D.y?(r=D.y,o=E.y):(r=E.y,o=D.y);if(!(A<r||A>o)){var B=(A-E.y)*(D.x-E.x)/(D.y-E.y)+E.x;B>C?z++:B==C&&(v=!0);E.x>C&&E.y==A&&(E=y[(k+q-1)%k],(E.y<A&&D.y>A||E.y>A&&D.y<A)&&z++)}}v=v||1==z%2}return v},hitTestObject:function(k,f){var n=this.getBounds(),m=k.getBounds(),l=n.x<=m.x+m.width&&m.x<=n.x+n.width&&n.y<=m.y+m.height&&m.y<=n.y+n.height;l&&f&&(l=(l=b(n,m,{overlap:-Infinity,normal:{x:0,y:0}}))?b(m,n,l):!1);return !!l},_render:function(e,d){this.onUpdate&&!1===this.onUpdate(d)||!e.startDraw(this)||(e.transform(this),this.render(e,d),e.endDraw(this))},_fireMouseEvent:function(e){e.eventCurrentTarget=this;this.fire(e);if("mousemove"==e.type){if(!this.__mouseOver){this.__mouseOver=!0;var d=c.copy({},e);d.type="mouseover";this.fire(d)}}else{"mouseout"==e.type&&(this.__mouseOver=!1)}d=this.parent;e._stopped||e._stopPropagationed||!d||("mouseout"==e.type||"touchout"==e.type?d.hitTestPoint(e.stageX,e.stageY,!0)||d._fireMouseEvent(e):d._fireMouseEvent(e))},onUpdate:null,render:function(e,d){e.draw(this)},toString:function(){return c.viewToString(this)}})}();c.View=h})(window);(function(b){var a=b.Hilo,c=a.Class.create({Extends:a.View,constructor:function(e){e=e||{};this.id=this.id||e.id||a.getUid("Container");c.superclass.constructor.call(this,e);this.children?this._updateChildren():this.children=[]},children:null,pointerChildren:!0,clipChildren:!1,getNumChildren:function(){return this.children.length},addChildAt:function(k,f){var l=this.children,g=l.length,j=k.parent;f=0>f?0:f>g?g:f;var i=this.getChildIndex(k);if(i==f){return this}0<=i?(l.splice(i,1),f=f==g?g-1:f):j&&j.removeChild(k);l.splice(f,0,k);0>i?this._updateChildren(f):this._updateChildren(i<f?i:f,(i<f?f:i)+1);return this},addChild:function(i){for(var f=this.children.length,j=arguments,g=0,h=j.length;g<h;g++){this.addChildAt(j[g],f+g)}return this},removeChildAt:function(k){var f=this.children;if(0>k||k>=f.length){return null}var l=f[k];if(l){var g=l.drawable,j=g&&g.domElement;if(j){var i=j.parentNode;i&&i.removeChild(j);g.domElement=null}l.parent=null;l.depth=-1}f.splice(k,1);this._updateChildren(k);return l},removeChild:function(e){return this.removeChildAt(this.getChildIndex(e))},removeChildById:function(i){for(var f=this.children,j,g=0,h=f.length;g<h;g++){if(j=f[g],j.id===i){return this.removeChildAt(g),j}}return null},removeAllChildren:function(){for(;this.children.length;){this.removeChildAt(0)}return this},getChildAt:function(f){var e=this.children;return 0>f||f>=e.length?null:e[f]},getChildById:function(i){for(var f=this.children,j,g=0,h=f.length;g<h;g++){if(j=f[g],j.id===i){return j}}return null},getChildIndex:function(e){return this.children.indexOf(e)},setChildIndex:function(i,f){var j=this.children,g=j.indexOf(i);if(0<=g&&g!=f){var h=j.length;f=0>f?0:f>=h?h-1:f;j.splice(g,1);j.splice(f,0,i);this._updateChildren()}return this},swapChildren:function(i,f){var j=this.children,g=this.getChildIndex(i),h=this.getChildIndex(f);i.depth=h;j[h]=i;f.depth=g;j[g]=f},swapChildrenAt:function(i,f){var j=this.children,g=this.getChildAt(i),h=this.getChildAt(f);g.depth=f;j[f]=g;h.depth=i;j[i]=h},sortChildren:function(f){var e=this.children;if("string"==typeof f){var g=f;f=function(h,d){return d[g]-h[g]}}e.sort(f);this._updateChildren()},_updateChildren:function(i,f){var j=this.children,g;f=f||j.length;for(var h=i||0;h<f;h++){g=j[h],g.depth=h+1,g.parent=this}},contains:function(e){for(;e=e.parent;){if(e===this){return !0}}return !1},getViewAtPoint:function(n,p,o,r,m){if(this.clipChildren&&!this.hitTestPoint(n,p,o)){return null}for(var j=r?[]:null,k=this.children,l,i,s=k.length-1;0<=s;s--){if(l=k[s],!(!l||!l.visible||0>=l.alpha||m&&!l.pointerEnabled)){if(l.children&&l.children.length&&(!m||l.pointerChildren)&&(i=l.getViewAtPoint(n,p,o,r,m)),i){if(r){i.length&&(j=j.concat(i))}else{return i}}else{if(l.hitTestPoint(n,p,o)){if(r){j.push(l)}else{return l}}}}}return r&&j.length?j:null},render:function(j,e){c.superclass.render.call(this,j,e);var l=this.children.slice(0),f,g,i;f=0;for(g=l.length;f<g;f++){i=l[f],i.parent===this&&i._render(j,e)}}});a.Container=c})(window);(function(i){var h=i.Hilo,j=h.CanvasRenderer,k=h.DOMRenderer,a=h.WebGLRenderer,l=h.Class.create({Extends:h.Container,constructor:function(f){f=f||{};this.id=this.id||f.id||h.getUid("Stage");l.superclass.constructor.call(this,f);this._initRenderer(f);var c=this.width,m=this.height,g=this.updateViewport();f.width||(c=g&&g.width||320);f.height||(m=g&&g.height||480);this.resize(c,m,!0)},canvas:null,renderer:null,paused:!1,viewport:null,_initRenderer:function(b){var e=b.canvas,d=b.container;b=b.renderType||"canvas";"string"===typeof e&&(e=h.getElement(e));"string"===typeof d&&(d=h.getElement(d));e?e.getContext||(b="dom"):e=h.createElement("dom"===b?"div":"canvas",{style:{position:"absolute"}});this.canvas=e;d&&d.appendChild(e);e={canvas:e,stage:this};switch(b){case"dom":this.renderer=new k(e);break;case"webgl":a.isSupport()?this.renderer=new a(e):this.renderer=new j(e);break;default:this.renderer=new j(e)}},_render:function(z,y){if((!this.onUpdate||!1!==this.onUpdate(y))&&z.startDraw(this)){var x=this.width,w=this.height,v=this.scaleX,t=this.scaleY,u=this._height,s=this._scaleX,q=this._scaleY,r=this.canvas,o=r.style;if(this._width!==x||s!==v){this._width=x,this._scaleX=v,r.width=x,o.width=v*x+"px",console.log(v*x+"px")}if(u!==w||q!==t){this._height=w,this._scaleY=t,r.height=w,o.height=t*w+"px",console.log(t*w+"px")}(x=this.drawable&&this.drawable.domElement)&&!x.parentNode&&(x.style.overflow="hidden",r.appendChild(x));this.render(z,y);z.endDraw(this)}},addTo:function(d){var c=this.canvas;c.parentNode!==d&&d.appendChild(c);return this},tick:function(b){this.paused||this._render(this.renderer,b)},enableDOMEvent:function(n,m){var s=this,r=s.canvas,q="string"===typeof n?[n]:n;m=!1!==m;for(var o=s._domListener||(s._domListener=function(b){s._onDOMEvent(b)}),p=0;p<q.length;p++){n=q[p],m?r.addEventListener(n,o,!1):r.removeEventListener(n,o)}return s},_onDOMEvent:function(n){var g=n.type,s=0==g.indexOf("touch"),r=n;if(s){var q=n.touches,r=n.changedTouches,r=q&&q.length?q[0]:r&&r.length?r[0]:null}var q=r.pageX||r.clientX,r=r.pageY||r.clientY,p=this.viewport||this.updateViewport();n.stageX=q=(q-p.left)/this.scaleX;n.stageY=r=(r-p.top)/this.scaleY;n.stopPropagation=function(){this._stopPropagationed=!0};var q=this.getViewAtPoint(q,r,!0,!1,!0)||this,r=this.canvas,p=this._eventTarget,o="mouseout"===g;if(p&&(!(p==q||p.contains&&p.contains(q))||o)){if(o="touchmove"===g?"touchout":"mousemove"===g||o||!q?"mouseout":null){var m=h.copy({},n);m.type=o;m.eventTarget=p;p._fireMouseEvent(m)}n.lastEventTarget=p;this._eventTarget=null}q&&q.pointerEnabled&&"mouseout"!==g&&(n.eventTarget=this._eventTarget=q,q._fireMouseEvent(n));s||(r.style.cursor=q&&q.pointerEnabled&&q.useHandCursor?"pointer":"");h.browser.android&&"touchmove"===g&&n.preventDefault()},updateViewport:function(){var d=this.canvas,c=null;d.parentNode&&(c=this.viewport=h.getElementRect(d));return c},resize:function(e,d,f){if(f||this.width!==e||this.height!==d){this.width=e,this.height=d,this.renderer.resize(e,d),this.updateViewport()}}});h.Stage=l})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Bitmap");h.superclass.constructor.call(this,d);this.drawable=new c(d);if(!this.width||!this.height){if(d=this.drawable.rect){this.width=d[2],this.height=d[3]}}},setImage:function(d,e){this.drawable.init({image:d,rect:e});e&&(this.width=e[2],this.height=e[3]);return this}});a.Bitmap=h})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Sprite");h.superclass.constructor.call(this,d);this._frames=[];this._frameNames={};this.drawable=new c;d.frames&&this.addFrame(d.frames)},_frames:null,_frameNames:null,_frameElapsed:0,_firstRender:!0,paused:!1,loop:!0,timeBased:!1,interval:1,currentFrame:0,getNumFrames:function(){return this._frames?this._frames.length:0},addFrame:function(f,k){var g=null!=k?k:this._frames.length;if(f instanceof Array){for(var j=0,i=f.length;j<i;j++){this.setFrame(f[j],g+j)}}else{this.setFrame(f,g)}return this},setFrame:function(e,i){var f=this._frames,g=f.length;i=0>i?0:i>g?g:i;f[i]=e;e.name&&(this._frameNames[e.name]=e);if(0==i&&!this.width||!this.height){this.width=e.rect[2],this.height=e.rect[3]}return this},getFrame:function(d){if("number"===typeof d){var e=this._frames;return 0>d||d>=e.length?null:e[d]}return this._frameNames[d]},getFrameIndex:function(f){var k=this._frames,g=k.length,j=-1;if("number"===typeof f){j=f}else{if(f="string"===typeof f?this._frameNames[f]:f){for(var i=0;i<g;i++){if(f===k[i]){j=i;break}}}}return j},play:function(){this.paused=!1;return this},stop:function(){this.paused=!0;return this},"goto":function(e,i){var f=this._frames.length,g=this.getFrameIndex(e);this.currentFrame=0>g?0:g>=f?f-1:g;this.paused=i;this._firstRender=!0;return this},_render:function(d,i){var f=this.currentFrame,g;this._firstRender?(g=f,this._firstRender=!1):g=this._nextFrame(i);g!=f&&(this.currentFrame=g,(f=this._frames[g].callback)&&f.call(this));if(this.onEnterFrame){this.onEnterFrame(g)}this.drawable.init(this._frames[g]);h.superclass._render.call(this,d,i)},_nextFrame:function(f){var k=this._frames,g=k.length,j=this.currentFrame,k=k[j],i=this._frameElapsed;f=0!=j||this.drawable?i+(this.timeBased?f:1):0;i=this._frameElapsed=f<(k.duration||this.interval)?f:0;(k.stop||!this.loop&&j>=g-1)&&this.stop();this.paused||0!=i||(null!=k.next?j=this.getFrameIndex(k.next):j>=g-1?j=0:this.drawable&&j++);return j},setFrameCallback:function(d,e){if(d=this.getFrame(d)){d.callback=e}return this},onEnterFrame:null});a.Sprite=h})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("Button");h.superclass.constructor.call(this,d);this.drawable=new c(d);this.setState(h.UP)},upState:null,overState:null,downState:null,disabledState:null,state:null,enabled:!0,useHandCursor:!0,setEnabled:function(d){this.enabled!=d&&(d?this.setState(h.UP):this.setState(h.DISABLED));return this},setState:function(d){if(this.state!==d){this.state=d;this.pointerEnabled=this.enabled=d!==h.DISABLED;var e;switch(d){case h.UP:e=this.upState;break;case h.OVER:e=this.overState;break;case h.DOWN:e=this.downState;break;case h.DISABLED:e=this.disabledState}e&&(this.drawable.init(e),a.copy(this,e,!0))}return this},fire:function(d,e){if(this.enabled){switch("string"===typeof d?d:d.type){case"mousedown":case"touchstart":case"touchmove":this.setState(h.DOWN);break;case"mouseover":this.setState(h.OVER);break;case"mouseup":this.overState?this.setState(h.OVER):this.upState&&this.setState(h.UP);break;case"touchend":case"touchout":case"mouseout":this.setState(h.UP)}return h.superclass.fire.call(this,d,e)}},Statics:{UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"}});a.Button=h})(window);(function(i){var h=i.Hilo;i=h.Class;var j=h.View,k=h.createElement("canvas"),a=k&&k.getContext("2d"),l=i.create({Extends:j,constructor:function(b){b=b||{};this.id=this.id||b.id||h.getUid("Text");l.superclass.constructor.call(this,b);b.font||(this.font="12px arial");this._fontHeight=l.measureFontHeight(this.font)},text:null,color:"#000",textAlign:null,textVAlign:null,outline:!1,lineSpacing:0,maxWidth:200,font:null,textWidth:0,textHeight:0,cacheDirty:!0,cache:function(b){(b||this._cacheDirty||!this._cacheImage)&&this.updateCache()},updateCache:function(){k.width=this.width;k.height=this.height;this._draw(a);this._cacheImage=new Image;this._cacheImage.src=k.toDataURL();this.drawable=this.drawable||new Drawable;this.drawable.init(this._cacheImage);this.cacheDirty=!1},setCacheDirty:function(b){this._cacheDirty=b},setFont:function(b){this.font!==b&&(this.font=b,this._fontHeight=l.measureFontHeight(b),this.setCacheDirty(!0));return this},render:function(f,e){if("canvas"===f.renderType){this._draw(f.context)}else{if("dom"===f.renderType){var m=this.drawable.domElement,g=m.style;g.font=this.font;g.textAlign=this.textAlign;g.color=this.color;g.width=this.width+"px";g.height=this.height+"px";g.lineHeight=this._fontHeight+this.lineSpacing+"px";m.innerHTML=this.text}else{this.cache()}f.draw(this)}},_draw:function(B){var A=this.text.toString();if(A){B.font=this.font;B.textAlign=this.textAlign;B.textBaseline="top";var z=A.split(/\r\n|\r|\n|<br(?:[ \/])*>/),y=0,x=0,t=this._fontHeight+this.lineSpacing,v,s,q,A=[];v=0;for(len=z.length;v<len;v++){if(s=z[v],q=B.measureText(s).width,q<=this.maxWidth){A.push({text:s,y:x}),y<q&&(y=q),x+=t}else{q="";var r=0,o,D,C;D=0;for(wlen=s.length;D<wlen;D++){C=s[D],o=B.measureText(q+C).width,o>this.maxWidth?(A.push({text:q,y:x}),y<r&&(y=r),x+=t,q=C):(r=o,q+=C),D==wlen-1&&(A.push({text:q,y:x}),q!==C&&y<o&&(y=o),x+=t)}}}this.textWidth=y;this.textHeight=x;this.width||(this.width=y);this.height||(this.height=x);z=0;switch(this.textVAlign){case"middle":z=this.height-this.textHeight>>1;break;case"bottom":z=this.height-this.textHeight}if(v=this.background){B.fillStyle=v,B.fillRect(0,0,this.width,this.height)}this.outline?B.strokeStyle=this.color:B.fillStyle=this.color;for(v=0;v<A.length;v++){s=A[v],this._drawTextLine(B,s.text,z+s.y)}}},_drawTextLine:function(g,f,o){var n=0,m=this.width;switch(this.textAlign){case"center":n=m>>1;break;case"right":case"end":n=m}this.outline?g.strokeText(f,n,o):g.fillText(f,n,o)},Statics:{measureFontHeight:function(e){var d=document.documentElement,f=h.createElement("div",{style:{font:e,position:"absolute"},innerHTML:"M"});d.appendChild(f);e=f.offsetHeight;d.removeChild(f);return e}}});h.Text=l})(window);(function(b){var a=b.Hilo,c=a.Bitmap,h=a.Class.create({Extends:a.Container,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("BitmapText");h.superclass.constructor.call(this,d);if(d=d.text+""){this.text="",this.setText(d)}this.pointerChildren=!1},glyphs:null,letterSpacing:0,text:"",textAlign:"left",setText:function(i){i=i.toString();var o=i.length;if(this.text!=i){this.text=i;var j,n,m,l=m=0,k=0;for(j=0;j<o;j++){if(n=i.charAt(j),n=this.glyphs[n]){k=m+(0<m?this.letterSpacing:0),this.children[j]?(m=this.children[j],m.setImage(n.image,n.rect)):(m=this._createBitmap(n),this.addChild(m)),m.x=k,m=k+n.rect[2],l=Math.max(l,n.rect[3])}}for(j=this.children.length-1;j>=o;j--){this._releaseBitmap(this.children[j]),this.children[j].removeFromParent()}this.width=m;this.height=l;this.setTextAlign();return this}},_createBitmap:function(d){var e;h._pool.length?(e=h._pool.pop(),e.setImage(d.image,d.rect)):e=new c({image:d.image,rect:d.rect});return e},_releaseBitmap:function(d){h._pool.push(d)},setTextAlign:function(d){this.textAlign=d||this.textAlign;switch(this.textAlign){case"center":this.pivotX=0.5*this.width;break;case"right":this.pivotX=this.width;break;default:this.pivotX=0}return this},hasGlyphs:function(e){var i=this.glyphs;if(!i){return !1}e=e.toString();var f=e.length,g;for(g=0;g<f;g++){if(!i[e.charAt(g)]){return !1}}return !0},Statics:{_pool:[],createGlyphs:function(i,p,j,o){var n=i.toString();j=j||n.length;var m=p.width/j;o=p.height/(o||1);var k={},l=0;for(i=i.length;l<i;l++){charStr=n.charAt(l),k[charStr]={image:p,rect:[l%j*m,o*Math.floor(l/j),m,o]}}return k}}});a.BitmapText=h})(window);(function(b){var a=b.Hilo,c=a.Drawable,h=a.Class.create({Extends:a.View,constructor:function(d){d=d||{};this.id=this.id||d.id||a.getUid("DOMElement");h.superclass.constructor.call(this,d);this.drawable=new c;(this.drawable.domElement=d.element||a.createElement("div")).id=this.id},_render:function(d,e){this.onUpdate&&!1===this.onUpdate(e)||this.visible&&this.render(d,e)},render:function(g,m){var i=g.canvas;if("dom"!=g.renderType){var l=this.depth,k=i.nextSibling,j;if(!this.drawable.domElement.parentNode){for(;k&&3!=k.nodeType;){j=parseInt(k.style.zIndex)||0;if(0>=j||j>l){break}k=k.nextSibling}i.parentNode.insertBefore(this.drawable.domElement,k);g.setElementStyleByView(this)}}else{g.draw(this)}}});a.DOMElement=h})(window);(function(b){b=b.Hilo;var a=b.Class,c=function(){function e(d,g){var f={image:d.image,rect:d.rect};g&&(f.name=g.name||null,f.duration=g.duration||0,f.stop=!!g.stop,f.next=g.next||null);return f}return a.create({constructor:function(n){var m;var o=n.frames;if(o){m=[];var k;if(o instanceof Array){for(var j=0,i=o.length;j<i;j++){k=o[j],m[j]={image:n.image,rect:k}}}else{k=o.frameWidth;for(var i=o.frameHeight,p=n.width/k|0,j=n.height/i|0,o=o.numFrames||p*j,j=0;j<o;j++){m[j]={image:n.image,rect:[j%p*k,(j/p|0)*i,k,i]}}}}else{m=null}this._frames=m;var d;m=this._frames;if(n=n.sprites){var o={},r;for(d in n){j=n[d];if("number"===typeof j){k=e(m[j])}else{if(j instanceof Array){for(k=[],i=0,p=j.length;i<p;i++){r=j[i];var h;"number"===typeof r?r=e(m[r]):(h=r.rect,"number"===typeof h&&(h=m[r.rect]),r=e(h,r));k[i]=r}}else{for(k=[],i=j.from;i<=j.to;i++){k[i-j.from]=e(m[i],j[i])}}}o[d]=k}d=o}else{d=null}this._sprites=d},_frames:null,_sprites:null,getFrame:function(d){var f=this._frames;return f&&f[d]},getSprite:function(d){var f=this._sprites;return f&&f[d]},Statics:{createSpriteFrames:function(v,u,w,s,r,p,o){if("[object Array]"===Object.prototype.toString.call(v)){u=[];for(var h=0,x=v.length;h<x;h++){u=u.concat(this.createSpriteFrames.apply(this,v[h]))}}else{if("string"===typeof u){var k=u.split(",");u=[];for(var i=0,j=k.length;i<j;i++){if(x=k[i].split("-"),1==x.length){u.push(parseInt(x[0]))}else{for(h=parseInt(x[0]),x=parseInt(x[1]);h<=x;h++){u.push(h)}}}}k=Math.floor(w.width/s);for(h=0;h<u.length;h++){i=u[h],u[h]={rect:[i%k*s,r*Math.floor(i/k),s,r],image:w,duration:o}}u[0].name=v;p?u[u.length-1].next=v:u[u.length-1].stop=!0}return u}}})}();b.TextureAtlas=c})(window);